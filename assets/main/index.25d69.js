window.__require=function e(t,o,a){function i(n,s){if(!o[n]){if(!t[n]){var c=n.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+n+"'")}n=c}var u=o[n]={exports:{}};t[n][0].call(u.exports,function(e){return i(t[n][1][e]||e)},u,u.exports,e,t,o,a)}return o[n].exports}for(var r="function"==typeof __require&&__require,n=0;n<a.length;n++)i(a[n]);return i}({AndroidPaySDK:[function(e,t,o){"use strict";cc._RF.push(t,"1b4abeQagFOr7jac5uxoRP4","AndroidPaySDK"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function e(){window.androidPayCallBack=this.SDKPayCallBack,window.androidPayCallSelf=this}return e.prototype.PayisLoaded=function(){return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","payStatus","()Z")},e.prototype.purchase=function(e,t,o){this.onPayCallback=o,jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","callPayment","(Ljava/lang/String;I)V",e,t)},e.prototype.suppleMent=function(e){this.onSupplementBack=e,jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","suppleMent","()V")},e.prototype.SDKPayCallBack=function(e){var t=e.type,o=e.revalue,a=e.productId,i=e.orderId;console.log("*****king SDKPayCallBack status:"+o+"  type:"+t+"  productId:"+a+"  orderId:"+i);var r=window.androidPayCallSelf;"androidpayMentBack"==t?r.onPayCallback(i,o):"androidSupplementBack"==t&&r.onSupplementBack(a,i,o)},e}();o.default=a,cc._RF.pop()},{}],AndroidSDK:[function(e,t,o){"use strict";cc._RF.push(t,"a1b32cn4hRLSIw/C4wM/gsB","AndroidSDK"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./SDKConst"),i=e("../core/global/Emitter"),r=cc._decorator,n=r.ccclass,s=(r.property,function(){function e(){window.androidCallBack=this.SDKCallBack,window.androidCallSelf=this}var t;return t=e,e.prototype.getSDKPlatform=function(){return"Default"},e.prototype.getPlatform=function(){return"Android"},e.prototype.logEvent=function(e,t){var o="";for(var a in t)""!=o&&(o+=","),o+=a+","+t[a];jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","logEvent","(Ljava/lang/String;Ljava/lang/String;)V",e,o)},e.prototype.logEventToFirebase=function(e,t){var o="";for(var a in t)""!=o&&(o+=","),o+=a+","+t[a];jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","logEventToFirebase","(Ljava/lang/String;Ljava/lang/String;)V",e,o)},e.prototype.getAFStatus=function(){return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getAFStatus","()I")},e.prototype.setAdUid=function(e){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","setUid","(Ljava/lang/String;)V",e)},e.prototype.ADisLoaded=function(e){return void 0===e&&(e=a.default.AD_TYPE_INTERST),e==a.default.AD_TYPE_INTERST?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","isInterstitialReady","()Z"):e==a.default.AD_TYPE_REWARD?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","isRewardVedioLoaded","()Z"):e==a.default.AD_TYPE_BANNER&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","isBannerLoaded","()Z")},e.prototype.initAD=function(){},e.prototype.loadAD=function(e,t){void 0===t&&(t=a.default.AD_TYPE_INTERST),t==a.default.AD_TYPE_INTERST&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","loadInterstitial","()V")},e.prototype.showInterstitial=function(e,t,o,a){this.InterstitialCall={showStateCall:e,closeCall:t,thisObj:o},jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showInterstitial","(I)V",a)},e.prototype.showReward=function(e,t,o,a){this.ADCall={showStateCall:e,closeCall:t,thisObj:o},jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showRewardAD","(I)V",a)},e.prototype.displayBannerAD=function(e){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","displayBannerAD","(Z)V",e)},e.prototype.hasBannerAD=function(){return!0},e.prototype.rewardAvailability=function(){return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","rewardAvailability","()Z")},e.prototype.SDKCallBack=function(e){var t=e.type,o=e.value,a=window.androidCallSelf;if("rewardComplete"==t){var r=a.ADCall,n=r.closeCall,s=r.thisObj;n&&n.call(s,o)}if("rewardShow"==t){var c=a.ADCall,l=c.showStateCall;s=c.thisObj,l&&l.call(s,o)}if("interstitialClosed"==t){var u=a.InterstitialCall;n=u.closeCall,s=u.thisObj,n&&n.call(s,o)}if("interstitialShow"==t){var d=a.InterstitialCall;l=d.showStateCall,s=d.thisObj,l&&l.call(s,o)}"bannerLoaded"==t&&i.Emitter.fire("bannerLoaded")},e.prototype.getLocal=function(){return"en_US"},e.prototype.getData=function(e,o,a){var i=cc.sys.localStorage.getItem(t.localStorageKey),r=i?JSON.parse(i):{};if(e){for(var n={},s=0,c=e;s<c.length;s++){var l=c[s];n[l]=r[l]}o.call(a,n)}else o.call(a,r)},e.prototype.setData=function(e){var o=cc.sys.localStorage.getItem(t.localStorageKey),a=o?JSON.parse(o):{};for(var i in e)a[i]=e[i];cc.sys.localStorage.setItem(t.localStorageKey,JSON.stringify(a))},e.prototype.getNumberData=function(e,o,a){var i=cc.sys.localStorage.getItem(t.localStorageKey+"_num"),r=i?JSON.parse(i):{};if(e){for(var n={},s=0,c=e;s<c.length;s++){var l=c[s];n[l]=r[l]}o.call(a,n)}else o.call(a,r)},e.prototype.showRateDialog=function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","rateOnMarket","()V")},e.prototype.getIsRated=function(){return!1},e.prototype.addPushMessage=function(e,t,o,a,i){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","addPushMessage","(Ljava/lang/String;Ljava/lang/String;III)V",e,t,o,a,i)},e.prototype.getVersion=function(){return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getVersion","()Ljava/lang/String;")},e.prototype.smbCommand=function(e,t){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","command","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},e.localStorageKey="game_MD_1",t=__decorate([n],e)}());o.default=s,cc._RF.pop()},{"../core/global/Emitter":"Emitter","./SDKConst":"SDKConst"}],AnimationClub:[function(e,t,o){"use strict";cc._RF.push(t,"b9d2aWG+EtNAYcZNdGNz/UE","AnimationClub"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ShapeBase"),i=e("../../../core/util/MathUtil"),r=e("../../../data/CardDefine"),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.followScale=function(){return!1},t.prototype.onPlay=function(){var e=this;this.createNodes(75),this.startMove(),this.timeout=setTimeout(function(){for(var t=0,o=e.nodes;t<o.length;t++)o[t].getComponent(cc.Animation).stop();e.endMove(e.onCompleted.bind(e))},1500*a.default.ShapeUpdateTm)},t.prototype.onStop=function(){this.timeout&&(clearTimeout(Number(this.timeout)),this.timeout=0);for(var e=0,t=this.nodes;e<t.length;e++)t[e].getComponent(cc.Animation).stop()},t.prototype.startMove=function(){for(var e=new cc.Vec3(-cc.winSize.width/this.uiRootScale/2-50,cc.winSize.height/this.uiRootScale/2+50),t=new cc.Vec3(-1,316),o=0,i=function(i){i.scale=.5,i.position=e,cc.tween(i).delay(o).to(a.default.ShapeMoveToFrameTm,{position:t}).call(function(){i.getComponent(cc.Animation).play("club")}).start(),o+=.05},r=0,n=this.nodes;r<n.length;r++)i(n[r])},t.prototype.endMove=function(e){for(var t,o=new cc.Vec3(-cc.winSize.width/this.uiRootScale/2-50,cc.winSize.height/this.uiRootScale/2+50),i=0,r=0,n=this.nodes;r<n.length;r++){var s=n[r];t=cc.tween(s).to(a.default.ShapeMoveToFrameTm,{position:o}),i==this.nodes.length-1&&t.call(e),t.start(),i++}},t.prototype.createNodes=function(e){for(var t=[],o=0;o<e;o++){var a=i.default.randomRange(1,r.default.SuitCount+1),n=i.default.randomRange(1,r.default.EachSuitCount+1);t.push(this.getNode(a,n))}return t},t}(a.default);o.default=n,cc._RF.pop()},{"../../../core/util/MathUtil":"MathUtil","../../../data/CardDefine":"CardDefine","./ShapeBase":"ShapeBase"}],AnimationUtil:[function(e,t,o){"use strict";cc._RF.push(t,"d72054Cq6VA47QP9SqWBftU","AnimationUtil"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../core/util/MathUtil"),i=function(){function e(){}return e.randomBezier=function(e,t){var o=(e.x+t.x)/2,i=(e.y+t.y)/2,r=a.default.randomRange(o-this.RamdomDis,o+this.RamdomDis),n=a.default.randomRange(i-this.RamdomDis,i+this.RamdomDis);return[a.default.vec2(e),new cc.Vec2(r,n),a.default.vec2(t)]},e.bezierFly=function(e,t,o,a,i,r,n,s){var c=this,l=t.convertToWorldSpaceAR(cc.Vec3.ZERO);l=e.convertToNodeSpaceAR(l);var u=o.convertToWorldSpaceAR(cc.Vec3.ZERO);u=e.convertToNodeSpaceAR(u);var d=Math.ceil(a/i),p=10*this.DelayGap/d;p>this.DelayGap&&(p=this.DelayGap);for(var h=function(t){var h=cc.instantiate(o);h.stopAllActions(),h.parent=e,h.position=l,h.scale=0;var g=cc.scaleTo(f.ScaleDur,1),m=cc.delayTime(f.MoveDur-2*f.ScaleDur),y=cc.scaleTo(f.ScaleDur,0),v=cc.sequence(g,m,y),b=cc.bezierTo(f.MoveDur,f.randomBezier(l,u)),C=cc.spawn(v,b),_=cc.delayTime(p*t);h.runAction(cc.sequence(_,C,cc.callFunc(function(){h.destroy();var e=t==d-1,l=cc.sequence(cc.callFunc(function(){n(e)}),cc.scaleTo(c.IconScaleDur,1.3),cc.scaleTo(c.IconScaleDur,1));e?(r(a%i==0?i:a%i),o.stopAllActions(),o.runAction(l),setTimeout(s,500)):(r(i),0==t&&o.runAction(cc.repeatForever(l)))})))},f=this,g=0;g<d;g++)h(g)},e.DelayGap=.1,e.MoveDur=.5,e.RamdomDis=150,e.IconScaleDur=.1,e.ScaleDur=1*e.MoveDur/5,e}();o.default=i,cc._RF.pop()},{"../core/util/MathUtil":"MathUtil"}],App:[function(e,t,o){"use strict";cc._RF.push(t,"2600euno/JEyb+FJ8038cTT","App"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./sdk/LogEvent"),i=e("./global/DataManager"),r=e("./Game"),n=e("./sdk/SDKConst"),s=e("./global/GameConfig"),c=e("./core/global/Emitter"),l=e("./global/Const"),u=e("./core/global/I18N"),d=e("./sdk/StsLogEvent"),p=cc._decorator,h=p.ccclass,f=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stage=null,t.Camera=null,t.showBanner=!1,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){o.instance=this,cc.game.on(cc.game.EVENT_HIDE,this.onApplicationPause,this),cc.game.on(cc.game.EVENT_SHOW,this.onApplicationResume,this),c.Emitter.register(l.default.eOnShowUI,this.onShowUI,this),c.Emitter.register(l.default.eOnHideUI,this.onHideUI,this),cc.sys.isNative||cc.sys.isBrowser&&(window.onerror=function(e,t,o,i,r){a.default.error(e,t,o,i,r)})},t.prototype.start=function(){setTimeout(function(){i.default.loadDataResLazy()},1e3)},t.prototype.update=function(e){o.isPause||r.Game.gameMgr.onUpdate(e),r.Game.userData.userSts.time+=e,d.default.onDuration()},t.prototype.onApplicationPause=function(){this.runInBackgroundDate=Date.now(),r.Game.userData.saveUserSts(),r.Game.gameMgr.saveGameData(),console.log("EVENT_HIDE"),this.addPushMessage()},t.prototype.onApplicationResume=function(){Date.now()-this.runInBackgroundDate>6e4&&r.Game.sdkPipeline.showInterstitial(n.default.AD_PLAY_POS_RUN_BACK),console.log("EVENT_SHOW")},t.prototype.startShowBanner=function(){s.default.SDK.hasBannerAD()&&(r.Game.userData.getSuccCount()<3||(this.showBanner=!0,r.Game.sdkPipeline.showBanner(this.showBanner)))},t.prototype.hideBanner=function(){this.showBanner=!1,r.Game.sdkPipeline.showBanner(this.showBanner)},t.prototype.onShowUI=function(e){e.pauseGame&&(o.isPause=!0)},t.prototype.onHideUI=function(){0==r.Game.uiMgr.activeCount&&(o.isPause=!1)},t.prototype.addPushMessage=function(){s.default.SDK.addPushMessage(u.default.get("L5001"),u.default.get("L5005"),1,7200,0),s.default.SDK.addPushMessage(u.default.get("L5002"),u.default.get("L5006"),2,10800,0),s.default.SDK.addPushMessage(u.default.get("L5003"),u.default.get("L5007"),3,79200,0),s.default.SDK.addPushMessage(u.default.get("L5001"),u.default.get("L5008"),4,172800,0),s.default.SDK.addPushMessage(u.default.get("L5003"),u.default.get("L5009"),5,432e3,0),s.default.SDK.addPushMessage(u.default.get("L5004"),u.default.get("L5010"),6,597600,0),s.default.SDK.addPushMessage(u.default.get("L5011"),u.default.get("L5012"),7,14,4)},t.isPause=!1,__decorate([f(cc.Node)],t.prototype,"stage",void 0),__decorate([f(cc.Camera)],t.prototype,"Camera",void 0),o=__decorate([h],t)}(cc.Component);o.default=g,cc._RF.pop()},{"./Game":"Game","./core/global/Emitter":"Emitter","./core/global/I18N":"I18N","./global/Const":"Const","./global/DataManager":"DataManager","./global/GameConfig":"GameConfig","./sdk/LogEvent":"LogEvent","./sdk/SDKConst":"SDKConst","./sdk/StsLogEvent":"StsLogEvent"}],AudioMgr:[function(e,t,o){"use strict";cc._RF.push(t,"eb5e8/d0B5LOLPomUOSeI/3","AudioMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.AudioMgr=o.SoundManager=void 0;var a=e("./GameConfig"),i=e("./DataManager"),r=e("../core/util/StrUtil"),n=e("../core/util/ResUtil"),s=e("../Game"),c=function(){function e(){this.effectSoundChannel=-1,this.musicChannel=-1,this._musicLock=!0,this._effectLock=!0,this.matchList=["1","2","3","4","5","6","7","8","9","10","max"],this.Match_index=0}return Object.defineProperty(e.prototype,"curEffectId",{get:function(){return this.effectSoundChannel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"musicLock",{get:function(){return this._musicLock},set:function(e){console.log("[AudioMgr],"+e,",",this.musicChannel),this._musicLock=e,this._musicLock?this.musicChannel<0?this.playBgSound():cc.audioEngine.resume(this.musicChannel):this.musicChannel>=0&&cc.audioEngine.pause(this.musicChannel),a.default.SDK.setData({k:[this._musicLock,this._effectLock]})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"effectLock",{get:function(){return this._effectLock},set:function(e){this._effectLock=e,this._effectLock||(this.effectSoundChannel>=0&&cc.audioEngine.stop(this.effectSoundChannel),this.effectSoundChannel=-1),a.default.SDK.setData({k:[this._musicLock,this._effectLock]})},enumerable:!1,configurable:!0}),e.prototype.onPause=function(){this.clear()},e.prototype.onResume=function(){this.playBgSound()},e.prototype.playBgSound=function(){this.musicChannel},e.prototype.clickOK=function(){},e.prototype.buttonClick=function(){this.playEffect("se_btnclick")},e.prototype.clickCard=function(){s.Game.gameMgr.stage.flopThree?this.playEffect("se_drawcard3"):this.playEffect("se_drawcard1")},e.prototype.clickDealer=function(){this.playEffect("se_resetdeckcard")},e.prototype.toTarget=function(e){void 0===e&&(e=!1)},e.prototype.toTargetCommon=function(){this.playEffect("se_placewincard")},e.prototype.dealCard=function(){s.Game.gameMgr.stage.flopThree?this.playEffect("se_drawcard3"):this.playEffect("se_drawcard1")},e.prototype.moveCardEnd=function(){this.playEffect("se_placecard")},e.prototype.deal=function(){this.playEffect("se_newdeal")},e.prototype.dealEnd=function(){},e.prototype.error=function(){this.playEffect("se_errowcard")},e.prototype.unlock=function(){},e.prototype.hint=function(){this.playEffect("hint")},e.prototype.newdeal=function(){},e.prototype.undo=function(){this.playEffect("undo")},e.prototype.victory=function(){this.playEffect("g_victory")},e.prototype.victoryCrown=function(){this.playEffect("victory_crown")},e.prototype.victoryDing=function(){},e.prototype.youWin=function(){},e.prototype.newRecord=function(){},e.prototype.gold=function(){},e.prototype.clear=function(){this.effectSoundChannel>=0&&cc.audioEngine.stop(this.effectSoundChannel),this.effectSoundChannel=-1,this.musicChannel>=0&&cc.audioEngine.stop(this.musicChannel),this.musicChannel=-1},e.prototype.playSound=function(e,t){if(void 0===t&&(t=!0),this.musicLock){this.musicChannel>=0&&cc.audioEngine.stop(this.musicChannel);var o=i.default.getSoundRes(e);o&&(cc.audioEngine.setMusicVolume(.1),this.musicChannel=cc.audioEngine.playMusic(o,t),console.log("[AudioMgr],playsound",this.musicChannel))}},e.prototype.playEffect=function(e,t,o,a){if(void 0===t&&(t=!0),void 0===o&&(o=!1),void 0===a&&(a=0),this.effectLock){var r=i.default.getSoundRes(e);r&&(this.effectSoundChannel=cc.audioEngine.playEffect(r,o),a>0&&cc.audioEngine.setCurrentTime(this.effectSoundChannel,a))}},e.prototype.playSFX=function(e,t,o){void 0===t&&(t=!0),!r.default.isNullOrEmpty(e)&&this.effectLock&&(t&&(e=n.ResUtil.MakeResUrl(e,n.eResType.Audio)),cc.resources.load(e,cc.AudioClip,function(e,t){if(!e){var a=cc.audioEngine.play(t,!1,1);o&&o(a)}}))},e.instance=new e,e}();o.SoundManager=c,o.AudioMgr=c.instance,cc._RF.pop()},{"../Game":"Game","../core/util/ResUtil":"ResUtil","../core/util/StrUtil":"StrUtil","./DataManager":"DataManager","./GameConfig":"GameConfig"}],AutoCompleteWindow:[function(e,t,o){"use strict";cc._RF.push(t,"a573alYQ1VBXJn+DqXoNtrj","AutoCompleteWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("../../global/AudioMgr"),r=e("../../core/global/I18N"),n=cc._decorator,s=n.ccclass,c=n.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelAuto=null,t}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this),this.onConfirm=t,this.initLanguage()},t.prototype.initLanguage=function(){this.labelAuto.string=r.default.get("L4003")},t.prototype.onComplete=function(){this.toBack(),this.onConfirm&&this.onConfirm()},t.prototype.toBack=function(){e.prototype.toBack.call(this),i.AudioMgr.clickOK()},__decorate([c(cc.Label)],t.prototype,"labelAuto",void 0),__decorate([s],t)}(a.default);o.default=l,cc._RF.pop()},{"../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../global/AudioMgr":"AudioMgr"}],BgUnlockHelper:[function(e,t,o){"use strict";cc._RF.push(t,"441101YOnVIe7FDDg/rhn2+","BgUnlockHelper"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../core/Table/Table"),i=e("../core/Table/TableHelper"),r=e("../Game"),n=function(){function e(){}return e.getMaxUnlockBgIdx=function(){for(var e=0,t=r.Game.userData.getSuccCount(),o=i.TableHelper.GetCount(a.eTable.eTabGameBg),n=0;n<o;n++){var s=i.TableHelper.GetFieldByIndex(a.eTable.eTabGameBg,n);if(null!=s){if(!(t>=s.winNum))break;e=n}}return e},e.getMinLockBgIdx=function(){return this.getMaxUnlockBgIdx()+1},e.getNeedSuccCount=function(){var e=this.getMinLockBgIdx(),t=i.TableHelper.GetFieldByIndex(a.eTable.eTabGameBg,e),o=r.Game.userData.getSuccCount();return t.winNum-o},e.isUnlockBg=function(){var e=!1,t=r.Game.userData.getSuccCount();if(0==t)return e;var o=this.getMaxUnlockBgIdx();return t==i.TableHelper.GetFieldByIndex(a.eTable.eTabGameBg,o).winNum},e.getCurrBgIdx=function(){var e=0,t=this.getMaxUnlockBgIdx();return(e=r.Game.userData.getSuccCount()==i.TableHelper.GetFieldByIndex(a.eTable.eTabGameBg,t).winNum?t:t+1)>=i.TableHelper.GetCount(a.eTable.eTabGameBg)&&(e=i.TableHelper.GetCount(a.eTable.eTabGameBg)-1),e},e.getCurrTarget=function(){var e=this.getCurrBgIdx(),t=i.TableHelper.GetFieldByIndex(a.eTable.eTabGameBg,e);if(0==e)return t.winNum;var o=e-1,r=i.TableHelper.GetFieldByIndex(a.eTable.eTabGameBg,o);return t.winNum-r.winNum},e.getCurrProgress=function(){var e=this.getCurrBgIdx(),t=r.Game.userData.getSuccCount();if(0==e)return t;var o=e-1;return t-i.TableHelper.GetFieldByIndex(a.eTable.eTabGameBg,o).winNum},e.getUnlockCardFaceCount=function(){for(var e=0,t=i.TableHelper.GetCount(a.eTable.eTabCardFace),o=function(t){var o=i.TableHelper.GetFieldByIndex(a.eTable.eTabCardFace,t);if(!o)return"continue";0==o.adLock?e++:r.Game.userData.goldData.buyCardFace.findIndex(function(e){return e==o.id})>=0&&e++},n=0;n<t;n++)o(n);return e},e.getUnlockCardBgCount=function(){for(var e=0,t=i.TableHelper.GetCount(a.eTable.eTabCardBg),o=function(t){var o=i.TableHelper.GetFieldByIndex(a.eTable.eTabCardBg,t);if(!o)return"continue";0==o.adLock?e++:r.Game.userData.goldData.buyCard.findIndex(function(e){return e==o.id})>=0&&e++},n=0;n<t;n++)o(n);return e},e}();o.default=n,cc._RF.pop()},{"../Game":"Game","../core/Table/Table":"Table","../core/Table/TableHelper":"TableHelper"}],ByteArray:[function(e,t,o){"use strict";cc._RF.push(t,"6b9618ihhtIypK2smOIKr8L","ByteArray"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Endian"),i=e("./ErrorManager"),r=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=0),this.$endian=0,this.bufferExtSize=0,this._position=0,this.write_position=0,this.bufferExtSize=0,this.EOF_byte=-1,this.EOF_code_point=-1,t<0&&(t=0),this.bufferExtSize=t;var o,i=0;if(e){var r=void 0;e instanceof Uint8Array?(r=e,i=e.length):(i=e.byteLength,r=new Uint8Array(e)),(o=0==t?new Uint8Array(i):new Uint8Array((1+(i/t|0))*t)).set(r)}else o=new Uint8Array(t);this.write_position=i,this._position=0,this._bytes=o,this.data=new DataView(o.buffer),this.endian=a.default.BIG_ENDIAN}return Object.defineProperty(e.prototype,"endian",{get:function(){return 0==this.$endian?a.default.LITTLE_ENDIAN:a.default.BIG_ENDIAN},set:function(e){this.$endian=e==a.default.LITTLE_ENDIAN?0:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readAvailable",{get:function(){return this.write_position-this._position},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this.data.buffer.slice(0,this.write_position)},set:function(e){var t,o=e.byteLength,a=new Uint8Array(e),i=this.bufferExtSize;(t=0==i?new Uint8Array(o):new Uint8Array((1+(o/i|0))*i)).set(a),this.write_position=o,this._bytes=t,this.data=new DataView(t.buffer)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rawBuffer",{get:function(){return this.data.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytes",{get:function(){return this._bytes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataView",{get:function(){return this.data},set:function(e){this.buffer=e.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e,e>this.write_position&&(this.write_position=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.write_position},set:function(e){this.write_position=e,this.data.byteLength>e&&(this._position=e),this._validateBuffer(e)},enumerable:!1,configurable:!0}),e.prototype._validateBuffer=function(e){if(this.data.byteLength<e){var t=this.bufferExtSize,o=void 0;(o=0==t?new Uint8Array(e):new Uint8Array((1+(e/t>>0))*t)).set(this._bytes),this._bytes=o,this.data=new DataView(o.buffer)}},Object.defineProperty(e.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!1,configurable:!0}),e.prototype.clear=function(){var e=new ArrayBuffer(this.bufferExtSize);this.data=new DataView(e),this._bytes=new Uint8Array(e),this._position=0,this.write_position=0},e.prototype.readBoolean=function(){if(this.validate(1))return!!this._bytes[this.position++]},e.prototype.readByte=function(){if(this.validate(1))return this.data.getInt8(this.position++)},e.prototype.readBytes=function(e,t,o){if(void 0===t&&(t=0),void 0===o&&(o=0),e){var a=this._position,r=this.write_position-a;if(r<0)i.default.error(1025);else{if(0==o)o=r;else if(o>r)return void i.default.error(1025);var n=e._position;e._position=0,e.validateBuffer(t+o),e._position=n,e._bytes.set(this._bytes.subarray(a,a+o),t),this.position+=o}}},e.prototype.readDouble=function(){if(this.validate(8)){var e=this.data.getFloat64(this._position,0==this.$endian);return this.position+=8,e}},e.prototype.readFloat=function(){if(this.validate(4)){var e=this.data.getFloat32(this._position,0==this.$endian);return this.position+=4,e}},e.prototype.readInt=function(){if(this.validate(4)){var e=this.data.getInt32(this._position,0==this.$endian);return this.position+=4,e}},e.prototype.readShort=function(){if(this.validate(2)){var e=this.data.getInt16(this._position,0==this.$endian);return this.position+=2,e}},e.prototype.readUnsignedByte=function(){if(this.validate(1))return this._bytes[this.position++]},e.prototype.readUnsignedInt=function(){if(this.validate(4)){var e=this.data.getUint32(this._position,0==this.$endian);return this.position+=4,e}},e.prototype.readUnsignedShort=function(){if(this.validate(2)){var e=this.data.getUint16(this._position,0==this.$endian);return this.position+=2,e}},e.prototype.readUTF=function(){var e=this.readUnsignedShort();return e>0?this.readUTFBytes(e):""},e.prototype.readUTFBytes=function(e){if(this.validate(e)){var t=this.data,o=new Uint8Array(t.buffer,t.byteOffset+this._position,e);return this.position+=e,this.decodeUTF8(o)}},e.prototype.writeBoolean=function(e){this.validateBuffer(1),this._bytes[this.position++]=+e},e.prototype.writeByte=function(e){this.validateBuffer(1),this._bytes[this.position++]=255&e},e.prototype.writeBytes=function(e,t,o){var a;void 0===t&&(t=0),void 0===o&&(o=0),t<0||o<0||(a=0==o?e.length-t:Math.min(e.length-t,o))>0&&(this.validateBuffer(a),this._bytes.set(e._bytes.subarray(t,t+a),this._position),this.position=this._position+a)},e.prototype.writeDouble=function(e){this.validateBuffer(8),this.data.setFloat64(this._position,e,0==this.$endian),this.position+=8},e.prototype.writeFloat=function(e){this.validateBuffer(4),this.data.setFloat32(this._position,e,0==this.$endian),this.position+=4},e.prototype.writeInt=function(e){this.validateBuffer(4),this.data.setInt32(this._position,e,0==this.$endian),this.position+=4},e.prototype.writeShort=function(e){this.validateBuffer(2),this.data.setInt16(this._position,e,0==this.$endian),this.position+=2},e.prototype.writeUnsignedInt=function(e){this.validateBuffer(4),this.data.setUint32(this._position,e,0==this.$endian),this.position+=4},e.prototype.writeUnsignedShort=function(e){this.validateBuffer(2),this.data.setUint16(this._position,e,0==this.$endian),this.position+=2},e.prototype.writeUTF=function(e){var t=this.encodeUTF8(e),o=t.length;this.validateBuffer(2+o),this.data.setUint16(this._position,o,0==this.$endian),this.position+=2,this._writeUint8Array(t,!1)},e.prototype.writeUTFBytes=function(e){this._writeUint8Array(this.encodeUTF8(e))},e.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},e.prototype._writeUint8Array=function(e,t){void 0===t&&(t=!0);var o=this._position,a=o+e.length;t&&this.validateBuffer(a),this.bytes.set(e,o),this.position=a},e.prototype.validate=function(e){var t=this._bytes.length;if(t>0&&this._position+e<=t)return!0;i.default.error(1025)},e.prototype.validateBuffer=function(e){this.write_position=e>this.write_position?e:this.write_position,e+=this._position,this._validateBuffer(e)},e.prototype.encodeUTF8=function(e){for(var t=0,o=this.stringToCodePoints(e),a=[];o.length>t;){var i=o[t++];if(this.inRange(i,55296,57343))this.encoderError(i);else if(this.inRange(i,0,127))a.push(i);else{var r=void 0,n=void 0;for(this.inRange(i,128,2047)?(r=1,n=192):this.inRange(i,2048,65535)?(r=2,n=224):this.inRange(i,65536,1114111)&&(r=3,n=240),a.push(this.div(i,Math.pow(64,r))+n);r>0;){var s=this.div(i,Math.pow(64,r-1));a.push(128+s%64),r-=1}}}return new Uint8Array(a)},e.prototype.decodeUTF8=function(e){for(var t,o=0,a="",i=0,r=0,n=0,s=0;e.length>o;){var c=e[o++];if(c==this.EOF_byte)t=0!=r?this.decoderError(!1):this.EOF_code_point;else if(0==r)this.inRange(c,0,127)?t=c:(this.inRange(c,194,223)?(r=1,s=128,i=c-192):this.inRange(c,224,239)?(r=2,s=2048,i=c-224):this.inRange(c,240,244)?(r=3,s=65536,i=c-240):this.decoderError(!1),i*=Math.pow(64,r),t=null);else if(this.inRange(c,128,191))if(n+=1,i+=(c-128)*Math.pow(64,r-n),n!==r)t=null;else{var l=i,u=s;i=0,r=0,n=0,s=0,t=this.inRange(l,u,1114111)&&!this.inRange(l,55296,57343)?l:this.decoderError(!1,c)}else i=0,r=0,n=0,s=0,o--,t=this.decoderError(!1,c);null!==t&&t!==this.EOF_code_point&&(t<=65535?t>0&&(a+=String.fromCharCode(t)):(t-=65536,a+=String.fromCharCode(55296+(t>>10&1023)),a+=String.fromCharCode(56320+(1023&t))))}return a},e.prototype.encoderError=function(e){i.default.error(1026,e)},e.prototype.decoderError=function(e,t){return e&&i.default.error(1027),t||65533},e.prototype.inRange=function(e,t,o){return t<=e&&e<=o},e.prototype.div=function(e,t){return Math.floor(e/t)},e.prototype.stringToCodePoints=function(e){for(var t=[],o=0,a=e.length;o<e.length;){var i=e.charCodeAt(o);if(this.inRange(i,55296,57343))if(this.inRange(i,56320,57343))t.push(65533);else if(o==a-1)t.push(65533);else{var r=e.charCodeAt(o+1);if(this.inRange(r,56320,57343)){var n=1023&i,s=1023&r;o+=1,t.push(65536+(n<<10)+s)}else t.push(65533)}else t.push(i);o+=1}return t},e}();o.default=r,cc._RF.pop()},{"./Endian":"Endian","./ErrorManager":"ErrorManager"}],CardBGItem:[function(e,t,o){"use strict";cc._RF.push(t,"7d70eQUj21LfIDCixw81Kr+","CardBGItem"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,r=a.property,n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.lockNode=null,t.border=null,t._seletced=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"goodsId",{get:function(){return this._data.goodsId},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.border.active=!1},t.prototype.setData=function(e,t){void 0===t&&(t=null),this._data=e,this._parentNode=t,this.icon.spriteFrame=e.icon,this.lockNode.active=e.lock},t.prototype.unlock=function(){this.lockNode.active=!1,this._data.lock=!1},t.prototype.itemClick=function(){(this._parentNode||this.node.parent).emit("itemClick",this._data,this)},Object.defineProperty(t.prototype,"seletced",{get:function(){return this._seletced},set:function(e){this._seletced!=e&&(this._seletced=e,this.border.active=e)},enumerable:!1,configurable:!0}),__decorate([r(cc.Sprite)],t.prototype,"icon",void 0),__decorate([r(cc.Node)],t.prototype,"lockNode",void 0),__decorate([r(cc.Node)],t.prototype,"border",void 0),__decorate([i],t)}(cc.Component);o.default=n,cc._RF.pop()},{}],CardBGWindow:[function(e,t,o){"use strict";cc._RF.push(t,"995253pyQlOlaIQ9sbB7c30","CardBGWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../global/DataManager"),i=e("./content/CardFaceItem"),r=e("../../core/global/Emitter"),n=e("../../global/AudioMgr"),s=e("../../core/global/I18N"),c=e("../../Game"),l=e("../../core/UI/WWindow"),u=e("../../sdk/LogEvent"),d=e("../../core/Table/TableHelper"),p=e("../../core/Table/Table"),h=e("../../global/Const"),f=e("../../core/UI/DialogBox"),g=e("../../sdk/SDKConst"),m=e("../../data/BgUnlockHelper"),y=cc._decorator,v=y.ccclass,b=y.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.itemPre=null,t.changeCardBgLabel=null,t.scrollView=null,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.initData(),this.content.on("itemClick",this.itemClickHandler,this),r.Emitter.register(h.default.eLanguageChange,this.initLanguage,this),this.initLanguage()},t.prototype.initLanguage=function(){this.changeCardBgLabel.string=s.default.get("L216")},t.prototype.show=function(){var t;e.prototype.show.call(this),null===(t=this.scrollView)||void 0===t||t.scrollToTop()},t.prototype.onShow=function(){e.prototype.onShow.call(this)},t.prototype.initData=function(){for(var e,t,o,r=d.TableHelper.GetCount(p.eTable.eTabCardBg),n=function(r){var n=d.TableHelper.GetFieldByIndex(p.eTable.eTabCardBg,r),l=c.Game.userData.goldData.buyCard.findIndex(function(e){return e==n.id})>=0;t={goodsId:n.id,icon:a.default.cardBG_RES.getSpriteFrame(n.res),lock:n.adLock>0&&!l,cost:n.adLock,key:0==r?"default":n.res},o=cc.instantiate(s.itemPre),s.content.addChild(o),(e=o.getComponent(i.default)).setData(t),c.Game.userData.cardBG==t.key&&(e.seletced=!0,s.selectedItem=e)},s=this,l=0;l<r;l++)n(l)},t.prototype.itemClickHandler=function(e,t){var o=this;this.selectedItem!=t&&(e.lock?this.watchAdDialog(function(){var a=c.Game.userData.goldData;a.buyCard.push(e.goodsId),c.Game.userData.goldData=a,t.unlock(),o.onChanged(e,t)}):this.onChanged(e,t))},t.prototype.watchAdDialog=function(e){var t=this,o=new f.DialogBoxData;o.initWith(f.eDialogButtonType.CONFIRM|f.eDialogButtonType.CANCEL,s.default.get("L4017"),"",s.default.get("L2"),s.default.get("L387")),o.callback=function(o){o==f.eDialogButtonType.CANCEL&&c.Game.sdkPipeline.showReward(function(t){t&&(e(),u.default.log(u.default.dot_ad_reward,{position:g.default.AD_PLAY_POS_CARD_BG}))},t,g.default.AD_PLAY_POS_CARD_BG)},f.default.showWith(o)},t.prototype.onChanged=function(e,t){this.selectedItem&&(this.selectedItem.seletced=!1),this.selectedItem=t,this.selectedItem.seletced=!0,r.Emitter.fire(h.default.eChangeCardBG,e.icon),c.Game.userData.cardBG=e.key;var o=m.default.getUnlockCardBgCount();u.default.log(u.default.dot_card_change,{unlocknum:o,card_id:c.Game.userData.cardBG})},t.prototype.close=function(){n.AudioMgr.clickOK(),this.toBack()},__decorate([b(cc.Node)],t.prototype,"content",void 0),__decorate([b(cc.Prefab)],t.prototype,"itemPre",void 0),__decorate([b(cc.Label)],t.prototype,"changeCardBgLabel",void 0),__decorate([b(cc.ScrollView)],t.prototype,"scrollView",void 0),__decorate([v],t)}(l.default);o.default=C,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/DialogBox":"DialogBox","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../data/BgUnlockHelper":"BgUnlockHelper","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../../global/DataManager":"DataManager","../../sdk/LogEvent":"LogEvent","../../sdk/SDKConst":"SDKConst","./content/CardFaceItem":"CardFaceItem"}],CardData:[function(e,t,o){"use strict";cc._RF.push(t,"8efb9okpfBDWb+1KEndxqz4","CardData"),Object.defineProperty(o,"__esModule",{value:!0}),o.CardData=o.MoveType=void 0;var a=e("./CardDefine");(function(e){e[e.Init=0]="Init",e[e.Normal=1]="Normal",e[e.RestDeal=2]="RestDeal",e[e.Auto=3]="Auto",e[e.Undo=4]="Undo",e[e.Shuffle=5]="Shuffle"})(o.MoveType||(o.MoveType={}));var i=function(){function e(e,t,o){void 0===o&&(o=!1),this.type=e,this.value=t,this.isOpen=o}return e.prototype.getData=function(){return[this.type,this.value,this.isOpen]},e.prototype.isA=function(){return 1==this.value},e.prototype.isK=function(){return 13==this.value},e.prototype.isNextCard=function(e){return e.type==this.type&&e.value==this.value+1},e.prototype.checkLink=function(e){return e.value+1==this.value&&(e.type+this.type)%2>0},e.prototype.getSoleNumber=function(){return(this.type-1)*a.default.EachSuitCount+this.value},e.prototype.toString=function(){return"["+this.type+","+this.value+this.isOpen+"]"},e}();o.CardData=i,cc._RF.pop()},{"./CardDefine":"CardDefine"}],CardDefine:[function(e,t,o){"use strict";cc._RF.push(t,"5d263pJrOxNgZXN7yrhLT5B","CardDefine"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}var t;return t=e,e.getCardValue=function(e){var t=e%this.EachSuitCount;return 0==t?this.EachSuitCount:t},e.getCardType=function(e){return Math.ceil(e/this.EachSuitCount)},e.key2Data=function(e){for(var o=[],a=0,i=e.split("");a<i.length;a++){var r=i[a];o.push(t.keyMap[r])}return o},e.key2Number=function(e){for(var o=[],a=0,i=e.split("");a<i.length;a++){var r=i[a];o.push(t.numMap[r])}return o},e.data2Key=function(e){for(var o="",a=0,i=e;a<i.length;a++){var r=i[a];o+=t.valueMap[r[0]+"#"+r[1]]}return o},e.cardData2Key=function(e){return e.type+"#"+e.value},e.cardArr2Key=function(e){return e[0]+"#"+e[1]},e.cardTypeValue2Key=function(e,t){return e+"#"+t},e.randomLevel=function(){for(var e,t=[],o=1;o<5;o++)for(var a=1;a<14;a++)t.push([o,a]);for(var i=[];t.length>0;)e=Math.floor(Math.random()*t.length),i.push(t[e]),t.splice(e,1);return i},e.getCardDataAt=function(e,t){for(var o=52*t;e.length<o+52;)o-=52;return e.position=o,e.readUTFBytes(52)},e.SuitCount=4,e.EachSuitCount=13,e.GameRowCount=7,e.keyMap={a:[1,1],b:[1,2],c:[1,3],d:[1,4],e:[1,5],f:[1,6],g:[1,7],h:[1,8],i:[1,9],j:[1,10],k:[1,11],l:[1,12],m:[1,13],n:[2,1],o:[2,2],p:[2,3],q:[2,4],r:[2,5],s:[2,6],t:[2,7],u:[2,8],v:[2,9],w:[2,10],x:[2,11],y:[2,12],z:[2,13],A:[3,1],B:[3,2],C:[3,3],D:[3,4],E:[3,5],F:[3,6],G:[3,7],H:[3,8],I:[3,9],J:[3,10],K:[3,11],L:[3,12],M:[3,13],N:[4,1],O:[4,2],P:[4,3],Q:[4,4],R:[4,5],S:[4,6],T:[4,7],U:[4,8],V:[4,9],W:[4,10],X:[4,11],Y:[4,12],Z:[4,13]},e.numMap={a:1,b:2,c:3,d:4,e:5,f:6,g:7,h:8,i:9,j:10,k:11,l:12,m:13,n:14,o:15,p:16,q:17,r:18,s:19,t:20,u:21,v:22,w:23,x:24,y:25,z:26,A:27,B:28,C:29,D:30,E:31,F:32,G:33,H:34,I:35,J:36,K:37,L:38,M:39,N:40,O:41,P:42,Q:43,R:44,S:45,T:46,U:47,V:48,W:49,X:50,Y:51,Z:52},e.valueMap={"1#1":"a","1#2":"b","1#3":"c","1#4":"d","1#5":"e","1#6":"f","1#7":"g","1#8":"h","1#9":"i","1#10":"j","1#11":"k","1#12":"l","1#13":"m","2#1":"n","2#2":"o","2#3":"p","2#4":"q","2#5":"r","2#6":"s","2#7":"t","2#8":"u","2#9":"v","2#10":"w","2#11":"x","2#12":"y","2#13":"z","3#1":"A","3#2":"B","3#3":"C","3#4":"D","3#5":"E","3#6":"F","3#7":"G","3#8":"H","3#9":"I","3#10":"J","3#11":"K","3#12":"L","3#13":"M","4#1":"N","4#2":"O","4#3":"P","4#4":"Q","4#5":"R","4#6":"S","4#7":"T","4#8":"U","4#9":"V","4#10":"W","4#11":"X","4#12":"Y","4#13":"Z"},e.defaultLevel=["Z","M","z","m","Y","L","y","l","X","K","x","k","W","J","w","j","V","I","v","i","U","H","u","h","B","d","o","r","P","b","s","e","C","N","g","f","Q","p","A","G","S","R","D","c","n","T","t","F","E","q","O","a"],t=__decorate([i],e)}());o.default=r,cc._RF.pop()},{}],CardFaceItem:[function(e,t,o){"use strict";cc._RF.push(t,"5af595IPQhONbGOljBB0alp","CardFaceItem"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,r=a.property,n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.lockNode=null,t.border=null,t._seletced=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"goodsId",{get:function(){return this._data.goodsId},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.border.active=!1},t.prototype.setData=function(e,t){void 0===t&&(t=null),this._data=e,this._parentNode=t,this.icon.spriteFrame=e.icon,this.lockNode.active=e.lock,e.lock?this.icon.node.color=new cc.Color(102,102,102):this.icon.node.color=cc.Color.WHITE},t.prototype.unlock=function(){this.lockNode.active=!1,this._data.lock=!1,this.icon.node.color=cc.Color.WHITE},t.prototype.itemClick=function(){(this._parentNode||this.node.parent).emit("itemClick",this._data,this)},Object.defineProperty(t.prototype,"seletced",{get:function(){return this._seletced},set:function(e){this._seletced!=e&&(this._seletced=e,this.border.active=e)},enumerable:!1,configurable:!0}),__decorate([r(cc.Sprite)],t.prototype,"icon",void 0),__decorate([r(cc.Node)],t.prototype,"lockNode",void 0),__decorate([r(cc.Node)],t.prototype,"border",void 0),__decorate([i],t)}(cc.Component);o.default=n,cc._RF.pop()},{}],CardFaceWindow:[function(e,t,o){"use strict";cc._RF.push(t,"f2a89xFCNhJSL1C4X2JFrdr","CardFaceWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../global/DataManager"),i=e("../../core/global/Emitter"),r=e("../../global/AudioMgr"),n=e("../../core/global/I18N"),s=e("../../Game"),c=e("../../core/UI/WWindow"),l=e("../../sdk/LogEvent"),u=e("../../core/Table/TableHelper"),d=e("../../core/Table/Table"),p=e("../../global/Const"),h=e("./content/CardFaceItem"),f=e("../../core/util/ResUtil"),g=e("../../data/BgUnlockHelper"),m=cc._decorator,y=m.ccclass,v=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.itemPre=null,t.changeCardBgLabel=null,t.scrollView=null,t.cardFrames=[],t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.initData(),this.content.on("itemClick",this.itemClickHandler,this),i.Emitter.register(p.default.eLanguageChange,this.initLanguage,this),this.initLanguage()},t.prototype.initLanguage=function(){this.changeCardBgLabel.string=n.default.get("L4023")},t.prototype.show=function(){var t;e.prototype.show.call(this),null===(t=this.scrollView)||void 0===t||t.scrollToTop()},t.prototype.onShow=function(){e.prototype.onShow.call(this)},t.prototype.initData=function(){for(var e,t,o,a=u.TableHelper.GetCount(d.eTable.eTabCardFace),i=0;i<a;i++){var r=u.TableHelper.GetFieldByIndex(d.eTable.eTabCardFace,i);t={goodsId:r.id,icon:this.getCardIcon(i),lock:!1,cost:r.adLock,key:0==i?"default":r.res},o=cc.instantiate(this.itemPre),this.content.addChild(o),(e=o.getComponent(h.default)).setData(t),s.Game.userData.cardFace==t.key&&(e.seletced=!0,this.selectedItem=e)}},t.prototype.getCardIcon=function(e){return this.cardFrames[e]},t.prototype.itemClickHandler=function(e,t){this.selectedItem!=t&&this.onChanged(e,t)},t.prototype.onChanged=function(e,t){this.selectedItem&&(this.selectedItem.seletced=!1),this.selectedItem=t,this.selectedItem.seletced=!0,s.Game.userData.cardFace=e.key,this.loadCardBase();var o=g.default.getUnlockCardFaceCount();l.default.log(l.default.dot_cardface_change,{unlocknum:o,face_id:s.Game.userData.cardFace})},t.prototype.close=function(){r.AudioMgr.clickOK(),this.toBack()},t.prototype.loadCardBase=function(){var e=s.Game.userData.cardFace;"default"==e&&(e="cardBase1"),f.ResUtil.loadRes(e,f.eResType.Atlas,function(e){a.default.cardBaseRES=e,i.Emitter.fire(p.default.eChangeCardFace)})},__decorate([v(cc.Node)],t.prototype,"content",void 0),__decorate([v(cc.Prefab)],t.prototype,"itemPre",void 0),__decorate([v(cc.Label)],t.prototype,"changeCardBgLabel",void 0),__decorate([v(cc.ScrollView)],t.prototype,"scrollView",void 0),__decorate([v(cc.SpriteFrame)],t.prototype,"cardFrames",void 0),__decorate([y],t)}(c.default);o.default=b,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/util/ResUtil":"ResUtil","../../data/BgUnlockHelper":"BgUnlockHelper","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../../global/DataManager":"DataManager","../../sdk/LogEvent":"LogEvent","./content/CardFaceItem":"CardFaceItem"}],CardLibData:[function(e,t,o){"use strict";cc._RF.push(t,"dbacfnU+8xLGoVba+RyN7Np","CardLibData"),Object.defineProperty(o,"__esModule",{value:!0}),o.LibConfig=o.CardLibData=void 0;var a=e("../core/global/PEDictionary"),i=e("../core/Table/Table"),r=e("../core/Table/TableHelper"),n=e("../core/util/MathUtil"),s=e("../sdk/LogEvent"),c=function(){function e(){e.reset(this)}return e.reset=function(e){e.isGrading=!0,e.gradeIndex=1,e.curGrade=-1,e.curScore=0,e.curP5Count=-1,e.p5SuccCount=-1,e.winningStreakCount=0,e.losingStreakCount=0,e.lucking=!1,e.startP5Count=0},e.balanceGrading=function(e,t){e.gradeIndex++,t&&(e.curScore+=1),e.gradeIndex>l.diffDef.count&&this.startP5(e,!0)},e.startP5=function(e,t){if(void 0===t&&(t=!1),e.isGrading=!1,t)s.default.log(s.default.dot_game_grading,{level:e.curGrade,fraction:e.curScore}),e.curGrade=l.getGrade(e.curScore),e.curScore=l.initScoreDef.tryGetValue(e.curGrade);else{var o=e.curScore,a=e.curGrade,i=l.calcScore(e.curGrade,e.p5SuccCount,e.curScore),r=l.calcGrade(i,e.curGrade);e.curGrade=r.grade,r.changed?e.curScore=l.initScoreDef.tryGetValue(e.curGrade):e.curScore=i,s.default.log(s.default.dot_game_P5,{score_1:o,score_2:e.curScore,level_1:a,level_2:e.curGrade,settlement_number:e.p5SuccCount})}e.curP5Count=0,e.p5SuccCount=0,e.startP5Count++},e.startLuck=function(e){e.lucking=!0},e.completeLuck=function(e){e.winningStreakCount=0,e.losingStreakCount=0,e.lucking=!1},e}();o.CardLibData=c;var l=function(){function e(){}return e.init=function(){for(var t,o=r.TableHelper.GetCount(i.eTable.eTabLibConfig),a=0;a<o;a++)t=r.TableHelper.GetFieldByIndex(i.eTable.eTabLibConfig,a),this.isKey(t.key,e.DiffKey)?this.diffDef.add(this.subToInt(t.key,e.DiffKey),t.intValue):this.isKey(t.key,e.GradeKey)?this.gradeDef.add(this.subToInt(t.key,e.GradeKey),t.intValue):this.isKey(t.key,e.Grade2DiffKey)?this.grade2DiffDef.add(this.subToInt(t.key,e.Grade2DiffKey),this.splitToIntArr(t.strValue)):this.isKey(t.key,e.InitScoreKey)?this.initScoreDef.add(this.subToInt(t.key,e.InitScoreKey),t.intValue):this.isKey(t.key,e.AddScoreKey)?this.addScoreDef.add(this.subToInt(t.key,e.AddScoreKey),t.intValue):this.isKey(t.key,e.GradeChangeKey)?this.gradeChangeDef.add(this.subToInt(t.key,e.GradeChangeKey),this.splitToIntArr(t.strValue)):"g1"==t.key?this.losingStreakCount=t.intValue:"g2"==t.key?this.winningStreakCount=t.intValue:"h1"==t.key?this.losingStreakDiff=t.intValue:"h1"==t.key?this.winningStreakDiff=t.intValue:"k1"==t.key?this.resetGradeDef=t.intValue:this.isKey(t.key,e.DaliyDayKey)?this.daliyDayDef.add(this.subToInt(t.key,e.DaliyDayKey),this.splitToIntArr(t.strValue)):this.isKey(t.key,e.DaliyMonthKey)&&this.daliyMonthDef.add(this.subToInt(t.key,e.DaliyMonthKey),this.splitToIntArr(t.strValue));console.log("libConfig init ok!")},e.isKey=function(e,t){return e.trim().startsWith(t)},e.subToInt=function(e,t){return parseInt(e.trim().substring(t.length))},e.splitToIntArr=function(e){var t=e.split("#"),o=[];return t.forEach(function(e){o.push(parseInt(e))}),o},e.randomDiffLib=function(e){var t=r.TableHelper.GetField(i.eTable.eTabDifficulty,e);if(t){var o=n.default.randomRangeInt(t.start,t.end+1);return this.id2Lib(o)}return console.error("randomDiffLib err. diff="+e),this.id2Lib(0)},e.id2Lib=function(e,t){return void 0===t&&(t=!1),t?e<1||e>this.maxLib3Count?{lab:8,index:0,id:0}:{lab:8,index:e,id:e}:e<1||e>this.maxLibCount?{lab:0,index:0,id:0}:{lab:Math.floor(e/this.libCount),index:e%this.libCount,id:e}},e.getGrade=function(e){for(var t=this.gradeDef.count,o=0;o<t;o++){var a=this.gradeDef.tryGetValue(this.gradeDef.keys[o]);if(a>0&&e<=a)return this.gradeDef.keys[o]}return 1},e.getGradeScore=function(e){return this.gradeDef.tryGetValue(e)},e.calcScore=function(e,t,o){var a=10*e+t+1;return o+this.addScoreDef.tryGetValue(a)},e.calcGrade=function(e,t){var o=t,a=!1,i=this.gradeChangeDef.tryGetValue(t);return i&&(i[0]>=0&&e<=i[0]?(o=t-1,a=!0):i[1]>=0&&e>=i[1]&&(o=t+1,a=!0)),{grade:o=n.default.clamp(o,1,this.gradeDef.count),changed:a}},e.getP5Diff=function(e,t){var o=this.grade2DiffDef.tryGetValue(e);return!o||o.count<=t?this.minDiff:o[t]},e.DiffKey="a",e.GradeKey="b",e.Grade2DiffKey="c",e.InitScoreKey="d",e.AddScoreKey="e",e.GradeChangeKey="f",e.DaliyDayKey="i",e.DaliyMonthKey="j",e.diffDef=new a.PEDictionary,e.gradeDef=new a.PEDictionary,e.grade2DiffDef=new a.PEDictionary,e.initScoreDef=new a.PEDictionary,e.addScoreDef=new a.PEDictionary,e.gradeChangeDef=new a.PEDictionary,e.losingStreakCount=5,e.winningStreakCount=3,e.losingStreakDiff=3,e.winningStreakDiff=9,e.resetGradeDef=30,e.daliyDayDef=new a.PEDictionary,e.daliyMonthDef=new a.PEDictionary,e.daliyStartYear=2022,e.balanceCount=5,e.minDiff=2,e.maxDiff=10,e.libCount=5e4,e.maxLibCount=173504,e.maxLib3Count=55262,e}();o.LibConfig=l,cc._RF.pop()},{"../core/Table/Table":"Table","../core/Table/TableHelper":"TableHelper","../core/global/PEDictionary":"PEDictionary","../core/util/MathUtil":"MathUtil","../sdk/LogEvent":"LogEvent"}],CardLibTest:[function(e,t,o){"use strict";cc._RF.push(t,"197b19MJp9MaJ/vTsi9yZWv","CardLibTest"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../core/global/Emitter"),i=e("../core/util/MathUtil"),r=e("../data/CardData"),n=e("../data/CardLibData"),s=e("../Game"),c=e("../game/GameMgr"),l=e("../global/Const"),u=e("../global/GameConfig"),d=e("../view/UICenter"),p=cc._decorator,h=p.ccclass,f=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.grade=null,t.debugView=null,t.cardlibDebugNode=null,t.gradeDebugNode=null,t}var o;return __extends(t,e),o=t,t.cardLibDataToString=function(e){return"\u662f\u5426\u5b9a\u7ea7:"+e.isGrading+"\n\u5b9a\u7ea7\u573a\u6b21:"+e.gradeIndex+"\n\u96be\u5ea6\u7ea7\u522b:"+e.curGrade+"\n\u5f53\u524d\u5f97\u5206:"+e.curScore+"\n\u5f53\u524dP5\u573a\u6b21:"+(e.curP5Count+1)+"\n\u5f53\u524dP5\u80dc\u573a\u6b21:"+e.p5SuccCount+"\n\u8fde\u80dc\u573a\u6b21:"+e.winningStreakCount+"\n\u8fde\u8d25\u573a\u6b21:"+e.losingStreakCount+"\n\u662f\u5426\u5e78\u8fd0\u5c40:"+e.lucking+"\n"},t.dbToString=function(e,t){return"\u6b64\u5173\u96be\u5ea6:"+t+"\n\u603bID:"+e.id+"\n\u5e93\u7d22\u5f15:"+e.lab+"\nID:"+e.index+"\ncardIds:"+s.Game.cardLib.GetCurCardsID()},t.prototype.onLoad=function(){var e=this;a.Emitter.register(l.default.eOnGameReady,function(){e.toStageView("testNode",o.cardLibDataToString(s.Game.userData.cardLibData))},this),a.Emitter.register(l.default.eOnStartGame,function(){e.toStageView("testNode",o.cardLibDataToString(s.Game.userData.cardLibData))},this),a.Emitter.register("onGetCardByDiff",function(t,a){e.toStageView("testNode2",o.dbToString(t,a))},this)},t.prototype.showDebugView=function(){this.debugView.active=!this.debugView.active,this.cardlibDebugNode.active=!this.cardlibDebugNode.active,this.gradeDebugNode.active=!this.gradeDebugNode.active},t.prototype.skipGrading=function(){var e=s.Game.userData.cardLibData,t=parseInt(this.grade.string);t||(t=1),t=i.default.clamp(t,1,4),e.curScore=n.LibConfig.getGradeScore(t),e.isGrading=!1,n.CardLibData.startP5(e),e.curGrade=t,s.Game.userData.saveCardLibData()},t.prototype.toStageView=function(e,t){this.node.getChildByName(e).getComponent(cc.Label).string=t},t.prototype.quickComplete=function(){for(var e=this,t=s.Game.gameMgr.stage,o=[],a=0,i=t.gameSlots;a<i.length;a++){var n=i[a];o.push.apply(o,n.cards)}if(o.push.apply(o,t.flopSlot.cards),o.push.apply(o,t.dealerSlot.cards),0==o.length)return null;o.sort(function(e,t){return e.cardData.value-t.cardData.value});for(var c=null,l=null,d=0,p=o;d<p.length;d++){var h=p[d];if(c=this.findTargetSlotBy(t.targetSlots,h)){l=h;break}}if(!c)return null;var f=this.getDestSlot(l);if(!f)return null;for(var g=this.getDragCards(l),m=0,y=g;m<y.length;m++){var v=y[m];f.removeCard(v)}l.flopOpen(),t.moveToSlot({moveType:r.MoveType.Normal,duration:u.default.AutoMoveTime,callback:function(){return e.quickComplete()}},f,c,l),g.shift(),t.moveToSlot.apply(t,__spreadArrays([{moveType:r.MoveType.Normal,duration:u.default.AutoMoveTime},f,f],g))},t.prototype.findTargetSlotBy=function(e,t){for(var o=null,a={ignoreNext:!0},i=0,r=e;i<r.length;i++){var n=r[i];if(n.canMoveInto(t,a)){o=n;break}}return o},t.prototype.getDestSlot=function(e){for(var t=s.Game.gameMgr.stage,o=0,a=t.gameSlots;o<a.length;o++){var i=a[o];if(i.cards.indexOf(e)>=0)return i}return t.flopSlot.cards.indexOf(e)>=0?t.flopSlot:t.dealerSlot.cards.indexOf(e)>=0?t.dealerSlot:null},t.prototype.getDragCards=function(e){for(var t=[];e;)t.push(e),e=e.next;return t},t.prototype.startByDiff=function(e,t){var o=parseInt(t);s.Game.cardLib.SetCurCardsID(s.Game.cardLib.getCardByDiff(o)),s.Game.gameMgr.mcurGameId=s.Game.cardLib.GetCurCardsID(),s.Game.gameMgr.restartGame()},t.prototype.startP5Grade=function(e,t){var o=parseInt(t),a=s.Game.userData.cardLibData;a.isGrading&&(a.curScore=n.LibConfig.getGradeScore(o),a.isGrading=!1,n.CardLibData.startP5(a)),a.lucking&&(a.lucking=!1),a.curGrade=o;var r=n.LibConfig.grade2DiffDef.tryGetValue(o).length;a.curP5Count=i.default.randomRange(0,r),s.Game.userData.saveCardLibData(),s.Game.gameMgr.startGame(c.GameType.Normal)},t.prototype.celebrateEffectClick=function(){d.UICenter.openCelebrateEffect()},__decorate([f(cc.EditBox)],t.prototype,"grade",void 0),__decorate([f(cc.Node)],t.prototype,"debugView",void 0),__decorate([f(cc.Node)],t.prototype,"cardlibDebugNode",void 0),__decorate([f(cc.Node)],t.prototype,"gradeDebugNode",void 0),o=__decorate([h],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../Game":"Game","../core/global/Emitter":"Emitter","../core/util/MathUtil":"MathUtil","../data/CardData":"CardData","../data/CardLibData":"CardLibData","../game/GameMgr":"GameMgr","../global/Const":"Const","../global/GameConfig":"GameConfig","../view/UICenter":"UICenter"}],CardLibrary:[function(e,t,o){"use strict";cc._RF.push(t,"ea4eepXcttG/pIEWMvDUJuj","CardLibrary"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../data/CardDefine"),i=e("../Game"),r=e("../data/CardLibData"),n=e("../core/util/MathUtil"),s=e("../core/global/Emitter"),c=function(){function e(){this.curCards="",this.mCurId=0,this.cardsDB=[]}return Object.defineProperty(e.prototype,"id",{get:function(){return this.mCurId},set:function(e){this.mCurId=e},enumerable:!1,configurable:!0}),e.prototype.getLiveCards=function(){if(i.Game.userData.flopThree)this.curCards=this.randomFlop3();else{var e=i.Game.userData.cardLibData;if(e.isGrading){var t=r.LibConfig.diffDef.tryGetValue(e.gradeIndex),o=r.LibConfig.id2Lib(t);this.curCards=this.getCard(o),s.Emitter.fire("onGetCardByDiff",o,0)}else if(e.lucking)e.winningStreakCount>0?this.curCards=this.getCardByDiff(r.LibConfig.winningStreakDiff):this.curCards=this.getCardByDiff(r.LibConfig.losingStreakDiff);else{var a=r.LibConfig.getP5Diff(e.curGrade,e.curP5Count);this.curCards=this.getCardByDiff(a)}}},e.prototype.gameSucc=function(){var e=i.Game.userData.cardLibData;e.isGrading?r.CardLibData.balanceGrading(e,!0):e.lucking?r.CardLibData.completeLuck(e):(e.curP5Count++,e.p5SuccCount++,e.winningStreakCount++,e.losingStreakCount=0,e.curP5Count>=r.LibConfig.balanceCount&&r.CardLibData.startP5(e),e.winningStreakCount>=r.LibConfig.winningStreakCount&&r.CardLibData.startLuck(e)),i.Game.userData.saveCardLibData()},e.prototype.gameFail=function(){var e=i.Game.userData.cardLibData;e.isGrading?r.CardLibData.balanceGrading(e,!1):e.lucking?r.CardLibData.completeLuck(e):(e.curP5Count++,e.winningStreakCount=0,e.losingStreakCount++,e.curP5Count>=r.LibConfig.balanceCount&&r.CardLibData.startP5(e),e.losingStreakCount>=r.LibConfig.losingStreakCount&&r.CardLibData.startLuck(e)),i.Game.userData.saveCardLibData()},e.prototype.GetRandom=function(){for(var e=[],t=1;t<5;t++)for(var o=1;o<14;o++)e.push([t,o]);for(var i,r=[];e.length>0;)i=Math.floor(Math.random()*e.length),r.push(e[i]),e.splice(i,1);return this.curCards=a.default.data2Key(r),r},e.prototype.getDefaultCard=function(){return this.curCards=a.default.defaultLevel.join(""),this.curCards},e.prototype.getTestCard=function(){for(var e=[],t=0,o="20,31,49,1,44,37,45,51,23,39,25,4,6,40,13,46,48,27,41,36,28,21,8,26,3,33,9,19,10,18,17,14,15,30,43,42,12,7,5,22,38,47,52,50,35,24,29,11,34,2,32,16".split(",");t<o.length;t++){var i=o[t],r=Number.parseInt(i),n=Math.floor(r/13);n=r%13==0?n:n+1;var s=r%13==0?13:r%13;e.push([n,s])}return console.log(e),this.curCards=a.default.data2Key(e),e},e.prototype.GetChallenge=function(e){for(var t,o,a=Math.floor(e/1e4),i=Math.floor(e%1e4/100),n=e%1e4%100,c=(a-=r.LibConfig.daliyStartYear)%r.LibConfig.daliyMonthDef.count+1,l=r.LibConfig.daliyMonthDef.tryGetValue(c)[i],u=r.LibConfig.daliyDayDef.tryGetValue(l)[n-1],d=0,p=1;p<=c;p++){t=r.LibConfig.daliyMonthDef.tryGetValue(c);for(var h=0;h<12;h++){o=r.LibConfig.daliyDayDef.tryGetValue(t[h]);for(var f=0;f<31&&(o[f]==u&&d++,p!=c||h!=i||f!=n-1);f++);if(p==c&&h==i)break}if(c==p)break}var g=u+d+50*Math.floor(a/r.LibConfig.daliyMonthDef.count),m=r.LibConfig.id2Lib(g);s.Emitter.fire("onGetCardByDiff",m,d),this.curCards=this.getCard(m)},e.prototype.GetCurCards=function(){return a.default.key2Data(this.curCards)},e.prototype.GetCurCardsID=function(){return this.curCards},e.prototype.SetCurCardsID=function(e){this.curCards=e},e.prototype.PushCards=function(e){this.cardsDB.push(e)},e.prototype.randomFlop3=function(){var e=n.default.randomRangeInt(0,r.LibConfig.maxLib3Count),t=r.LibConfig.id2Lib(e,!0);return this.getCard(t)},e.prototype.getCardByDiff=function(e){var t=r.LibConfig.randomDiffLib(e);return setTimeout(function(){s.Emitter.fire("onGetCardByDiff",t,e)},100),this.getCard(t)},e.prototype.getCard=function(e){if(!e)return this.getDefaultCard();var t=e.lab,o=e.index,i=e.id;return this.mCurId=i,a.default.getCardDataAt(this.cardsDB[t],o)},e}();o.default=c,cc._RF.pop()},{"../Game":"Game","../core/global/Emitter":"Emitter","../core/util/MathUtil":"MathUtil","../data/CardDefine":"CardDefine","../data/CardLibData":"CardLibData"}],CardSlotCenterView:[function(e,t,o){"use strict";cc._RF.push(t,"e2a5dczimxOY5cSFRT5TuTO","CardSlotCenterView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../CardSlotView"),i=cc._decorator,r=i.ccclass,n=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.pushCard=function(t){e.prototype.pushCard.call(this,t),t.last&&t.last.clearNext(),t.clearLast()},t.prototype.bindEvent=function(){},__decorate([r],t)}(a.default));o.default=n,cc._RF.pop()},{"../CardSlotView":"CardSlotView"}],CardSlotDealerView:[function(e,t,o){"use strict";cc._RF.push(t,"62c3bc865BCyqLcjSaO0h0k","CardSlotDealerView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../CardSlotView"),i=e("../../global/GameConfig"),r=e("../../data/CardData"),n=e("../../global/AudioMgr"),s=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.addChild=function(t){e.prototype.addChild.call(this,t),t.hasLast()&&(t.last.active=!1)},t.prototype.removeCard=function(t){t.hasLast()&&(t.last.active=!0),e.prototype.removeCard.call(this,t)},t.prototype.onCardClick=function(t){var o;e.prototype.onCardClick.call(this,t);for(var a=this.stage.flopThree?3:1,i=[];a>0&&t;)i.push(t),t.flopCard(),t=t.last,a--;(o=this.stage).moveToSlot.apply(o,__spreadArrays([{moveType:r.MoveType.Normal},this,this.stage.flopSlot],i)),n.AudioMgr.dealCard()},t.prototype.onUseUndo=function(t,o,a){for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];for(var n=0,s=i;n<s.length;n++){var c=s[n];c.flopCard(!1)}i=i.reverse(),e.prototype.onUseUndo.apply(this,__spreadArrays([t,o,a],i))},t.prototype.onDealerClick=function(){this.isMoving()||(this.stage.flopSlot.isEmpty()?n.AudioMgr.error():(n.AudioMgr.clickDealer(),this.stage.onDealerClick(),this.onRestDeal()))},t.prototype.onRestDeal=function(e){var t,o=this.stage.flopSlot.peekCard(),a=[];for(o||e&&e(!1);o;)a.push(o),o.flopCard(!1),o=o.last;var i={moveType:r.MoveType.RestDeal,callback:function(){e&&e(!0)}};(t=this.stage).moveToSlot.apply(t,__spreadArrays([i,this.stage.flopSlot,this],a))},t.prototype.onAutoFindTarget=function(){var e=this;return new Promise(function(t){var o=e.peekCard();if(o){o.flopCard();var a={moveType:r.MoveType.Auto,callback:function(){t(!0)},duration:i.default.AutoMoveTime};e.stage.moveToSlot(a,e,e.stage.flopSlot,o)}else e.onRestDeal(t)})},__decorate([s],t)}(a.default);o.default=c,cc._RF.pop()},{"../../data/CardData":"CardData","../../global/AudioMgr":"AudioMgr","../../global/GameConfig":"GameConfig","../CardSlotView":"CardSlotView"}],CardSlotFlopView:[function(e,t,o){"use strict";cc._RF.push(t,"549b0h6WtxMgoDWZejA6/B7","CardSlotFlopView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../global/GameConfig"),i=e("../../core/util/MathUtil"),r=e("../../data/CardData"),n=e("./CardSlotMoveView"),s=cc._decorator.ccclass,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hovMaxCount=3,t}var o;return __extends(t,e),o=t,t.prototype.pushCard=function(t){e.prototype.pushCard.call(this,t),this.updatePos()},t.prototype.removeCard=function(t){e.prototype.removeCard.call(this,t),this.updatePos()},t.prototype.addChild=function(t){e.prototype.addChild.call(this,t),t.position=this.getOffsetPos(this.mCards.length)},t.prototype.canTouched=function(t){return t==this.peekCard()&&e.prototype.canTouched.call(this,t)},t.prototype.onCardClick=function(t){if(t==this.peekCard()){var o=this.stage.findTargetSlot(t);o?(o.onDropToSlot({moveType:r.MoveType.Normal},this,t),e.prototype.onCardClick.call(this,t)):t.cantMove()}},t.prototype.onUseUndo=function(t,o,a){for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];for(var n=0,s=i;n<s.length;n++){var c=s[n];c.flopCard()}i=i.reverse(),e.prototype.onUseUndo.apply(this,__spreadArrays([t,o,a],i))},t.prototype.onAutoFindTarget=function(){var e=this;return new Promise(function(t){var o=e.peekCard();if(o){var i=e.stage.findTargetSlot(o);if(i){var n={moveType:r.MoveType.Auto,callback:function(){t(!0)},duration:a.default.AutoMoveTime};e.stage.moveToSlot(n,e,i,o)}else t(!1)}else t(!1)})},t.prototype.getPopWorldPos=function(){var e=this.getOffsetPos(this.mCards.length+1);return this.node.convertToWorldSpaceAR(e)},t.prototype.updatePos=function(e){void 0===e&&(e=3);for(var t=Math.min(this.mCards.length,e),o=this.peekCard(),r=0;r<t&&o;r++){if(o.node.parent!=this.node){var n=this.node.convertToNodeSpaceAR(o.worldPos);this.addChild(o),o.node.position=n}var s=this.getOffsetPos(t-r,e);o.moveAction(i.default.vec2(s),a.default.CardMoveTime),o=o.last}},t.prototype.getOffsetPos=function(e,t){void 0===t&&(t=3);var a=Math.min(e,t),i=o.flopBaseX+o.flopOffset*(this.hovMaxCount-a);return new cc.Vec3(i,0,0)},t.prototype.canDropMyArea=function(t,o){return t.y>=o.y-this.node.height/2&&e.prototype.canDropMyArea.call(this,t,o)},t.flopOffset=-42,t.flopBaseX=45,o=__decorate([s],t)}(n.default);o.default=c,cc._RF.pop()},{"../../core/util/MathUtil":"MathUtil","../../data/CardData":"CardData","../../global/GameConfig":"GameConfig","./CardSlotMoveView":"CardSlotMoveView"}],CardSlotGameView:[function(e,t,o){"use strict";cc._RF.push(t,"5b0a6CAyjFLRbZPLsLL3pa3","CardSlotGameView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../global/GameConfig"),i=e("../../data/CardData"),r=e("./CardSlotMoveView"),n=e("../../global/AudioMgr"),s=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return __extends(t,e),o=t,t.prototype.addChild=function(t){e.prototype.addChild.call(this,t),t.hasLast()&&(t.position=this.getCardPos(t.last))},t.prototype.getPopWorldPos=function(t){var o=this.peekCard();return o?this.node.convertToWorldSpaceAR(this.getCardPos(o)):e.prototype.getPopWorldPos.call(this,t)},t.prototype.getCardPos=function(e){for(var t=cc.Vec3.ZERO;e;)t=this.getOffsetPos(e,t),e=e.last;return t},t.prototype.getOffsetPos=function(e,t){return e.isOpen?t.y+=o.OpenOffsetY:t.y+=o.CloseOffsetY,t},t.prototype.canMoveInto=function(e){return this.isEmpty()?e.cardData.isK():!!this.peekCard().checkLink(e)},t.prototype.getDragCards=function(e){for(var t=[];e;)t.push(e),e=e.next;return t},t.prototype.onDropToSlot=function(t,o){for(var a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];t.callback=function(){return n.AudioMgr.moveCardEnd()},e.prototype.onDropToSlot.apply(this,__spreadArrays([t,o],a))},t.prototype.onCardClick=function(t){if(t.isOpen){var o=this.stage.findTargetSlot(t);if(o){e.prototype.onCardClick.call(this,t);var a=this.getDragCards(t);o.onDropToSlot.apply(o,__spreadArrays([{moveType:i.MoveType.Normal},this],a))}else{t.cantMove();for(var r=t.next;r;)r.cantMove(!1),r=r.next}}},t.prototype.onUseUndo=function(t,o,a){for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];var n=this.peekCard();n&&!a&&n.flopClose(),e.prototype.onUseUndo.apply(this,__spreadArrays([t,o,a],i))},t.prototype.onAutoFindTarget=function(){var e=this;return new Promise(function(t){var o=e.peekCard();if(o){var r=e.stage.findTargetSlot(o,!1,!0);if(r){var n={moveType:i.MoveType.Auto,callback:function(){t(!0)},duration:a.default.AutoMoveTime};e.stage.moveToSlot(n,e,r,o)}else t(!1)}else t(!1)})},t.prototype.canDropMyArea=function(t,o){return t.y<=o.y+this.node.height/2&&e.prototype.canDropMyArea.call(this,t,o)},t.OpenOffsetY=-49,t.CloseOffsetY=-21,o=__decorate([s],t)}(r.default);o.default=c,cc._RF.pop()},{"../../data/CardData":"CardData","../../global/AudioMgr":"AudioMgr","../../global/GameConfig":"GameConfig","./CardSlotMoveView":"CardSlotMoveView"}],CardSlotMoveView:[function(e,t,o){"use strict";cc._RF.push(t,"92d5a8pGUtH0JH4NqNq1g6L","CardSlotMoveView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../CardSlotView"),i=e("../../Game"),r=e("../../global/GameConfig"),n=e("../../data/CardData"),s=e("../../core/UI/UIRootFit"),c=cc._decorator.ccclass,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mMoveX=0,t.mMoveY=0,t.mTouchMoved=!1,t.mScaleFactor=1,t}return __extends(t,e),t.prototype.start=function(){for(var e=this.node.parent,t=null;e&&!t;)t=e.getComponent(s.default),e=e.parent;t&&(this.mScaleFactor=t.scaleFactor)},t.prototype.canTouched=function(e){return i.Game.userData.actionDrop&&e.isOpen&&!this.isMoving()},t.prototype.canClicked=function(){return i.Game.userData.actionClick},t.prototype.onTouchStart=function(t,o){e.prototype.onTouchStart.call(this,t,o),this.canTouched(t)&&(this.mMoveX=0,this.mMoveY=0,this.mTouchMoved=!1)},t.prototype.onTouchMove=function(t,o){if(e.prototype.onTouchMove.call(this,t,o),this.canTouched(t)){var a=o.getDelta();if(this.mMoveX+=a.x/this.mScaleFactor,this.mMoveY+=a.y/this.mScaleFactor,!this.mTouchMoved&&(Math.abs(this.mMoveX)>15||Math.abs(this.mMoveY)>15)){this.mTouchMoved=!0;for(var i=0,r=this.getDragCards(t);i<r.length;i++)(c=r[i]).dragStartPos=c.worldPos,c.node.removeFromParent(!1),this.stage.addToOverLayer(c.node),c.position=this.stage.getOverLayerNodePos(c.dragStartPos);this.onStartMoveCard(t)}if(this.mTouchMoved)for(var n=0,s=this.getDragCards(t);n<s.length;n++){var c;(c=s[n]).node.x+=a.x/this.mScaleFactor,c.node.y+=a.y/this.mScaleFactor}}},t.prototype.onTouchEnd=function(t,o){if(this.mTouchMoved){if(this.canTouched(t)){this.mTouchMoved=!1;var a=this.stage.findDropSlot(t);if(a){var i=this.getDragCards(t),r={moveType:n.MoveType.Normal};a.onDropToSlot.apply(a,__spreadArrays([r,this],i)),t.startMove()}else this.resumeCard(t)}}else this.canClicked()&&e.prototype.onTouchEnd.call(this,t,o)},t.prototype.onTouchCancel=function(t,o){e.prototype.onTouchCancel.call(this,t,o),this.canTouched(t)&&this.mTouchMoved&&(this.mTouchMoved=!1,this.resumeCard(t))},t.prototype.resumeCard=function(e){for(var t=this,o=this.getDragCards(e),a=function(o){var a=i.stage.getOverLayerNodePos(o.dragStartPos);o.moveAction(a,r.default.CardMoveTime,null,function(){o.node.removeFromParent(!1),t.node.addChild(o.node),o.position=t.node.convertToNodeSpaceAR(o.dragStartPos),t.onResumeCard(e)})},i=this,n=0,s=o;n<s.length;n++)a(s[n])},t.prototype.onStartMoveCard=function(){},t.prototype.onResumeCard=function(){},t.prototype.canDrop=function(e){var t=this.node.convertToWorldSpaceAR(cc.Vec3.ZERO);return t=this.stage.getOverLayerNodePos(t),!(!this.canDropMyArea(e.node.position,t)||!this.canMoveInto(e))},t.prototype.getDragCards=function(e){return[e]},t.prototype.canDropMyArea=function(e,t){return Math.abs(e.x-t.x)<this.node.width/2+3},__decorate([c],t)}(a.default);o.default=l,cc._RF.pop()},{"../../Game":"Game","../../core/UI/UIRootFit":"UIRootFit","../../data/CardData":"CardData","../../global/GameConfig":"GameConfig","../CardSlotView":"CardSlotView"}],CardSlotTargetView:[function(e,t,o){"use strict";cc._RF.push(t,"c553by/4atA8aKM9AA1zXgM","CardSlotTargetView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../global/AudioMgr"),i=e("../../data/CardData"),r=e("./CardSlotMoveView"),n=cc._decorator.ccclass,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.canMoveInto=function(e,t){return!((!t||!t.ignoreNext)&&e.hasNext())&&(this.isEmpty()?e.cardData.isA():!!this.peekCard().isNextCard(e))},t.prototype.onCardClick=function(t){if(t.isOpen){var o=this.stage.findTargetSlot(t,!0,!1);o?(o.onDropToSlot({moveType:i.MoveType.Normal},this,t),e.prototype.onCardClick.call(this,t)):t.cantMove()}},t.prototype.addChild=function(t){e.prototype.addChild.call(this,t),t.moveType!=i.MoveType.Init&&t.moveType!=i.MoveType.Undo&&(this.stage.onMoveCardToTarget(t),this.stage.playDropCardEff(this,t.cardData.type-1),a.AudioMgr.toTargetCommon()),t.hasLast()&&(t.last.active=!1)},t.prototype.removeCard=function(t){t.hasLast()&&(t.last.active=!0),e.prototype.removeCard.call(this,t)},t.prototype.canDropMyArea=function(t,o){return t.y>=o.y-this.node.height/2&&e.prototype.canDropMyArea.call(this,t,o)},t.prototype.onStartMoveCard=function(e){e.hasLast()&&(e.last.active=!0)},t.prototype.onResumeCard=function(e){e.hasLast()&&(e.last.active=!1)},__decorate([n],t)}(r.default);o.default=s,cc._RF.pop()},{"../../data/CardData":"CardData","../../global/AudioMgr":"AudioMgr","./CardSlotMoveView":"CardSlotMoveView"}],CardSlotView:[function(e,t,o){"use strict";cc._RF.push(t,"618c7WXdbxGUrm7Swos5Rc7","CardSlotView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../global/GameConfig"),i=e("../data/CardData"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mCards=[],t}return __extends(t,e),t.prototype.init=function(e){this.mStage=e},Object.defineProperty(t.prototype,"stage",{get:function(){return this.mStage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cards",{get:function(){return this.mCards},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childrenCount",{get:function(){return this.mCards.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allOpen",{get:function(){return!!this.isEmpty()||this.mCards[0].isOpen},enumerable:!1,configurable:!0}),t.prototype.pushCard=function(e){var t=this.peekCard();t&&(e.last=t,t.next=e),this.mCards.push(e)},t.prototype.removeCard=function(e){e.hasLast()&&e.last.clearNext(),e.clearLast();var t=this.mCards.findIndex(function(t){return t==e});t>=0&&this.mCards.splice(t,1)},t.prototype.popCard=function(){if(0==this.mCards.length)return null;var e=this.peekCard();return this.removeChild(e),e},t.prototype.peekCard=function(){return 0==this.mCards.length?null:this.mCards[this.mCards.length-1]},t.prototype.getCardDatas=function(){for(var e=[],t=0,o=this.mCards;t<o.length;t++){var a=o[t];e.push(a.cardData.getData())}return e},t.prototype.descTypeOpen=function(){for(var e=[],t=this.peekCard();t;)t.isOpen&&e.push(t.cardData.type),t=t.last;return e},t.prototype.isEmpty=function(){return null==this.mCards||0==this.mCards.length},t.prototype.reset=function(){for(var e=0,t=this.mCards;e<t.length;e++)t[e].reset();this.mCards=[],this.node.removeAllChildren(!1)},t.prototype.addChild=function(e){this.bindEvent(e),e.node.parent!=this.node&&(e.node.removeFromParent(!1),this.node.addChild(e.node)),e.position=cc.Vec3.ZERO,this.stage.onMoveCardEnd(e)},t.prototype.removeChild=function(e){e.node.removeFromParent(!1),e.position=cc.Vec3.ZERO},t.prototype.getPopWorldPos=function(){return this.node.convertToWorldSpaceAR(cc.Vec3.ZERO)},t.prototype.canMoveInto=function(){return!1},t.prototype.MoveToSlot=function(e,t,o){this.removeCard(t),e.moveTo(t,o)},t.prototype.moveTo=function(e,t){var o=this,i=t.startPos,r=t.insert,n=t.duration,s=t.delay,c=t.easyObj,l=t.callback,u=t.data;i||(i=this.stage.getOverLayerNodePos(e.worldPos));var d=this.stage.getOverLayerNodePos(this.getPopWorldPos(e));this.pushCard(e),e.node.removeFromParent(!1),this.stage.addToOverLayer(e.node,r),e.position=i,n||(n=a.default.CardMoveTime),e.moveAction(d,n,{delay:s,easyObj:c},function(e,t){o.addChild(t),l&&l(u)},e)},t.prototype.onAutoFindTarget=function(){return new Promise(function(e){return e(!1)})},t.prototype.onUseUndo=function(e,t,o){for(var a,r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];var s={moveType:i.MoveType.Undo,undoMoveType:e};(a=this.stage).moveToSlot.apply(a,__spreadArrays([s,t,this],r));var c=r[0];c.startMove()},t.prototype.isMoving=function(){for(var e=0,t=this.mCards;e<t.length;e++)if(t[e].moving)return!0;return!1},t.prototype.onCardClick=function(){},t.prototype.onTouchStart=function(e){this.mStage.onCardTouch(e)},t.prototype.onTouchMove=function(){},t.prototype.onTouchEnd=function(e){this.onCardClick(e)},t.prototype.onTouchCancel=function(){},t.prototype.canDrop=function(){return!1},t.prototype.onDropToSlot=function(e,t){for(var o,a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];(o=this.stage).moveToSlot.apply(o,__spreadArrays([e,t,this],a));var r=t.peekCard();r&&!r.isOpen&&r.flopOpen()},t.prototype.bindEvent=function(e){e.onTouchStart=this.getBindEvent(this.onTouchStart,this),e.onTouchMove=this.getBindEvent(this.onTouchMove,this),e.onTouchEnd=this.getBindEvent(this.onTouchEnd,this),e.onTouchCancel=this.getBindEvent(this.onTouchCancel,this)},t.prototype.getBindEvent=function(e,t){var o=this;return function(a,i){o.stage.isPlaying&&e.call(t,a,i)}},t}(cc.Component);o.default=r,cc._RF.pop()},{"../data/CardData":"CardData","../global/GameConfig":"GameConfig"}],CardView:[function(e,t,o){"use strict";cc._RF.push(t,"b6fd2af3bBGUq9mcz2EggUv","CardView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../data/CardData"),i=e("../global/DataManager"),r=e("../global/AudioMgr"),n=e("../Game"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.mLast=null,t.mNext=null,t.mCardData=null,t.mCardBg=null,t.mAnimation=null,t.mMoving=!1,t.mMoveType=a.MoveType.Init,t.mFloping=!1,t}var o;return __extends(t,e),o=t,Object.defineProperty(t.prototype,"cardData",{get:function(){return this.mCardData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.mLast},set:function(e){this.mLast=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this.mNext},set:function(e){this.mNext=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{set:function(e){this.node.position=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"moving",{get:function(){return this.mMoving},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.cardData.isOpen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldPos",{get:function(){return this.node.convertToWorldSpaceAR(cc.Vec3.ZERO)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordLeftTopPos",{get:function(){return this.node.convertToWorldSpaceAR(new cc.Vec3(.5*o.Size.width,.5*o.Size.height,0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"moveType",{get:function(){return this.mMoveType},set:function(e){this.mMoveType=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dragStartPos",{get:function(){return this.mDragStartPos},set:function(e){this.mDragStartPos=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this.node.active},set:function(e){e!=this.node.active&&(this.node.active=e)},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.mAnimation=this.node.getComponent(cc.Animation),this.bindEvent()},t.prototype.init=function(e){this.mCardData=e},t.prototype.initByData=function(e){var t=i.default.getDefaultCardBg();"default"!=n.Game.userData.cardBG&&(t=i.default.getCardBg(n.Game.userData.cardBG)),this.init(e),this.setCardBg(t),this.flopCard(e.isOpen)},t.prototype.checkLink=function(e){return this.cardData.checkLink(e.cardData)},t.prototype.isNextCard=function(e){return this.cardData.isNextCard(e.cardData)},t.prototype.flopCard=function(e){void 0===e&&(e=!0),this.cardData.isOpen=e,this.cardData.isOpen?this.setCardIcon():this.setCardBg(this.mCardBg)},t.prototype.setCardBg=function(e){this.mCardBg=e,this.cardData.isOpen||this.setIcon(e)},t.prototype.clearLast=function(){this.mLast=null},t.prototype.clearNext=function(){this.mNext=null},t.prototype.hasLast=function(){return null!=this.mLast},t.prototype.hasNext=function(){return null!=this.mNext},t.prototype.reset=function(){this.clearNext(),this.clearLast(),this.flopCard(!1),this.clearEvent(),this.node.removeFromParent(!1),this.node.stopAllActions(),this.mMoveType=a.MoveType.Init,this.mAnimation&&this.mAnimation.stop()},t.prototype.setCardIcon=function(){this.cardData.isOpen&&this.setIcon(i.default.getCard(this.cardData))},t.prototype.offsetWordPos=function(e){return this.node.convertToWorldSpaceAR(e)},t.prototype.setIcon=function(e){this.icon.spriteFrame=e},t.prototype.flopOpen=function(){return this.cardData.isOpen=!0,this.flop(!0)},t.prototype.flopClose=function(){return this.cardData.isOpen=!1,this.flop(!1)},t.prototype.flop=function(e){return this.mAnimation?(this.mFloping=!0,e?this.mAnimation.play("CardFlop"):this.mAnimation.play("CardFlopClose"),this.mAnimation.currentClip.duration):0},t.prototype.shuffle=function(e){return this.mAnimation?(this.mFloping=!0,e?this.mAnimation.play("ShuffleLeft"):this.mAnimation.play("ShuffleRight"),this.mAnimation.currentClip.duration):0},t.prototype.flopEnd=function(){this.mFloping=!1},t.prototype.startMove=function(){},t.prototype.cantMove=function(e){if(void 0===e&&(e=!0),e&&r.AudioMgr.error(),this.mAnimation)return this.mAnimation.play("CardShake"),this.mAnimation.currentClip.duration},t.prototype.moveAction=function(e,t,o,a,i){var r=this,n=[],s=o||{delay:0,easyObj:cc.easeCubicActionOut()},c=s.delay,l=s.easyObj;c&&c>0&&n.push(cc.delayTime(c)),l||(l=cc.easeCubicActionOut()),this.mMoving=!0,"linear"===l?n.push(cc.moveTo(t,e)):n.push(cc.moveTo(t,e).easing(l)),n.push(cc.callFunc(function(e,t){r.mMoving=!1,a&&a(e,t)},this,i)),this.node.stopAllActions(),this.node.runAction(cc.sequence(n))},t.prototype.bindEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.getTouchEvent(this.touchStart,this),this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.getTouchEvent(this.touchMove,this),this),this.node.on(cc.Node.EventType.TOUCH_END,this.getTouchEvent(this.touchEnd,this)),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.getTouchEvent(this.touchCancel,this),this)},t.prototype.clearEvent=function(){this.onTouchStart=null,this.onTouchMove=null,this.onTouchEnd=null,this.onTouchCancel=null},t.prototype.touchStart=function(e){this.onTouchStart&&this.onTouchStart(this,e)},t.prototype.touchMove=function(e){this.onTouchMove&&this.onTouchMove(this,e)},t.prototype.touchEnd=function(e){this.onTouchEnd&&this.onTouchEnd(this,e)},t.prototype.touchCancel=function(e){this.onTouchCancel&&this.onTouchCancel(this,e)},t.prototype.getTouchEvent=function(e,t){return function(o){t.mFloping||(e.call(t,o),o.stopPropagation())}},t.Size=new cc.Size(101,151),__decorate([l(cc.Sprite)],t.prototype,"icon",void 0),o=__decorate([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Game":"Game","../data/CardData":"CardData","../global/AudioMgr":"AudioMgr","../global/DataManager":"DataManager"}],CelebrateEffectWindow:[function(e,t,o){"use strict";cc._RF.push(t,"51c26XwuN5C56A6y42uUdcI","CelebrateEffectWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("../../core/util/MathUtil"),r=e("./succeffect/ShapeBase"),n=e("./succeffect/shape/ShapeCircle"),s=e("./succeffect/shape/ShapeConcentricCircles"),c=e("./succeffect/shape/Shape4Circles"),l=e("./succeffect/AnimationClub"),u=e("./succeffect/shape/ShapeSquare"),d=e("./succeffect/shape/ShapeTriangular"),p=e("./succeffect/shape/ShapeRhombus"),h=e("./succeffect/shape/ShapePentagram"),f=e("./succeffect/shape/ShapeSandglass"),g=e("./succeffect/shape/ShapeDiamond"),m=cc._decorator,y=m.ccclass,v=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cardPrefab=null,t.isPlaying=!1,t.effects=[],t.curEffect=null,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),r.default.cardPrefab=this.cardPrefab,r.default.parent=this.node,this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this),this.createEffects()},t.prototype.createEffects=function(){this.effects.push(new n.default),this.effects.push(new s.default),this.effects.push(new c.default),this.effects.push(new u.default),this.effects.push(new d.default),this.effects.push(new p.default),this.effects.push(new h.default),this.effects.push(new f.default),this.effects.push(new g.default),this.effects.push(new l.default)},t.prototype.randomEffect=function(){var e=i.default.randomRange(0,this.effects.length);return this.effects[e]},t.prototype.update=function(e){this.isPlaying&&this.curEffect&&this.curEffect.update(e)},t.prototype.show=function(t){var o=this;e.prototype.show.call(this),this.finished=t,this.curEffect=this.randomEffect(),this.curEffect.followScale()?this.fitScale():this.node.scale=1,this.isPlaying=!0,this.curEffect.play(function(){o.isPlaying=!1,o.toBack()})},t.prototype.fitScale=function(){},t.prototype.onHide=function(){e.prototype.onHide.call(this),this.finished&&this.finished()},t.prototype.onClick=function(){this.isPlaying&&this.curEffect.stop()},__decorate([v(cc.Prefab)],t.prototype,"cardPrefab",void 0),__decorate([y],t)}(a.default);o.default=b,cc._RF.pop()},{"../../core/UI/WWindow":"WWindow","../../core/util/MathUtil":"MathUtil","./succeffect/AnimationClub":"AnimationClub","./succeffect/ShapeBase":"ShapeBase","./succeffect/shape/Shape4Circles":"Shape4Circles","./succeffect/shape/ShapeCircle":"ShapeCircle","./succeffect/shape/ShapeConcentricCircles":"ShapeConcentricCircles","./succeffect/shape/ShapeDiamond":"ShapeDiamond","./succeffect/shape/ShapePentagram":"ShapePentagram","./succeffect/shape/ShapeRhombus":"ShapeRhombus","./succeffect/shape/ShapeSandglass":"ShapeSandglass","./succeffect/shape/ShapeSquare":"ShapeSquare","./succeffect/shape/ShapeTriangular":"ShapeTriangular"}],ClassicJump:[function(e,t,o){"use strict";cc._RF.push(t,"5df6204LGJGBaDAejsNzyFX","ClassicJump"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ShapeBase"),i=e("../../../data/CardDefine"),r=e("../../../global/GameConfig"),n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.copyCardNum=220,t.cardSize=new cc.Size(70,105),t.copyNodes=[],t}return __extends(t,e),t.prototype.onPlay=function(){var e=this;this.createNodes(),this.startMove(),this.timeout=setTimeout(function(){e.removeCopyNodes(),e.onCompleted()},a.default.ShapeUpdateTm*this.nodes.length*1e3)},t.prototype.onStop=function(){this.timeout&&(clearTimeout(Number(this.timeout)),this.timeout=0),this.removeCopyNodes()},t.prototype.startMove=function(){for(var e=new cc.Vec3(-cc.winSize.width/this.uiRootScale/2-50,cc.winSize.height/this.uiRootScale/2+50),t=0,o=function(o){o.position=e;for(var r=[],n=0;n<i.copyCardNum;n++){var s=cc.instantiate(o);r.push(s)}i.copyNodes.push(r);var c=i.jumpsTrace(new cc.Vec2(o.x,o.y)),l=i.jumpActions(c,o.x),u=t;for(n=0;n<r.length;n++){var d=[cc.delayTime(u)];0==n&&d.push(cc.callFunc(function(){for(var e=r.length-1;e>=0;e--)a.default.parent.addChild(r[e])}));for(var p=0,h=l;p<h.length;p++){var f=h[p];d.push(f.clone())}var g=void 0;0==n?(d.push(cc.callFunc(function(){for(var e=0,t=r;e<t.length;e++)t[e].stopAllActions()})),g=cc.sequence(d)):g=cc.sequence(d),r[n].runAction(g),u+=.015}t+=a.default.ShapeUpdateTm},i=this,r=0,n=this.nodes;r<n.length;r++)o(n[r])},t.prototype.createNodes=function(){for(var e=i.default.EachSuitCount-1;e>=0;e--)for(var t=0;t<i.default.SuitCount;t++){var o=t+1,a=e+1;this.getNode(o,a)}},t.prototype.removeCopyNodes=function(){for(var e=0,t=this.copyNodes;e<t.length;e++)for(var o=0,a=t[e];o<a.length;o++){var i=a[o];i.stopAllActions(),i.removeFromParent(!1)}this.copyNodes=[]},t.prototype.computeFirstJumpDistance=function(e){var t,o;return t=.25*(Math.abs(e)+cc.winSize.width/2),o=.5*(Math.abs(e)+cc.winSize.width/2),t+Math.random()*(o-t)},t.prototype.jumpsTrace=function(e){for(var t=[],o=this.computeFirstJumpDistance(e.x,!0),a=Math.abs(e.x)+cc.winSize.width/2,i=o,r=o;r<a||r>a&&r-a<i;r+=i){var n=(e.x+r)/this.scaleFactor,s=(-cc.winSize.height/2+this.cardSize.height/2)/this.scaleFactor;t.push(new cc.Vec2(n,s))}return t},t.prototype.computeFirstJumpHeight=function(e,t,o){return cc.winSize.height/2+(e-t)/(o-t)*(2*cc.winSize.height/3-cc.winSize.height/2)},t.prototype.jumpActions=function(e,t){for(var o=[],a=r.default.SuccEffJumpAllTm/e.length,i=(cc.winSize.width/2-t)/4,n=(cc.winSize.width/2-t)/2,s=e[0].x-t,c=this.computeFirstJumpHeight(s,i,n),l=!0,u=0,d=e;u<d.length;u++){var p=d[u];c/=this.scaleFactor,l?(o.push(cc.jumpTo(a,p,2*c/3,1)),l=!1):(o.push(cc.jumpTo(a,p,c,1)),c*=.9)}return o},t}(a.default);o.default=n,cc._RF.pop()},{"../../../data/CardDefine":"CardDefine","../../../global/GameConfig":"GameConfig","./ShapeBase":"ShapeBase"}],ColorUtil:[function(e,t,o){"use strict";cc._RF.push(t,"d9bc5w+47BCqIh6JrB794KB","ColorUtil"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}var t;return t=e,e.getColorInfo=function(e,o){void 0===o&&(o=t.RGB_TYPE);var a=[];return o==t.RGB_TYPE?(a[0]=e>>16,a[1]=e>>8&255,a[2]=255&e):o==t.ARGB_TYPE&&(a[3]=e>>>24,a[0]=e>>>16&255,a[1]=e>>>8&255,a[2]=255&e),a},e.buildColor=function(e,o,a,i,r){return void 0===i&&(i=0),void 0===r&&(r=t.RGB_TYPE),r==t.RGB_TYPE?e<<16|o<<8|a:i<<24|e<<16|o<<8|a},e.toHtml16String=function(e){return"#"+e.toString(16).toUpperCase()},e.ReversalColor=function(e){return(255&e)<<16|(e>>8&255)<<8|e>>16},e.setGrayFlilter=function(e){return t.ColorMatrixFilter(e,[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])},e.brightness=function(e,o){void 0===o&&(o=0);var a=[1,0,0,0,o,0,1,0,0,o,0,0,1,0,o,0,0,0,1,0];return t.ColorMatrixFilter(e,a)},e.contrast=function(e,o){void 0===o&&(o=0);var a=[o,0,0,0,128*(1-o),0,o,0,0,128*(1-o),0,0,o,0,128*(1-o),0,0,0,1,0];return t.ColorMatrixFilter(e,a)},e.ColorMatrixFilter=function(e,t){var o=e.getR(),a=e.getG(),i=e.getB(),r=e.getA(),n=t[0]*o+t[1]*a+t[2]*i+t[3]*r+t[4],s=t[5]*o+t[6]*a+t[7]*i+t[8]*r+t[9],c=t[10]*o+t[11]*a+t[12]*i+t[13]*r+t[14],l=t[15]*o+t[16]*a+t[17]*i+t[18]*r+t[19];return new cc.Color(n,s,c,l)},e.RGB_TYPE=24,e.ARGB_TYPE=32,t=__decorate([i],e)}());o.default=r,cc._RF.pop()},{}],CondFactory:[function(e,t,o){"use strict";cc._RF.push(t,"2ba78ytfiJJTYUU5VOCc3WI","CondFactory"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./conditions/Counter"),i=e("./conditions/Recorder"),r=e("./conditions/CounterWinC"),n=e("./conditions/Toggler"),s=e("./conditions/Judicator"),c=e("./conditions/JudicatorACN"),l=e("./TaskDefine"),u=e("./conditions/RecordMax"),d=e("./conditions/CounterOrder2TN"),p=e("./conditions/DescOrder2CN"),h=e("./conditions/CounterWin"),f=e("./conditions/RecorderClearCol"),g=e("./conditions/CounterTCount"),m=function(){function e(){}return e.create=function(e,t,o){for(var m=[],y=3;y<arguments.length;y++)m[y-3]=arguments[y];var v=m[0];switch(e){case l.CondType.Win:return new h.default(e,o,v);case l.CondType.WinC:return new r.default(e,o,v);case l.CondType.UseTip:case l.CondType.UseUndo:return new i.default(e,o,v);case l.CondType.Daliy:return new n.default(e,o);case l.CondType.Moves:case l.CondType.Times:return new i.default(e,o,v);case l.CondType.Move2TN:return new g.default(e,o,v);case l.CondType.Move2TCN:case l.CondType.Move2TRCN:return new s.default(e,t,o,v);case l.CondType.Move2TACN:return new c.default(e,t,o,v);case l.CondType.Move2TCRCN:return new s.default(e,t,o,v);case l.CondType.DescCN:return new u.default(e,o,v);case l.CondType.ReDeal:return new i.default(e,o,v);case l.CondType.ClearCol:return new f.default(e,o,v);case l.CondType.GainTrophy:return new a.default(e,o,v);case l.CondType.LevelUp:case l.CondType.ScoreGtAvg:case l.CondType.TimeLtAvg:case l.CondType.MoveLtAvg:return new i.default(e,o,v);case l.CondType.CounterOrder2TN:return new(d.default.bind.apply(d.default,__spreadArrays([void 0,e,o],m)));case l.CondType.DescOrder2CN:return new(p.default.bind.apply(p.default,__spreadArrays([void 0,e,o],m)))}},e}();o.default=m,cc._RF.pop()},{"./TaskDefine":"TaskDefine","./conditions/Counter":"Counter","./conditions/CounterOrder2TN":"CounterOrder2TN","./conditions/CounterTCount":"CounterTCount","./conditions/CounterWin":"CounterWin","./conditions/CounterWinC":"CounterWinC","./conditions/DescOrder2CN":"DescOrder2CN","./conditions/Judicator":"Judicator","./conditions/JudicatorACN":"JudicatorACN","./conditions/RecordMax":"RecordMax","./conditions/Recorder":"Recorder","./conditions/RecorderClearCol":"RecorderClearCol","./conditions/Toggler":"Toggler"}],CondGroup:[function(e,t,o){"use strict";cc._RF.push(t,"26e50tlVvFJmLdkLWGALfYz","CondGroup"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./TaskDefine"),i=e("../core/Table/Table"),r=e("../core/Table/TableHelper"),n=function(){function e(e){this.conds=e,this.state=a.TaskState.Progressing}return Object.defineProperty(e.prototype,"count",{get:function(){return this.conds.length},enumerable:!1,configurable:!0}),e.prototype.recover=function(e){for(var t=0,o=this.conds;t<o.length;t++){var a=o[t];e.hasOwnProperty(a.type)&&a.recover(e[a.type])}},e.prototype.snapshoot=function(){for(var e={},t=0,o=this.conds;t<o.length;t++){var a=o[t];e[a.type]=a.snapshoot()}return e},e.prototype.checkComplete=function(){for(var e=!0,t=0,o=this.conds;t<o.length;t++){var i=o[t];if(i.isPre&&i.isFail()){e=!1,this.state=a.TaskState.Fail;break}e=e&&i.isComplete()}e&&(this.state=a.TaskState.Completed)},e.prototype.isCompleted=function(){return this.state==a.TaskState.Completed},e.prototype.reset=function(){if(this.state!=a.TaskState.Completed){this.state=a.TaskState.Progressing;for(var e=0,t=this.conds;e<t.length;e++)t[e].reset()}},e.prototype.hasType=function(e){return this.conds.findIndex(function(t){return t.type==e})>=0},e.prototype.getProgress=function(e){for(var t=0,o=this.conds;t<o.length;t++){var a=o[t];if(a.type==e)return a.getProgress()}return-1},e.prototype.onAction=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(this.state==a.TaskState.Completed||this.state==a.TaskState.Fail)return[];for(var n=r.TableHelper.FindAll(i.eTable.eTabTaskCond,function(t){return t.type==e}),s=[],c=function(e){var o=l.conds.find(function(t){return t.type==e.id});o&&(o.onAction.apply(o,t),s.push(o))},l=this,u=0,d=n;u<d.length;u++){var p=d[u];c(p)}return s.length>0&&this.checkComplete(),s},e}();o.default=n,cc._RF.pop()},{"../core/Table/Table":"Table","../core/Table/TableHelper":"TableHelper","./TaskDefine":"TaskDefine"}],Condition:[function(e,t,o){"use strict";cc._RF.push(t,"111f5vjszBAqJESS4fQVPkh","Condition"),Object.defineProperty(o,"__esModule",{value:!0}),o.Condition=void 0;var a=function(){function e(e){this.type=e,this.isPre=!1}return e.prototype.recover=function(){},e.prototype.snapshoot=function(){},e.prototype.isFail=function(){return!1},e.prototype.isComplete=function(){return!1},e.prototype.reset=function(){},e.prototype.onAction=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.getProgress=function(){return-1},e.prototype.getCount=function(){return-1},e}();o.Condition=a,cc._RF.pop()},{}],Const:[function(e,t,o){"use strict";cc._RF.push(t,"4277cjuWEpI4boyL+8eif4x","Const"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function e(){}return e.posBase=new cc.Vec2,e.eOnGameToMenu="onGameToMenu",e.eOnStartGame="onStartGame",e.eOnGameReady="onGameReady",e.eOnGameEnd="onGameEnd",e.eOnStageClick="onStageClick",e.eTimeUpdate="timeUpdate",e.eStepUpdate="stepUpdate",e.eScoreUpdate="scoreUpdate",e.eChangeLayout="changeLayout",e.eChangeThreeShow="changeThreeShow",e.eChangeAutoComplete="changeAutoComplete",e.eLanguageChange="languageChange",e.eChangeGameBG="changeGameBG",e.eChangeCardBG="changeCardBG",e.eChangeCardFace="changeCardFace",e.eChangeFlopThree="changeFlopThree",e.eUndoCountChanged="undoCountChanged",e.eOnShuffling="onShuffling",e.eOnShuffled="onShuffled",e.eCanAutoComplete="canAutoComplete",e.eOnShowUI="onShowUI",e.eOnHideUI="onHideUI",e.eOnCheckRedPoint="checkRedPoint",e.kTrophyYear="trophyYear",e.kTrophy="trophy",e.kLastMonth="lastMonth",e.kCurrentMonth="currentMonth",e.kTrophyTotal="trophyTotal",e.eUpdateDaliyInfo="updateDaliyInfo",e.kGuide="guide",e.kStoryData="storyData",e.kGoldData="goldData",e.eGoldDataChanged="goldDataChanged",e.kMagicData="magicData",e.eMagicCountChanged="magicCountChanged",e.eMagicOpenChanged="magicOpenChanged",e.eShuffleCountChanged="shuffleCountChanged",e.kLevelData="levelData",e.eLevelChanged="levelChanged",e.eTitleChanged="titleChanged",e.eTitleRedPoint="titleRedPoint",e.kTaskData="taskData",e.eTaskComplete="taskComplete",e.eTaskProcessing="taskProcessing",e.eTaskHalfComplete="taskHalfComplete",e.eTaskSwitched="taskSwitched",e.eTaskTimeUpdate="taskTimeUpdate",e.kNotice="notice",e.eNewGameTips="newGameTips",e.kCardLibData="cardLibData",e.kUserSts="userSts",e.kPreCardId="preCardId",e.kSubFrom="subFrom",e.kShopData="shopData",e.eHideRemoveAd="hideRemoveAd",e}();o.default=a,cc._RF.pop()},{}],CounterOrder2TN:[function(e,t,o){"use strict";cc._RF.push(t,"18d39uM3bxJcaWt6DZ9mEDh","CounterOrder2TN"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Counter"),i=e("../TaskDefine"),r=e("../../data/CardDefine"),n=function(e){function t(t,o){for(var a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];var r=e.call(this,t,o,a[2])||this;return r.op=o,r.lastIndex=0,r.params=a,r.current=0,r.lastIndex=0,r}return __extends(t,e),t.prototype.recover=function(t){e.prototype.recover.call(this,t.current),this.lastIndex=t.lastIndex},t.prototype.snapshoot=function(){return{lastIndex:this.lastIndex,current:this.current}},t.prototype.reset=function(){e.prototype.reset.call(this),this.lastIndex=0},t.prototype.onAction=function(t){var o=r.default.getCardType(t);this.params[this.lastIndex]==o?(this.lastIndex>=1&&e.prototype.onAction.call(this,t),this.lastIndex++):(this.lastIndex=0,this.params[this.lastIndex]==o&&this.lastIndex++),this.lastIndex>1&&(this.lastIndex=0),console.log("type:",i.CondType[this.type],"value:",this.current,i.Operator[this.op],this.count)},t}(a.default);o.default=n,cc._RF.pop()},{"../../data/CardDefine":"CardDefine","../TaskDefine":"TaskDefine","./Counter":"Counter"}],CounterTCount:[function(e,t,o){"use strict";cc._RF.push(t,"e9ca3oH2w9BRamvHChKVoZ6","CounterTCount"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAction=function(e,t){this.current=this.getTargetCardCount(t),this.current>this.count&&(this.current=this.count)},t.prototype.getTargetCardCount=function(e){for(var t=0,o=0,a=e;o<a.length;o++)t+=a[o].childrenCount;return t},t}(e("./Counter").default);o.default=a,cc._RF.pop()},{"./Counter":"Counter"}],CounterWinC:[function(e,t,o){"use strict";cc._RF.push(t,"cbf3bwRL+5FI6os30Koi5og","CounterWinC"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(t,o,a){var i=e.call(this,t,a,o)||this;return i.type=t,i.op=o,i.count=a,i}return __extends(t,e),t.prototype.reset=function(){},t.prototype.onAction=function(t){t?e.prototype.onAction.call(this):this.current=0},t}(e("./Counter").default);o.default=a,cc._RF.pop()},{"./Counter":"Counter"}],CounterWin:[function(e,t,o){"use strict";cc._RF.push(t,"0929eeiTLlAuJM+5s6xM3Ft","CounterWin"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(t,o,a){var i=e.call(this,t,a,o)||this;return i.type=t,i.op=o,i.count=a,i}return __extends(t,e),t.prototype.reset=function(){1==this.count&&(this.current=0)},t.prototype.onAction=function(t){t&&e.prototype.onAction.call(this)},t}(e("./Counter").default);o.default=a,cc._RF.pop()},{"./Counter":"Counter"}],Counter:[function(e,t,o){"use strict";cc._RF.push(t,"4ff57Xcx7dLnbx5xkBl0d/S","Counter"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Condition"),i=e("../TaskDefine"),r=function(e){function t(t,o,a){var i=e.call(this,t)||this;return i.op=o,i.count=a,i.current=0,i}return __extends(t,e),t.prototype.recover=function(t){e.prototype.recover.call(this,t),this.current=t},t.prototype.snapshoot=function(){return this.current},t.prototype.isFail=function(){switch(this.op){case i.Operator.E:return!1;case i.Operator.LT:return this.current>=this.count;case i.Operator.LTE:return this.current>this.count;case i.Operator.GT:case i.Operator.GTE:return!1;default:return this.current>=this.count}},t.prototype.isComplete=function(){switch(this.op){case i.Operator.E:return this.current==this.count;case i.Operator.LT:return this.current<this.count;case i.Operator.LTE:return this.current<=this.count;case i.Operator.GT:return this.current>this.count;case i.Operator.GTE:return this.current>=this.count;default:return this.current<this.count}},t.prototype.reset=function(){this.current=0},t.prototype.getProgress=function(){return this.current},t.prototype.getCount=function(){return this.count},t.prototype.onAction=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.current++,console.log("type:",i.CondType[this.type],"value:",this.current,i.Operator[this.op],this.count)},t}(a.Condition);o.default=r,cc._RF.pop()},{"../Condition":"Condition","../TaskDefine":"TaskDefine"}],DailyHelpWindow:[function(e,t,o){"use strict";cc._RF.push(t,"09b5eYdrsxBq4VLkybt/7qG","DailyHelpWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/global/I18N"),i=e("../../core/UI/WWindow"),r=cc._decorator,n=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lab_title=null,t.lab_confirm=null,t.lab_texts=[],t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.initLanguage()},t.prototype.initLanguage=function(){this.lab_title.string=a.default.get("L4018"),this.lab_confirm.string=a.default.get("L4022"),this.lab_texts[0].string=a.default.get("L4019"),this.lab_texts[1].string=a.default.get("L4020"),this.lab_texts[2].string=a.default.get("L4021")},__decorate([s(cc.Label)],t.prototype,"lab_title",void 0),__decorate([s(cc.Label)],t.prototype,"lab_confirm",void 0),__decorate([s(cc.Label)],t.prototype,"lab_texts",void 0),__decorate([n],t)}(i.default);o.default=c,cc._RF.pop()},{"../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N"}],DaliyHelper:[function(e,t,o){"use strict";cc._RF.push(t,"fe1cfEKqRdF0bUgFes7PbY+","DaliyHelper"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Game"),i=e("../global/Const"),r=e("../core/util/DateUtils"),n=function(){function e(){}return e.dateIsValid=function(e){var t=r.default.splitDate(e),o=t.year,a=t.month,i=(t.day,new Date);return i.getMonth()>0?o==i.getFullYear()&&(a==i.getMonth()||a==i.getMonth()+1):o==i.getFullYear()&&a==i.getMonth()+1||o==i.getFullYear()-1&&11==a},e.getDayCount=function(e,t){var o=this.DayCount[t];return 0==o&&(o=e%4==0&&e%100!=0||e%400==0?29:28),o},e.getTrophy=function(e,t){var o=this.getTrophyData(t),a=this.getDayCount(e,t);return(!o||o<0)&&(o=0),this.getTrophyIndex(o,a)},e.getTrophyIndex=function(e,t){return e==t?3:e>=20?2:Math.floor(e/10)},e.getNextTrophy=function(e){return e>=3?3:e+1},e.getNextTrophyCount=function(e,t,o){return 3==e?0:3==(e+=1)?o-t:10*e-t},e.getDaliyData=function(e){return a.Game.userData.FBData[e?i.default.kCurrentMonth:i.default.kLastMonth]},e.getTrophyData=function(e){return a.Game.userData.FBData[i.default.kTrophy][e]},e.getTotalTrophy=function(){for(var e=0,t=a.Game.userData.FBData[i.default.kTrophy],o=0;o<t;o++)e+=a.Game.userData.FBData[i.default.kTrophy];return e},e.getNextDaliy=function(e,t){var o=e[3],a=new Date,i=Math.floor(o/1e4),n=a.getFullYear(),s=Math.floor(o%1e4/100),c=a.getMonth(),l=o%100,u=a.getDate();if(i==n&&c-s<2){if(!t)return!0}else i=n,s=c,l=u;var d=c-s==0,p=this.getDaliyData(d);if(!p[l-1]||p[l-1]<1)return e[3]=r.default.getDateNum(i,s,l),e[0]=r.default.dateNumFormat(e[3]),e[1]=d,e[2]=l,!0;p=this.getDaliyData(!0);for(var h=u-1;h>=0;h--)if(!p[h]||p[h]<1)return e[3]=r.default.getDateNum(i,s,h+1),e[0]=r.default.dateNumFormat(e[3]),e[1]=!0,e[2]=h+1,!0;for(s-=1,h=(p=this.getDaliyData(!1)).length-1;h>=0;h--)if(p[h]<1)return e[3]=r.default.getDateNum(i,s,h+1),e[0]=r.default.dateNumFormat(e[3]),e[1]=!1,e[2]=h+1,!0;return!1},e.DayCount=[31,0,31,30,31,30,31,31,30,31,30,31],e}();o.default=n,window.DaliyHelper=n,cc._RF.pop()},{"../Game":"Game","../core/util/DateUtils":"DateUtils","../global/Const":"Const"}],DaliyMiniWindow:[function(e,t,o){"use strict";cc._RF.push(t,"ee684P5n2FJBoNKgRn9Ndgz","DaliyMiniWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./content/DayItem"),i=e("../../core/global/I18N"),r=e("../../Game"),n=e("../../core/UI/WWindow"),s=e("../../data/DaliyHelper"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TrophyPro=null,t.TrophyProSize=0,t.TrophyDot=[],t.maxNumLabel=null,t.monthLabel=null,t.weekLabel=[],t.dayItemPre=null,t.dayContiner=null,t.daySelectIcon=null,t.dayItems=[[],[],[],[],[],[]],t.currentDate=new Date,t.isNowMonth=!0,t}return __extends(t,e),t.prototype.onLoad=function(){var t;e.prototype.onLoad.call(this);for(var o=0;o<6;o++)for(var i=0;i<7;i++)t=cc.instantiate(this.dayItemPre),this.dayContiner.addChild(t),this.dayItems[o][i]=t.getComponent(a.default).setPos(o,i);this.initLanguage(),this.initUI()},t.prototype.updateDaliyInfo=function(){this.initUI()},t.prototype.initLanguage=function(){for(var e=0;e<7;e++)this.weekLabel[e].string=i.default.get("L32"+(e+1));this.monthLabel.string=i.default.get("L"+(this.currentDate.getMonth()+309))},t.prototype.show=function(){e.prototype.show.call(this);var t=new Date;this.currentDate.getDate()!=t.getDate()&&(this.currentDate=t,this.initUI()),t.getMonth()},t.prototype.initUI=function(){r.Game.userData.FBData.trophyYear!=this.currentDate.getFullYear()&&r.Game.userData.updateObjData({trophyYear:this.currentDate.getFullYear(),trophy:[0,0,0,0,0,0,0,0,0,0,0,0],lastMonth:[],currentMonth:[]});var e,t=r.Game.userData.FBData[this.isNowMonth?"currentMonth":"lastMonth"],o=(e=this.isNowMonth?new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),1):this.currentDate.getMonth()>0?new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()-1,1):new Date(this.currentDate.getFullYear()-1,11,1)).getDay(),a=e.getMonth(),n=this.currentDate.getDate(),c=s.default.getDayCount(e.getFullYear(),a);this.maxNumLabel.string=c+"",this.monthLabel.string=i.default.get("L"+(a+309));for(var l=1,u=0;u<6;u++)for(var d=0;d<7;d++)if(o>0)this.dayItems[u][d].setData(-1),o--;else if(l<=c){if(this.isNowMonth){var p=l>n?-2:t[l-1]||0;l==n?this.dayItems[u][d].setData(p,l,2!=p):this.dayItems[u][d].setData(p,l)}else this.dayItems[u][d].setData(t[l-1]||0,l);l++}else this.dayItems[u][d].setData(-1);var h=r.Game.userData.FBData.trophy[this.isNowMonth?this.currentDate.getMonth():this.currentDate.getMonth()-1];h==c?(this.TrophyPro.width=this.TrophyProSize,this.TrophyDot[0].active=!0,this.TrophyDot[1].active=!0,this.TrophyDot[2].active=!0):h>=20?(this.TrophyPro.width=this.TrophyDot[1].x+(this.TrophyProSize-this.TrophyDot[1].x)/(c-20)*(h-20),this.TrophyDot[0].active=!0,this.TrophyDot[1].active=!0,this.TrophyDot[2].active=!1):h>=10?(this.TrophyPro.width=this.TrophyDot[0].x+(this.TrophyDot[1].x-this.TrophyDot[0].x)/10*(h-10),this.TrophyDot[0].active=!0,this.TrophyDot[1].active=!1,this.TrophyDot[2].active=!1):(this.TrophyPro.width=this.TrophyDot[0].x/10*h,this.TrophyDot[0].active=!1,this.TrophyDot[1].active=!1,this.TrophyDot[2].active=!1)},__decorate([u({type:cc.Node,tooltip:"\u5956\u676f\u8fbe\u6807\u8fdb\u5ea6\u6761"})],t.prototype,"TrophyPro",void 0),__decorate([u({tooltip:"\u5956\u676f\u8fbe\u6807\u8fdb\u5ea6\u6761\u5bbd\u5ea6"})],t.prototype,"TrophyProSize",void 0),__decorate([u({type:cc.Node,tooltip:"\u5956\u676f\u8fbe\u6807\u5706\u5708"})],t.prototype,"TrophyDot",void 0),__decorate([u(cc.Label)],t.prototype,"maxNumLabel",void 0),__decorate([u(cc.Label)],t.prototype,"monthLabel",void 0),__decorate([u(cc.Label)],t.prototype,"weekLabel",void 0),__decorate([u(cc.Prefab)],t.prototype,"dayItemPre",void 0),__decorate([u(cc.Node)],t.prototype,"dayContiner",void 0),__decorate([u(cc.Node)],t.prototype,"daySelectIcon",void 0),__decorate([l],t)}(n.default);o.default=d,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../data/DaliyHelper":"DaliyHelper","./content/DayItem":"DayItem"}],DaliyWindow:[function(e,t,o){"use strict";cc._RF.push(t,"92c95quh55KVJiOnS3qHNOU","DaliyWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../global/AudioMgr"),i=e("./content/DayItem"),r=e("../../core/global/I18N"),n=e("../../core/global/Emitter"),s=e("../../core/util/DateUtils"),c=e("../../Game"),l=e("../../core/UI/WWindow"),u=e("../UICenter"),d=e("../../data/DaliyHelper"),p=e("../../global/Const"),h=cc._decorator,f=h.ccclass,g=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.TrophyIcon=null,t.TrophyRes=[],t.TrophyPro=null,t.TrophyProSize=0,t.TrophyDot=[],t.maxNumLabel=null,t.monthLabel=null,t.monthPageBtn=[],t.weekLabel=[],t.dayItemPre=null,t.dayContiner=null,t.daySelectIcon=null,t.playBtnLabel=null,t.dayStatusSp=null,t.labDayStatus=null,t.dayStatusRes=[],t.labTotal=null,t.labCurrMonth=null,t.labColors=[],t.effNode=null,t.dayItems=[[],[],[],[],[],[]],t.currentDate=new Date,t.isNowMonth=!0,t.selectMonth=0,t.mCompletedDay=-1,t}return __extends(t,e),t.prototype.onLoad=function(){var t;e.prototype.onLoad.call(this);for(var o=0;o<6;o++)for(var a=0;a<7;a++)t=cc.instantiate(this.dayItemPre),this.dayContiner.addChild(t),this.dayItems[o][a]=t.getComponent(i.default).setPos(o,a);this.monthPageBtn[0].node.active=!0,this.monthPageBtn[1].node.active=!1,this.selectMonth=this.currentDate.getMonth(),this.initLanguage(),this.initUI(),this.dayContiner.on("itemClick",this.itemClickHandler,this),n.Emitter.register(p.default.eUpdateDaliyInfo,this.updateDaliyInfo,this),n.Emitter.register("languageChange",this.initLanguage,this)},t.prototype.start=function(){var e=this;setTimeout(function(){e.itemClickHandler(e._selectItem)},100)},t.prototype.updateDaliyInfo=function(e){if(e==this.isNowMonth)this.initUI();else{var t=0;e&&(t=1),this.changePage(null,t)}},t.prototype.initLanguage=function(){for(var e=0;e<7;e++)this.weekLabel[e].string=r.default.get("L32"+(e+1));this.title.string=r.default.get("L112"),this._selectItem&&this._selectItem.type>0?this.playBtnLabel.string=r.default.get("L381"):this.playBtnLabel.string=r.default.get("L524"),this.monthLabel.string=r.default.get("L"+(this.selectMonth+309))},t.prototype.show=function(t){void 0===t&&(t=-1),e.prototype.show.call(this);var o=new Date;if(this.currentDate.getDate()!=o.getDate()&&(this.currentDate=o,this.initUI()),0==o.getMonth()&&(this.monthPageBtn[0].node.active=!1),this.mCompletedDay=t,-1!=t){var a=this.findSelectItem(t);this._selectItem&&a?(this._selectItem!=a&&this.itemClickHandler(a),c.Game.gameMgr.DaliyInfo[4]||a.resetKingIcon()):this.mCompletedDay=-1}},t.prototype.onShow=function(){var t=this;e.prototype.onShow.call(this),-1!=this.mCompletedDay&&0==c.Game.gameMgr.DaliyInfo[4]&&this.challengeCompleteAnimate(function(){t._selectItem.complteAnimation()})},t.prototype.initUI=function(){var e,t=d.default.getDaliyData(this.isNowMonth),o=(e=this.isNowMonth?new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),1):this.currentDate.getMonth()>0?new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()-1,1):new Date(this.currentDate.getFullYear()-1,11,1)).getDay(),a=e.getMonth();this.selectMonth=a;var i=this.currentDate.getDate(),n=d.default.getDayCount(e.getFullYear(),a);this.maxNumLabel.string=n+"",this.monthLabel.string=r.default.get("L"+(a+309));for(var s=1,l=0;l<6;l++)for(var u=0;u<7;u++)if(o>0)this.dayItems[l][u].setData(-1),o--;else if(s<=n){if(this.isNowMonth){var p=s>i?-2:t[s-1]||0;s==i?(this.dayItems[l][u].setData(p,s,2!=p),this.itemClickHandler(this.dayItems[l][u])):this.dayItems[l][u].setData(p,s)}else this.dayItems[l][u].setData(t[s-1]||0,s),s==n&&this.itemClickHandler(this.dayItems[l][u]);s++}else this.dayItems[l][u].setData(-1);var h=d.default.getTrophyData(this.isNowMonth?this.currentDate.getMonth():this.currentDate.getMonth()-1);h==n?(this.TrophyPro.width=this.TrophyProSize,this.TrophyIcon.spriteFrame=this.TrophyRes[3]):h>=20?(this.TrophyPro.width=this.TrophyDot[1].x+(this.TrophyProSize-this.TrophyDot[1].x)/(n-20)*(h-20),this.TrophyIcon.spriteFrame=this.TrophyRes[2]):h>=10?(this.TrophyPro.width=this.TrophyDot[0].x+(this.TrophyDot[1].x-this.TrophyDot[0].x)/10*(h-10),this.TrophyIcon.spriteFrame=this.TrophyRes[1]):(this.TrophyPro.width=this.TrophyDot[0].x/10*h,this.TrophyIcon.spriteFrame=this.TrophyRes[0]);var f=c.Game.userData.trophyTotal;this.labCurrMonth.string=r.default.get("L329")+": "+h,this.labTotal.string=r.default.get("L328")+": "+f},t.prototype.itemClickHandler=function(e){this._selectItem&&this._selectItem!=e&&this._selectItem.unselect(),this._selectItem=e,this._selectItem.select(),e.type>0?(this.playBtnLabel.string=r.default.get("L381"),this.dayStatusSp.spriteFrame=this.dayStatusRes[0],this.labDayStatus.string=r.default.get("L382"),this.labDayStatus.node.color=this.labColors[0]):(this.playBtnLabel.string=r.default.get("L524"),this.dayStatusSp.spriteFrame=this.dayStatusRes[1],this.labDayStatus.string=r.default.get("L332"),this.labDayStatus.node.color=this.labColors[1])},t.prototype.changePage=function(e,t){var o=1==t;this.isNowMonth!=o&&(this.isNowMonth=o,o?(0==this.currentDate.getMonth()?this.monthPageBtn[0].node.active=!1:this.monthPageBtn[0].node.active=!0,this.monthPageBtn[1].node.active=!1):(this.monthPageBtn[0].node.active=!1,this.monthPageBtn[1].node.active=!0),this.initUI())},t.prototype.getSelectMonth=function(){return this.isNowMonth?this.currentDate.getMonth():this.currentDate.getMonth()-1},t.prototype.play=function(){var e=1e4*this.currentDate.getFullYear();e+=100*this.getSelectMonth(),e+=this._selectItem.value;var t=this._selectItem.type>0;c.Game.gameMgr.DaliyInfo=[s.default.dateFormat(this.currentDate),this.isNowMonth,this._selectItem.value,e,t],c.Game.gameMgr.startDaliy(),this.toBack()},t.prototype.showTrophyMonth=function(){u.UICenter.openTrophyMonth()},t.prototype.close=function(){a.AudioMgr.clickOK(),this.toBack()},t.prototype.onTipClick=function(){a.AudioMgr.clickOK(),u.UICenter.openDailyHelpWindow()},t.prototype.findSelectItem=function(e){for(var t=null,o=!1,a=0;a<this.dayItems.length&&!o;a++)for(var i=0;i<this.dayItems[a].length;i++){var r=this.dayItems[a][i];if(null!=r&&r.value==e){t=r,o=!0;break}}return t},t.prototype.challengeCompleteAnimate=function(e){this.effNode.active=!0,this.effNode.scale=0,cc.tween(this.effNode).to(.2,{scale:1.2}).to(.2,{scale:1}).delay(.5).to(.2,{scale:0}).call(function(){e&&e()}).start()},__decorate([g(cc.Label)],t.prototype,"title",void 0),__decorate([g(cc.Sprite)],t.prototype,"TrophyIcon",void 0),__decorate([g(cc.SpriteFrame)],t.prototype,"TrophyRes",void 0),__decorate([g({type:cc.Node,tooltip:"\u5956\u676f\u8fbe\u6807\u8fdb\u5ea6\u6761"})],t.prototype,"TrophyPro",void 0),__decorate([g({tooltip:"\u5956\u676f\u8fbe\u6807\u8fdb\u5ea6\u6761\u5bbd\u5ea6"})],t.prototype,"TrophyProSize",void 0),__decorate([g({type:cc.Node,tooltip:"\u5956\u676f\u8fbe\u6807\u5706\u5708"})],t.prototype,"TrophyDot",void 0),__decorate([g(cc.Label)],t.prototype,"maxNumLabel",void 0),__decorate([g(cc.Label)],t.prototype,"monthLabel",void 0),__decorate([g(cc.Button)],t.prototype,"monthPageBtn",void 0),__decorate([g(cc.Label)],t.prototype,"weekLabel",void 0),__decorate([g(cc.Prefab)],t.prototype,"dayItemPre",void 0),__decorate([g(cc.Node)],t.prototype,"dayContiner",void 0),__decorate([g(cc.Node)],t.prototype,"daySelectIcon",void 0),__decorate([g(cc.Label)],t.prototype,"playBtnLabel",void 0),__decorate([g(cc.Sprite)],t.prototype,"dayStatusSp",void 0),__decorate([g(cc.Label)],t.prototype,"labDayStatus",void 0),__decorate([g(cc.SpriteFrame)],t.prototype,"dayStatusRes",void 0),__decorate([g(cc.Label)],t.prototype,"labTotal",void 0),__decorate([g(cc.Label)],t.prototype,"labCurrMonth",void 0),__decorate([g(cc.Color)],t.prototype,"labColors",void 0),__decorate([g(cc.Node)],t.prototype,"effNode",void 0),__decorate([f],t)}(l.default);o.default=m,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/util/DateUtils":"DateUtils","../../data/DaliyHelper":"DaliyHelper","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../UICenter":"UICenter","./content/DayItem":"DayItem"}],DataManager:[function(e,t,o){"use strict";cc._RF.push(t,"103fbGLB6JFl7qMCQHB0zLY","DataManager"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../core/global/I18N"),i=e("../core/global/Emitter"),r=e("../data/CardData"),n=e("../core/stream/ByteArray"),s=e("../core/stream/zlib/FlateStream"),c=e("../Game"),l=e("../core/Table/TabManager"),u=e("../core/util/ResUtil"),d=function(){function e(){}return Object.defineProperty(e,"completedCount",{get:function(){return this.mCompletedCount},set:function(e){this.mCompletedCount=e,this.progressCall&&this.progressCall(this.mCompletedCount,this.totalCount)},enumerable:!1,configurable:!0}),e.getCard=function(t,o){var a=this.getCardFaceName(t,o);return e.cardBaseRES.getSpriteFrame(a)},e.getCardFaceName=function(t,o){return t instanceof r.CardData?e.RES_MAP[t.type-1]+t.value:e.RES_MAP[t]+o},e.getCardBg=function(t){return e.cardBG_RES.getSpriteFrame(t)},e.getGameBg=function(t){return e.gameBG_RES.getSpriteFrame(t)},e.getDefaultCardBg=function(){return e.cardBG_RES.getSpriteFrame("pokerbg_1")},e.getDefaultGameBg=function(){return e.gameBG_RES.getSpriteFrame("bgtable_1")},e.getGameBgBig=function(e,t,o){"default"==e&&(e="bgtable_1"),c.Game.gameRes.getBgSpriteFrame(e,t,o)},e.loadData=function(t,o,a){e.onUserDataLaded(t,o,a)},e.onUserDataLaded=function(e,t,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){switch(a.label){case 0:return this.progressCall=e,[4,l.TabManager.asyncLoad()];case 1:return a.sent(),[4,this.loadI18n(c.Game.userData.FBData.l)];case 2:return a.sent(),[4,this.loadI18nFont(c.Game.userData.FBData.l)];case 3:return a.sent(),[4,this.loadCardLib()];case 4:return a.sent(),[4,this.loadAltasRes()];case 5:return a.sent(),[4,this.loadGameBgRes()];case 6:return a.sent(),[4,this.loadCardBase()];case 7:return a.sent(),[4,this.preloadMusic()];case 8:return a.sent(),t.call(o),[2]}})})},e.loadCardLib=function(){var e=this;return this.datasURL=["data/1card/solitaire1","data/1card/solitaire2","data/1card/solitaire3","data/1card/solitaire4","data/1card/solitaire5","data/1card/solitaire6","data/1card/solitaire7","data/1card/solitaire8","data/3cards/solitaire1"],new Promise(function(t){for(var o=0,a=e.datasURL.length,i={},r=function(r){var l=r;cc.resources.load(e.datasURL[l],cc.BufferAsset,function(r,u){if(r&&console.error(r),i[l]=u,e.completedCount++,++o===a){for(var d=0;d<a;d++){var p=new n.default(i[d]._buffer),h=new s.default(p.bytes);(p=new n.default(h.getBytes(h.bufferLength))).position=0,c.Game.cardLib.PushCards(p)}t()}})},l=0;l<a;l++)r(l)})},e.loadI18n=function(e){var t=this;return new Promise(function(o){e=a.default.getLocalKey(e),u.ResUtil.loadRes(a.default.defaultLU,u.eResType.I18n,function(i){a.default.defaultLU!=e?u.ResUtil.loadRes(e,u.eResType.I18n,function(e){a.default.loadProperty(i.text,e.text),t.completedCount++,o()}):(a.default.loadProperty(i.text,null),t.completedCount++,o())})})},e.loadI18nFont=function(e){var t=this;return new Promise(function(o){e=a.default.getLocalKey(e),u.ResUtil.loadRes(a.default.defaultLU,u.eResType.Font,function(i){a.default.defaultLU!=e?u.ResUtil.loadRes(e,u.eResType.Font,function(e){a.default.initFont(i,e),t.completedCount++,o()},function(){a.default.initFont(i,null),t.completedCount++,o()}):(a.default.initFont(i,null),t.completedCount++,o())})})},e.loadAltasRes=function(){var t=this;return new Promise(function(o){if(0!=e.resList.length)for(var a=0,i=function(i){u.ResUtil.loadRes(i.url,u.eResType.Atlas,function(r){e[i.key]=r,a++,t.completedCount++,a==t.resList.length&&o()})},r=0,n=t.resList;r<n.length;r++)i(n[r]);else l.TabManager.loadTable(o)})},e.loadCardBase=function(){var t=this,o=c.Game.userData.cardFace;return"default"==o&&(o="cardBase1"),new Promise(function(a){u.ResUtil.loadRes(o,u.eResType.Atlas,function(o){e.cardBaseRES=o,t.completedCount++,a()})})},e.preLoadUI=function(){var e=this;return new Promise(function(t){var o="prefab/LobbyWindow";cc.resources.load(o,cc.Prefab,function(a,i){e.uiPrefabProgress=1,a||c.Game.uiMgr.preLoadRes.add(o,i),t()})})},e.loadGameScene=function(){var e=this;return new Promise(function(t){cc.director.loadScene("db://assets/scene/Game.fire",function(){e.completedCount++,t()})})},e.loadDataResLazy=function(){if(0==e.resListLazy.length)return e.LazyLoaded=!0,i.Emitter.fire("lazyDataLoaed"),void e.loadMusic();var t=e.resListLazy.shift();cc.resources.load(t.url,t.type,function(o,a){e[t.key]=a,e.loadDataResLazy()})},e.preloadMusic=function(){var t=this;return e.soundMap={},new Promise(function(o){cc.resources.load("sound/se_newdeal",cc.AudioClip,function(a,i){e.soundMap.se_newdeal=i,t.completedCount++,o()})})},e.loadMusic=function(){for(var t=["hint","undo","victory","victory_crown","se_newdeal","se_errowcard","se_placecard","se_placewincard","se_btnclick","se_drawcard1","se_drawcard3","se_resetdeckcard","g_victory"],o=t.length,a=0,r=function(r){var n=t[r];cc.resources.load("sound/"+n,cc.AudioClip,function(t,r){e.soundMap[n]=r,o==++a&&i.Emitter.fire("soundLoaded")})},n=0;n<o;n++)r(n)},e.getSoundRes=function(t){return e.soundMap[t]},e.loadGameBgRes=function(){var e=this;return new Promise(function(t){e.completedCount++,c.Game.gameRes.loadBgs(t)})},e.RES_MAP=["club","heart","spade","block"],e.LazyLoaded=!1,e.mCompletedCount=0,e.totalCount=16,e.uiPrefabProgress=0,e.resList=[{url:"cardBG",key:"cardBG_RES"},{url:"gameBG",key:"gameBG_RES"}],e.resListLazy=[],e.soundMap={},e}();o.default=d,cc._RF.pop()},{"../Game":"Game","../core/Table/TabManager":"TabManager","../core/global/Emitter":"Emitter","../core/global/I18N":"I18N","../core/stream/ByteArray":"ByteArray","../core/stream/zlib/FlateStream":"FlateStream","../core/util/ResUtil":"ResUtil","../data/CardData":"CardData"}],DataTools:[function(e,t,o){"use strict";cc._RF.push(t,"c73e2JX89lGrrhHSv1ppI2A","DataTools"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Game"),i=e("../core/UI/DialogBox"),r=e("../core/util/StrUtil"),n=e("../core/global/I18N"),s=e("../sdk/SDKConst"),c=e("../view/window/GoldWindow"),l=e("../view/UICenter"),u=e("../global/GameConfig"),d=e("../core/UI/Toast"),p=e("../App"),h=function(){function e(){}return e.timeNewRecord=function(){var e=a.Game.gameMgr.oldReport;return!(e[3]>0&&e[3]<=a.Game.userData.time)},e.stepNewRecord=function(){var e=a.Game.gameMgr.oldReport;return!(e[3]>0&&e[5]<=a.Game.userData.step)},e.scoreNewRecord=function(){return!(a.Game.gameMgr.oldReport[7]>=a.Game.userData.score)},e.todayBestNewRecord=function(){return!(a.Game.gameMgr.oldReport[13]>=a.Game.userData.getTodayBestScore())},e.bestScoreNewRecord=function(){return!(a.Game.gameMgr.oldReport[7]>=a.Game.userData.score)},e.addGold=function(e){var t=a.Game.userData.goldData;t.gold+=e,a.Game.userData.goldData=t},e.buyGoodsDialog=function(e,t,o){var a=new i.DialogBoxData;a.initWith(i.eDialogButtonType.CONFIRM|i.eDialogButtonType.CANCEL,r.default.stringFormat(n.default.get("L856"),e)),a.callback=function(e){e==i.eDialogButtonType.CONFIRM?t():o&&o()},i.default.showWith(a)},e.buyGoods=function(e,t){var o=this;this.buyGoodsDialog(e,function(){a.Game.userData.goldData.gold>=e?t&&t():u.default.SDK.rewardAvailability()?o.goldNotEnough():d.default.showWith(n.default.get("L858"))})},e.goldNotEnough=function(){var t=this,o=new i.DialogBoxData;o.initWith(i.eDialogButtonType.CONFIRM|i.eDialogButtonType.CANCEL,r.default.stringFormat(n.default.get("L857"),50)),o.callback=function(o){o==i.eDialogButtonType.CONFIRM&&a.Game.sdkPipeline.showReward(function(t){t&&(l.UICenter.openGoldWindow(a.Game.userData.goldData.gold),c.default.animate(p.default.instance.node,50,function(){e.addGold(50)}))},t,s.default.AD_PLAY_POS_CARD_BG)},i.default.showWith(o)},e.isDaliyCompleted=function(){var e=new Date;return a.Game.userData.FBData.currentMonth[e.getDate()-1]>=1},e.addMagic=function(e){a.Game.userData.magicCount+=e,l.UICenter.openMagicWindow(e)},e.checkMagicEnough=function(){var e=this;if(a.Game.userData.magicCount>0)return!0;if(u.default.SupportGold&&a.Game.userData.goldData.gold>=50)return this.buyGoodsDialog(50,function(){var t=a.Game.userData.goldData;t.gold-=50,a.Game.userData.goldData=t,e.addMagic(1),l.UICenter.closeGoldWindow()},function(){l.UICenter.closeGoldWindow()}),l.UICenter.openGoldWindow(),!1;var t=new i.DialogBoxData;return t.initWith(i.eDialogButtonType.CONFIRM|i.eDialogButtonType.CANCEL,r.default.stringFormat(n.default.get("L861"),1)),t.callback=function(t){t==i.eDialogButtonType.CONFIRM&&a.Game.sdkPipeline.showReward(function(t){t&&e.addMagic(1)},e,s.default.AD_PLAY_POS_BUY_MAGIC)},i.default.showWith(t),!1},e}();o.default=h,cc._RF.pop()},{"../App":"App","../Game":"Game","../core/UI/DialogBox":"DialogBox","../core/UI/Toast":"Toast","../core/global/I18N":"I18N","../core/util/StrUtil":"StrUtil","../global/GameConfig":"GameConfig","../sdk/SDKConst":"SDKConst","../view/UICenter":"UICenter","../view/window/GoldWindow":"GoldWindow"}],DateUtils:[function(e,t,o){"use strict";cc._RF.push(t,"f7a0bfqKb9CxLvUo3p0BG/+","DateUtils"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function e(){}return e.timeFormat=function(e,t,o){if(void 0===t&&(t=!0),void 0===o&&(o=2),0==e)return 1==o?"00:00:00":"00:00";var a=Math.ceil(t?e/1e3:e),i=a%60,r=(i<10?"0":"")+i;return a-=a%60,a/=60,o>0?(r=((i=a%60)<10?"0":"")+i+":"+r,a-=a%60,(1==o||a>0)&&(r=((i=a/60)<10?"0":"")+i+":"+r)):r=(a<10?"0":"")+a+":"+r,r},e.dateFormat=function(e,t){void 0===t&&(t=!1);var o=e.getFullYear()+"-",a=e.getMonth()+1;t&&a<10&&(o+="0"),o+=a+"-";var i=e.getDate();return t&&i<10&&(o+="0"),o+i},e.dateNumFormat=function(e){return Math.floor(e/1e4)+"-"+(Math.floor(e%1e4/100)+1)+"-"+e%100},e.getDateNum=function(e,t,o){return 1e4*e+100*t+o},e.splitDate=function(e){if(!e)return{};var t=e.split("-");return 3!=t.length?{}:{year:Number.parseInt(t[0]),month:Number.parseInt(t[1]),day:Number.parseInt(t[2])}},e.getUintNumber=function(t){for(var o=0;t>1e3&&(t/=1e3,!(++o>=e.uints.length-1)););return 0==o?Math.ceil(t)+"":Number(t.toFixed(2))+e.uints[o]},e.getSameDayZeroTimeStamp=function(){var e=new Date((new Date).setHours(0,0,0,0)),t=Math.floor(e.getTime()/1e3);return console.log("\u96f6\u9ede\u6642\u9593\u6233\uff1a"+t),t},e.uints=["","K","M","B","t","q","Q","s","S","o","n","d","U","D","T","Qt","Qd","Sd","St","O","N","v","c"],e}();o.default=a,cc._RF.pop()},{}],DayItem:[function(e,t,o){"use strict";cc._RF.push(t,"2a814Lo1QpBpq2M5vbTQQR5","DayItem"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,r=a.property,n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.king=null,t.bgRes=[],t.bgSp=null,t.row=0,t.col=0,t._type=0,t.value=0,t}var o;return __extends(t,e),o=t,t.prototype.setPos=function(e,t){return this.row=e,this.col=t,this},t.prototype.setData=function(e,t,o){void 0===e&&(e=0),void 0===t&&(t=0),void 0===o&&(o=!1),this.type=e,this.value=t,this.label.string=t+"",this.bgSp.node.active=e>=0},t.prototype.changeSelect=function(){this.type>=0&&this.node.getParent().emit("itemClick",this)},Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){if(this._type=e,-1==e)return this.label.node.active=!1,void(this.king.node.active=!1);0==e?(this.label.node.active=!0,this.king.node.active=!1):-2==e?(this.label.node.active=!0,this.king.node.active=!1):(this.label.node.active=!0,this.king.node.active=!0)},enumerable:!1,configurable:!0}),t.prototype.select=function(){this.bgSp.spriteFrame=this.bgRes[1],this.label.node.color=o.colors[1]},t.prototype.unselect=function(){this.bgSp.spriteFrame=this.bgRes[0],this.label.node.color=o.colors[0]},t.prototype.resetKingIcon=function(){this.king.node.scale=0},t.prototype.complteAnimation=function(){cc.tween(this.king.node).to(.2,{scale:1.1}).to(.2,{scale:1}).start()},t.colors=[new cc.Color(74,83,110),new cc.Color(255,255,255)],__decorate([r(cc.Label)],t.prototype,"label",void 0),__decorate([r(cc.Sprite)],t.prototype,"king",void 0),__decorate([r(cc.SpriteFrame)],t.prototype,"bgRes",void 0),__decorate([r(cc.Sprite)],t.prototype,"bgSp",void 0),o=__decorate([i],t)}(cc.Component);o.default=n,cc._RF.pop()},{}],DecodeStream:[function(e,t,o){"use strict";cc._RF.push(t,"10191/RVFBBPrBkQjiTRtLA","DecodeStream"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype.ensureBuffer=function(e){var t=this.buffer,o=t?t.byteLength:0;if(e<o)return t;for(var a=512;a<e;)a<<=1;for(var i=new Uint8Array(a),r=0;r<o;++r)i[r]=t[r];return this.buffer=i},e.prototype.getBytes=function(e){var t=this.pos;if(e){this.ensureBuffer(t+e);for(var o=t+e;!this.eof&&this.bufferLength<o;)this.readBlock();var a=this.bufferLength;o>a&&(o=a)}else{for(;!this.eof;)this.readBlock();o=this.bufferLength}return this.pos=o,this.buffer.subarray(t,o)},e.prototype.readBlock=function(){},e}();o.default=a,cc._RF.pop()},{}],DefaultPaySDK:[function(e,t,o){"use strict";cc._RF.push(t,"ac7b9xtQQVCrJuTheiHVndX","DefaultPaySDK"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function e(){}return e.prototype.PayisLoaded=function(){return!0},e.prototype.purchase=function(e,t,o){setTimeout(function(){o("orderid",0)},1e3)},e.prototype.suppleMent=function(e){setTimeout(function(){e("productId","orderId",0)},1e3)},e}();o.default=a,cc._RF.pop()},{}],DefaultSDK:[function(e,t,o){"use strict";cc._RF.push(t,"c4c5c6Q/dBB45sc18FTQEH0","DefaultSDK"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../global/GameConfig"),i=e("./SDKConst"),r=cc._decorator,n=r.ccclass,s=(r.property,function(){function e(){}var t;return t=e,e.prototype.logEvent=function(){},e.prototype.logEventToFirebase=function(){},e.prototype.getAFStatus=function(){return 1},e.prototype.setAdUid=function(){},e.prototype.ADisLoaded=function(e){return void 0===e&&(e=i.default.AD_TYPE_REWARD),!0},e.prototype.initAD=function(){},e.prototype.loadAD=function(e,t){void 0===t&&(t=i.default.AD_TYPE_REWARD)},e.prototype.showInterstitial=function(e,t,o){e&&e.call(o,!0),t&&t.call(o)},e.prototype.showReward=function(e,t,o){e&&e.call(o,!0),t&&t.call(o,!0)},e.prototype.displayBannerAD=function(){},e.prototype.hasBannerAD=function(){return!1},e.prototype.rewardAvailability=function(){return!0},e.prototype.SDKCallBack=function(){},e.prototype.getLocal=function(){return"zh_CN"},e.prototype.getData=function(e,o,a){var i=cc.sys.localStorage.getItem(t.localStorageKey),r=i?JSON.parse(i):{};if(e){for(var n={},s=0,c=e;s<c.length;s++){var l=c[s];n[l]=r[l]}o.call(a,n)}else o.call(a,r)},e.prototype.setData=function(e){var o=cc.sys.localStorage.getItem(t.localStorageKey),a=o?JSON.parse(o):{};for(var i in e)a[i]=e[i];cc.sys.localStorage.setItem(t.localStorageKey,JSON.stringify(a))},e.prototype.showRateDialog=function(){},e.prototype.getIsRated=function(){return!1},e.prototype.addPushMessage=function(e,t){console.log("add push message",e,t)},e.prototype.getVersion=function(){return a.default.VERSION},e.prototype.smbCommand=function(){},e.localStorageKey="game_MD_1",t=__decorate([n],e)}());o.default=s,cc._RF.pop()},{"../global/GameConfig":"GameConfig","./SDKConst":"SDKConst"}],DescOrder2CN:[function(e,t,o){"use strict";cc._RF.push(t,"d1bb54cvjdFSbuNP3j9jm7d","DescOrder2CN"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(t,o){for(var a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];var r=e.call(this,t,o)||this;return r.op=o,r.params=[],r.params=a,r}return __extends(t,e),t.prototype.onAction=function(t){if(!this.tog){console.log("DescOrder2CN:",t);for(var o=1,a=0,i=0;i<t.length&&(o<0&&(o=1),t[i]==this.params[o]);i++)o--,a++;a>=this.params[2]&&e.prototype.onAction.call(this,!0)}},t}(e("./Toggler").default);o.default=a,cc._RF.pop()},{"./Toggler":"Toggler"}],DialogBox:[function(e,t,o){"use strict";cc._RF.push(t,"eef7d2uQMlBKaBloXlg8PYw","DialogBox"),Object.defineProperty(o,"__esModule",{value:!0}),o.DialogBoxData=o.eDialogButtonType=void 0;var a,i=e("./WWindow"),r=e("../global/I18N"),n=e("../util/StrUtil"),s=e("../util/ResUtil"),c=e("../../Game"),l=e("../../global/AudioMgr");(function(e){e[e.CONFIRM=1]="CONFIRM",e[e.CANCEL=2]="CANCEL",e[e.CLOSE=4]="CLOSE"})(a=o.eDialogButtonType||(o.eDialogButtonType={}));var u=function(){function e(){this.type=a.CONFIRM,this.callback=null,this.clickToBack=!1}return e.prototype.initWith=function(e,t,o,a,i){for(var r=[],s=5;s<arguments.length;s++)r[s-5]=arguments[s];this.type=e,this.title=o,n.default.isNullOrEmpty(t)||(this.content=n.default.stringFormat(t,r)),n.default.isNullOrEmpty(a)?this.confirm=this.getDefaultConfirmText():this.confirm=a,n.default.isNullOrEmpty(i)?this.cancel=this.getDefaultCancelText():this.cancel=i},e.prototype.getDefaultConfirmText=function(){return r.default.get("L1")},e.prototype.getDefaultCancelText=function(){return r.default.get("L2")},e}();o.DialogBoxData=u;var d=cc._decorator,p=d.ccclass,h=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mDialogDatas=[],t.mCurDialogData=null,t.labelTitle=null,t.labelText=null,t.labelConfirm=null,t.labelCancel=null,t.btnConfirm=null,t.btnCancel=null,t}var o;return __extends(t,e),o=t,t.instance=function(e){var t=this;null==this._Instance?s.ResUtil.loadRes("DialogBox",s.eResType.UIPrefab,function(a){var i=cc.instantiate(a);i.parent=c.Game.uiMgr.topUI,t._Instance=i.getComponent(o),c.Game.uiMgr.initUIClickAudio(i),e(t._Instance)}):(this._Instance.node.setSiblingIndex(1e4),e(this._Instance))},t.showWith=function(e){null!=e&&this.instance(function(t){t.mCurDialogData?t.mDialogDatas.push(e):t.opend(e)})},t.prototype.onHide=function(){if(this.close(this.mCurrentButtonType),this.mDialogDatas.length>0){var t=this.mDialogDatas.shift();this.opend(t)}else this.mCurDialogData=null,e.prototype.onHide.call(this)},t.prototype.opend=function(t){this.mCurDialogData=t,this.setText(this.labelTitle,t.title),this.setText(this.labelText,t.content),this.setText(this.labelConfirm,t.confirm),this.setText(this.labelCancel,t.cancel),this.setButtonActive(this.btnConfirm,this.isShowButton(t.type,a.CONFIRM)),this.setButtonActive(this.btnCancel,this.isShowButton(t.type,a.CANCEL)),e.prototype.show.call(this),t.clickToBack&&this.node.once(cc.Node.EventType.TOUCH_END,this.toBack,this)},t.prototype.setButtonActive=function(e,t){e&&(e.active=t)},t.prototype.setText=function(e,t){e&&(n.default.isNullOrEmpty(t)?e.string="":e.string=t)},t.prototype.isShowButton=function(e,t){return(e&t)==t},t.prototype.close=function(e){this.mCurDialogData.callback&&this.mCurDialogData.callback(e)},t.prototype.hide=function(){e.prototype.hide.call(this),l.AudioMgr.clickOK()},t.prototype.onConfirm=function(){this.mCurrentButtonType=a.CONFIRM,this.hide()},t.prototype.onCancel=function(){this.mCurrentButtonType=a.CANCEL,this.hide()},t.prototype.onClose=function(){this.mCurrentButtonType=a.CLOSE,this.hide()},t._Instance=null,__decorate([h(cc.RichText)],t.prototype,"labelTitle",void 0),__decorate([h(cc.RichText)],t.prototype,"labelText",void 0),__decorate([h(cc.Label)],t.prototype,"labelConfirm",void 0),__decorate([h(cc.Label)],t.prototype,"labelCancel",void 0),__decorate([h(cc.Node)],t.prototype,"btnConfirm",void 0),__decorate([h(cc.Node)],t.prototype,"btnCancel",void 0),o=__decorate([p],t)}(i.default);o.default=f,cc._RF.pop()},{"../../Game":"Game","../../global/AudioMgr":"AudioMgr","../global/I18N":"I18N","../util/ResUtil":"ResUtil","../util/StrUtil":"StrUtil","./WWindow":"WWindow"}],DialogWarnBox:[function(e,t,o){"use strict";cc._RF.push(t,"00b2a/7KqdH0aZXK0H7W5hW","DialogWarnBox"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./DialogBox"),i=e("../util/ResUtil"),r=e("../../Game"),n=e("./WWindow"),s=e("../util/StrUtil"),c=e("../../global/AudioMgr"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mDialogDatas=[],t.mCurDialogData=null,t.labelTitle=null,t.labelText=null,t.labelConfirm=null,t.labelCancel=null,t.btnConfirm=null,t.btnCancel=null,t.btnClose=null,t}var o;return __extends(t,e),o=t,t.instance=function(e){var t=this;null==this._Instance?i.ResUtil.loadRes("DialogWarnBox",i.eResType.UIPrefab,function(a){var i=cc.instantiate(a);i.parent=r.Game.uiMgr.topUI,t._Instance=i.getComponent(o),r.Game.uiMgr.initUIClickAudio(i),e(t._Instance)}):(this._Instance.node.setSiblingIndex(1e4),e(this._Instance))},t.showWith=function(e){null!=e&&this.instance(function(t){t.mCurDialogData?t.mDialogDatas.push(e):t.opend(e)})},t.prototype.onHide=function(){if(this.close(this.mCurrentButtonType),this.mDialogDatas.length>0){var t=this.mDialogDatas.shift();this.opend(t)}else this.mCurDialogData=null,e.prototype.onHide.call(this)},t.prototype.opend=function(t){this.mCurDialogData=t,this.setText(this.labelTitle,t.title),this.setText(this.labelText,t.content),this.setText(this.labelConfirm,t.confirm),this.setText(this.labelCancel,t.cancel),this.setButtonActive(this.btnClose,this.isShowButton(t.type,a.eDialogButtonType.CLOSE)),this.setButtonActive(this.btnConfirm,this.isShowButton(t.type,a.eDialogButtonType.CONFIRM)),this.setButtonActive(this.btnCancel,this.isShowButton(t.type,a.eDialogButtonType.CANCEL)),e.prototype.show.call(this)},t.prototype.setButtonActive=function(e,t){e&&(e.active=t)},t.prototype.setText=function(e,t){e&&(s.default.isNullOrEmpty(t)?e.string="":e.string=t)},t.prototype.isShowButton=function(e,t){return(e&t)==t},t.prototype.close=function(e){this.mCurDialogData.callback&&this.mCurDialogData.callback(e)},t.prototype.hide=function(){e.prototype.hide.call(this),c.AudioMgr.clickOK()},t.prototype.onConfirm=function(){this.mCurrentButtonType=a.eDialogButtonType.CONFIRM,this.hide()},t.prototype.onCancel=function(){this.mCurrentButtonType=a.eDialogButtonType.CANCEL,this.hide()},t.prototype.onClose=function(){this.mCurrentButtonType=a.eDialogButtonType.CLOSE,this.hide()},t._Instance=null,__decorate([d(cc.RichText)],t.prototype,"labelTitle",void 0),__decorate([d(cc.RichText)],t.prototype,"labelText",void 0),__decorate([d(cc.Label)],t.prototype,"labelConfirm",void 0),__decorate([d(cc.Label)],t.prototype,"labelCancel",void 0),__decorate([d(cc.Node)],t.prototype,"btnConfirm",void 0),__decorate([d(cc.Node)],t.prototype,"btnCancel",void 0),__decorate([d(cc.Node)],t.prototype,"btnClose",void 0),o=__decorate([u],t)}(n.default);o.default=p,cc._RF.pop()},{"../../Game":"Game","../../global/AudioMgr":"AudioMgr","../util/ResUtil":"ResUtil","../util/StrUtil":"StrUtil","./DialogBox":"DialogBox","./WWindow":"WWindow"}],DropCardEff:[function(e,t,o){"use strict";cc._RF.push(t,"f3ea7lYB71LKIisJVm4KlN+","DropCardEff"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../core/util/MathUtil"),i=cc._decorator,r=i.ccclass,n=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.image=null,t.outRect=28,t.outOffset=56,t.duration=1,t.easeRate=3,t.count=20,t.scaleRange=new cc.Vec2(.8,1),t}return __extends(t,e),t.prototype.onLoad=function(){this.pool=new cc.NodePool,this.x=this.node.x,this.y=this.node.y,this.halfW=.5*this.node.width,this.halfH=.5*this.node.height,this.image.active=!1},t.prototype.eimt=function(e){var t=this;void 0===e&&(e=null),this.frameTimeout&&clearTimeout(Number(this.frameTimeout));for(var o=0,i=0;i<this.count;i++){var r=a.default.randomRange(500,1e3*this.duration)/1e3,n=this.pool.get();n||(n=cc.instantiate(this.image)),n.active=!0,n.parent=this.node,this.emitSingle(n,r),r>o&&(o=r)}this.frameTimeout=setTimeout(function(){e&&e(t)},1e3*o)},t.prototype.emitSingle=function(e,t){var o,i,r=this,n=a.default.randomRange(1,5),s=n<3,c=(s?this.halfH:this.halfW)-.5*this.outRect,l=s?this.halfW:this.halfH,u=2==n||3==n?1:-1,d=a.default.randomRange(-c,c),p=a.default.randomRange(d-this.outOffset,d+this.outOffset);s?(o=new cc.Vec2(l*u,d),i=new cc.Vec2((l+this.outRect)*u,p)):(o=new cc.Vec2(d,l*u),i=new cc.Vec2(d,(l+this.outRect)*u)),e.position=o,e.opacity=255,e.scale=a.default.randomRange(100*this.scaleRange.x,100*this.scaleRange.y)/100;var h=cc.moveTo(t,i).easing(cc.easeSineOut()),f=cc.fadeTo(t,0);e.runAction(cc.sequence(cc.spawn(h,f),cc.callFunc(function(){r.pool.put(e)})))},__decorate([n(cc.Node)],t.prototype,"image",void 0),__decorate([r],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../core/util/MathUtil":"MathUtil"}],Emitter:[function(e,t,o){"use strict";cc._RF.push(t,"c6260SPqQZERrM2h09IJB5e","Emitter"),Object.defineProperty(o,"__esModule",{value:!0}),o.Emitter=void 0;var a=function(){function e(){}return e.register=function(t,o,a){e.listeners[t]||(e.listeners[t]=[]),e.listeners[t].push(new i(o,a))},e.registerOnce=function(t,o,a){e.listeners[t]||(e.listeners[t]=[]),e.listeners[t].push(new i(o,a,!0))},e.hasRegister=function(e){return this.listeners.hasOwnProperty(e)},e.remove=function(t,o,a){var i=e.listeners[t];if(i){for(var r=i.length,n=0;n<r;n++)if(i[n].compar(o,a)){i.splice(n,1);break}0==i.length&&delete e.listeners[t]}},e.fire=function(t){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];var i=e.listeners[t];if(i){for(var r=i.length,n=[],s=0;s<r;s++){var c=i[s];c.notify.apply(c,o),c.once&&n.push(s)}if(n.length>0)for(var l=0,u=n;l<u.length;l++){var d=u[l];i.splice(d,1)}}},e.listeners={},e}();o.Emitter=a;var i=function(){function e(e,t,o){void 0===o&&(o=!1),this.callback=null,this.context=null,this._Once=!1,this.callback=e,this.context=t,this._Once=o}return Object.defineProperty(e.prototype,"once",{get:function(){return this._Once},enumerable:!1,configurable:!0}),e.prototype.notify=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var a=this;(e=a.callback).call.apply(e,__spreadArrays([a.context],t))},e.prototype.compar=function(e,t){return e==this.callback&&t==this.context},e}();cc._RF.pop()},{}],Endian:[function(e,t,o){"use strict";cc._RF.push(t,"1644f8Qd3JN8ZsqvxU3zetA","Endian"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function e(){}return e.LITTLE_ENDIAN="littleEndian",e.BIG_ENDIAN="bigEndian",e}();o.default=a,cc._RF.pop()},{}],ErrorManager:[function(e,t,o){"use strict";cc._RF.push(t,"706dae7hd9D6Kc8H3S4Bify","ErrorManager"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.error=function(e){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];o=[];for(var i=1;i<arguments.length;i++)o[i-1]=arguments[i];var r=[];for(i=1;i<arguments.length;i++)r[i-1]=arguments[i];var n=t.ErrorCode[e];n||(n="{"+e+"}");for(var s=r.length,c=0;c<s;c++)n=n.replace("{"+c+"}",r[c]);throw console.error("Error #"+e+": "+n),new Error("#"+e+": "+n)},t.warn=function(e){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];o=[];for(var i=1;i<arguments.length;i++)o[i-1]=arguments[i];var r=[];for(i=1;i<arguments.length;i++)r[i-1]=arguments[i];var n=t.ErrorCode[e];n||(n="{"+e+"}");for(var s=r.length,c=0;c<s;c++)n=n.replace("{"+c+"}",r[c]);console.warn("Warning #"+e+": "+n)},t.ErrorCode={1011:"\u6d41\u9519\u8bef\u3002URL: {0}",1025:"\u9047\u5230\u6587\u4ef6\u5c3e",1026:"EncodingError! The code point {0} could not be encoded.",1027:"DecodingError",1052:"\u7f51\u7edc\u8bf7\u6c42\u8d85\u65f6:{0}",3100:"\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebSocket",3101:"\u8bf7\u5148\u8fde\u63a5WebSocket",3102:"\u8bf7\u5148\u8bbe\u7f6etype\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b"},t}(cc.Component);o.default=a,cc._RF.pop()},{}],FacebookSDK:[function(e,t,o){"use strict";cc._RF.push(t,"ee75aHkmk5Ou6iOYvSzGxMk","FacebookSDK"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../global/GameConfig"),i=e("./SDKConst"),r=function(){function e(){}return e.prototype.showBanner=function(){MinigameAds.showBanner().then(function(){console.log("show Banner success")}).catch(function(e){console.log("show banner failed: "+e.message)})},e.prototype.hideBanner=function(){MinigameAds.hideBanner().then(function(){console.log("hide banner success")}).catch(function(e){console.log("hide banner failed: "+e.message)})},e.prototype.addPushMessage=function(e,t){console.log("add push message",e,t)},e.prototype.setOrientation=function(e){console.log("mobile only! type=",e),1==e?cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT):2==e?cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE):cc.view.setOrientation(cc.macro.ORIENTATION_AUTO)},e.prototype.logEvent=function(e){cc.log("\u8c03\u7528 logEvent\uff01"+e)},e.prototype.logEventToFirebase=function(e){console.log("call logEventToFirebase,",e)},e.prototype.getAFStatus=function(){return 1},e.prototype.setAdUid=function(){},e.prototype.ADisLoaded=function(e){return void 0===e&&(e=i.default.AD_TYPE_REWARD),e==i.default.AD_TYPE_INTERST?MiniGameAds.isInterstitialReady():e==i.default.AD_TYPE_REWARD?MiniGameAds.isRewardReady():e==i.default.AD_TYPE_BANNER&&MiniGameAds.isBannerReady()},e.prototype.initAD=function(){},e.prototype.loadAD=function(e,t){void 0===t&&(t=i.default.AD_TYPE_REWARD)},e.prototype.showInterstitial=function(e,t,o){console.log("try show interstitial"),MiniGameAds.showInterstitial(function(){e&&e.call(o,!0)}).then(function(){console.log("show interstitial success"),t&&t.call(o)}).catch(function(t){console.log("show interstitial failed: "+t.message),e&&e.call(o,!1)})},e.prototype.showReward=function(e,t,o){if(console.log("try show video"),!MiniGameAds.isRewardvideoReady())return e&&e.call(o,!0),void(t&&t.call(o,!0));MiniGameAds.showRewardedVideo(function(){e&&e.call(o,!0)}).then(function(){console.log("show video success"),t&&t.call(o,!0)}).catch(function(t){console.log("show video failed: "+t.message),e&&e.call(o,!1)})},e.prototype.displayBannerAD=function(e){e?this.showBanner():this.hideBanner()},e.prototype.hasBannerAD=function(){return!0},e.prototype.rewardAvailability=function(){return!0},e.prototype.SDKCallBack=function(){},e.prototype.getLocal=function(){try{return FBInstant.getLocale()}catch(e){return console.error(e),navigator.language}},e.prototype.getData=function(t,o,a){var i=cc.sys.localStorage.getItem(e.localStorageKey),r=i?JSON.parse(i):{};if(t){for(var n={},s=0,c=t;s<c.length;s++){var l=c[s];n[l]=r[l]}o.call(a,n)}else o.call(a,r)},e.prototype.setData=function(t){var o=cc.sys.localStorage.getItem(e.localStorageKey),a=o?JSON.parse(o):{};for(var i in t)a[i]=t[i];cc.sys.localStorage.setItem(e.localStorageKey,JSON.stringify(a))},e.prototype.showRateDialog=function(){},e.prototype.getIsRated=function(){return!1},e.prototype.getVersion=function(){return a.default.VERSION},e.prototype.smbCommand=function(){},e.localStorageKey="game_MD_2",e}();o.default=r,cc._RF.pop()},{"../global/GameConfig":"GameConfig","./SDKConst":"SDKConst"}],FailWindow:[function(e,t,o){"use strict";cc._RF.push(t,"9d6d7obz3VBu6YkRK4G9ieg","FailWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("../../global/AudioMgr"),r=e("../../core/global/I18N"),n=e("../UICenter"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelAuto=null,t.labelCancel=null,t.centerLabel=null,t}return __extends(t,e),t.prototype.show=function(){e.prototype.show.call(this),this.initLanguage()},t.prototype.initLanguage=function(){this.labelAuto.string=r.default.get("L1"),this.labelCancel.string=r.default.get("L2");var e=r.default.get("L307")+"\n"+r.default.get("L219");this.centerLabel.string=e},t.prototype.onTryAgainClick=function(){n.UICenter.openGameWin(),this.toBack()},t.prototype.toBack=function(){e.prototype.toBack.call(this),i.AudioMgr.clickOK()},__decorate([l(cc.Label)],t.prototype,"labelAuto",void 0),__decorate([l(cc.Label)],t.prototype,"labelCancel",void 0),__decorate([l(cc.RichText)],t.prototype,"centerLabel",void 0),__decorate([c],t)}(a.default);o.default=u,cc._RF.pop()},{"../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../global/AudioMgr":"AudioMgr","../UICenter":"UICenter"}],FlateStream:[function(e,t,o){"use strict";cc._RF.push(t,"5bab2WZfg1Dipi6TehXgCNB","FlateStream"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(o){var a=e.call(this)||this;a.codeSize=0,a.codeBuf=0;var i=0,r=o[i++],n=o[i++];return-1!=r&&-1!=n||t.error("Invalid header in flate stream"),8!=(15&r)&&t.error("Unknown compression method in flate stream"),((r<<8)+n)%31!=0&&t.error("Bad FCHECK in flate stream"),32&n&&t.error("FDICT bit set in flate stream"),a.bytes=o,a.bytesPos=2,a.codeSize=0,a.codeBuf=0,a}return __extends(t,e),t.error=function(e){throw new Error(e)},t.prototype.getBits=function(e){for(var o,a=this.codeSize,i=this.codeBuf,r=this.bytes,n=this.bytesPos;a<e;)void 0===(o=r[n++])&&t.error("Bad encoding in flate stream"),i|=o<<a,a+=8;return o=i&(1<<e)-1,this.codeBuf=i>>e,this.codeSize=a-=e,this.bytesPos=n,o},t.prototype.getCode=function(e){for(var o=e[0],a=e[1],i=this.codeSize,r=this.codeBuf,n=this.bytes,s=this.bytesPos;i<a;){var c;void 0===(c=n[s++])&&t.error("Bad encoding in flate stream"),r|=c<<i,i+=8}var l=o[r&(1<<a)-1],u=l>>16,d=65535&l;return(0==i||i<u||0==u)&&t.error("Bad encoding in flate stream"),this.codeBuf=r>>u,this.codeSize=i-u,this.bytesPos=s,d},t.prototype.generateHuffmanTable=function(e){for(var t=e.length,o=0,a=0;a<t;++a)e[a]>o&&(o=e[a]);for(var i=1<<o,r=new Uint32Array(i),n=1,s=0,c=2;n<=o;++n,s<<=1,c<<=1)for(var l=0;l<t;++l)if(e[l]==n){var u=0,d=s;for(a=0;a<n;++a)u=u<<1|1&d,d>>=1;for(a=u;a<i;a+=c)r[a]=n<<16|l;++s}return[r,o]},t.prototype.readBlock=function(){function e(e,t,o,a,i){for(var r=e.getBits(o)+a;r-- >0;)t[l++]=i}var o=this.getBits(3);if(1&o&&(this.eof=!0),0!=(o>>=1)){var a,i;if(1==o)a=t.fixedLitCodeTab,i=t.fixedDistCodeTab;else if(2==o){for(var r=this.getBits(5)+257,n=this.getBits(5)+1,s=this.getBits(4)+4,c=Array(t.codeLenCodeMap.length),l=0;l<s;)c[t.codeLenCodeMap[l++]]=this.getBits(3);for(var u=this.generateHuffmanTable(c),d=0,p=(l=0,r+n),h=new Array(p);l<p;){var f=this.getCode(u);16==f?e(this,h,2,3,d):17==f?e(this,h,3,3,d=0):18==f?e(this,h,7,11,d=0):h[l++]=d=f}a=this.generateHuffmanTable(h.slice(0,r)),i=this.generateHuffmanTable(h.slice(r,p))}else t.error("Unknown block type in flate stream");for(var g=(L=this.buffer)?L.length:0,m=this.bufferLength;;){var y=this.getCode(a);if(y<256)m+1>=g&&(g=(L=this.ensureBuffer(m+1)).length),L[m++]=y;else{if(256==y)return void(this.bufferLength=m);y-=257;var v=(y=t.lengthDecode[y])>>16;v>0&&(v=this.getBits(v)),d=(65535&y)+v,y=this.getCode(i),(v=(y=t.distDecode[y])>>16)>0&&(v=this.getBits(v));var b=(65535&y)+v;m+d>=g&&(g=(L=this.ensureBuffer(m+d)).length);for(var C=0;C<d;++C,++m)L[m]=L[m-b]}}}else{var _,T=this.bytes,D=this.bytesPos;void 0===(_=T[D++])&&t.error("Bad block header in flate stream");var S=_;void 0===(_=T[D++])&&t.error("Bad block header in flate stream"),S|=_<<8,void 0===(_=T[D++])&&t.error("Bad block header in flate stream");var w=_;void 0===(_=T[D++])&&t.error("Bad block header in flate stream"),(w|=_<<8)!=(65535&~S)&&t.error("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var I=this.bufferLength,L=this.ensureBuffer(I+S),G=I+S;this.bufferLength=G;for(var k=I;k<G;++k){if(void 0===(_=T[D++])){this.eof=!0;break}L[k]=_}this.bytesPos=D}},t.codeLenCodeMap=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t.lengthDecode=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),t.distDecode=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),t.fixedLitCodeTab=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],t.fixedDistCodeTab=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],t}(e("./DecodeStream").default);o.default=a,cc._RF.pop()},{"./DecodeStream":"DecodeStream"}],GameBGWindow:[function(e,t,o){"use strict";cc._RF.push(t,"74ce1uZagVKPLqpKLQI2xqc","GameBGWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../global/DataManager"),i=e("./content/CardBGItem"),r=e("../../core/global/Emitter"),n=e("../../global/AudioMgr"),s=e("../../core/global/I18N"),c=e("../../Game"),l=e("../../core/UI/WWindow"),u=e("../../sdk/LogEvent"),d=e("../../core/Table/Table"),p=e("../../core/Table/TableHelper"),h=e("../../global/Const"),f=e("../../data/BgUnlockHelper"),g=e("../../core/util/StrUtil"),m=e("../UICenter"),y=cc._decorator,v=y.ccclass,b=y.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.itemPre=null,t.changeGameBgLabel=null,t.scrollView=null,t.items=[],t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.content.on("itemClick",this.itemClickHandler,this),r.Emitter.register(h.default.eLanguageChange,this.initLanguage,this),this.initLanguage()},t.prototype.initLanguage=function(){this.changeGameBgLabel.string=s.default.get("L215")},t.prototype.show=function(){var t;e.prototype.show.call(this),this.initData(),null===(t=this.scrollView)||void 0===t||t.scrollToTop()},t.prototype.initData=function(){var e,t;this.clearItem();for(var o=p.TableHelper.GetCount(d.eTable.eTabGameBg),r=f.default.getMaxUnlockBgIdx(),n=0;n<o;n++){var s=p.TableHelper.GetFieldByIndex(d.eTable.eTabGameBg,n);t={goodsId:s.id,icon:a.default.gameBG_RES.getSpriteFrame(s.res),lock:n>r,cost:s.winNum,key:0==n?"default":s.res},(e=this.getItem().getComponent(i.default)).setData(t),c.Game.userData.gameBG==t.key&&(this.selectedItem&&(this.selectedItem.seletced=!1),e.seletced=!0,this.selectedItem=e)}},t.prototype.clearItem=function(){for(var e=0,t=this.content.children;e<t.length;e++){var o=t[e];this.items.push(o),o.active=!1}},t.prototype.getItem=function(){if(0==this.items.length){var e=cc.instantiate(this.itemPre);return this.content.addChild(e),e}return(e=this.items.shift()).active=!0,e},t.prototype.itemClickHandler=function(e,t){if(this.selectedItem!=t)if(e.lock){var o=e.cost-c.Game.userData.getSuccCount(),a=g.default.stringFormat(s.default.get("L4016"),o),i=s.default.get("L387");m.UICenter.openMessageBox(a,i)}else this.onChanged(e,t)},t.prototype.onChanged=function(e,t){this.selectedItem&&(this.selectedItem.seletced=!1),this.selectedItem=t,this.selectedItem.seletced=!0,c.Game.userData.gameBG=e.key,r.Emitter.fire(h.default.eChangeGameBG,e.icon),a.default.getGameBgBig(c.Game.userData.gameBG,function(e){c.Game.gameMgr.stage.view.setBg(e)},this);var o=f.default.getMaxUnlockBgIdx()+1;u.default.log(u.default.dot_table_change,{unlocknum:o,table_id:c.Game.userData.gameBG,table_from:"seting"})},t.prototype.close=function(){n.AudioMgr.clickOK(),this.toBack()},__decorate([b(cc.Node)],t.prototype,"content",void 0),__decorate([b(cc.Prefab)],t.prototype,"itemPre",void 0),__decorate([b(cc.Label)],t.prototype,"changeGameBgLabel",void 0),__decorate([b(cc.ScrollView)],t.prototype,"scrollView",void 0),__decorate([v],t)}(l.default);o.default=C,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/util/StrUtil":"StrUtil","../../data/BgUnlockHelper":"BgUnlockHelper","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../../global/DataManager":"DataManager","../../sdk/LogEvent":"LogEvent","../UICenter":"UICenter","./content/CardBGItem":"CardBGItem"}],GameConfig:[function(e,t,o){"use strict";cc._RF.push(t,"7e8905/e1hPBpCwuOumij2E","GameConfig"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../sdk/DefaultSDK"),i=e("../data/CardLibData"),r=e("../pay/DefaultPaySDK"),n=e("../pay/AndroidPaySDK"),s=e("../sdk/FacebookSDK"),c=cc._decorator.ccclass,l=function(){function e(){}return Object.defineProperty(e,"SDK",{get:function(){return null==this.mSDK&&(cc.sys.isBrowser,this.useFacebookSDK?this.mSDK=new s.default:this.mSDK=new a.default),this.mSDK},enumerable:!1,configurable:!0}),Object.defineProperty(e,"PAYSDK",{get:function(){return null==this.mPaySDK&&(cc.sys.isBrowser?this.mPaySDK=new r.default:cc.sys.os===cc.sys.OS_IOS?this.mPaySDK=new r.default:cc.sys.os===cc.sys.OS_ANDROID?this.mPaySDK=new n.default:this.mPaySDK=new r.default),this.mPaySDK},enumerable:!1,configurable:!0}),e.initData=function(){i.LibConfig.init()},e.TEST=!1,e.VERSION="1.0.2",e.GameDataVersion=2,e.DEBUG=!0,e.useFacebookSDK=!0,e.mSDK=null,e.mPaySDK=null,e.loadingType=1,e.TaskRewardExp=300,e.WinTaskRewardExp=200,e.SuccRewardExp=100,e.SupportGold=!1,e.SupportMagic=!0,e.SuccRewardGold=10,e.SuccEffMoveAllTm=2.5,e.SuccEffDelayTm=.05,e.SuccEffJumpAllTm=3.5,e.TaskItemScaleTm=.2,e.TaskItemSwitchTm=.4,e.TaskItemFadeTm=.1,e.DealerGrapTime=.03,e.DealerMoveTime=.1,e.BeginOpenTime=80,e.CardMoveTime=.2,e.AutoMoveTime=.1,e.CardFaceConfig=["cardBase1","cardBase2","cardBase3"],e.MagicWandTarget=5,e.DefaultUnlockBgTarget=7,__decorate([c],e)}();o.default=l,window.GameConfig=l,cc._RF.pop()},{"../data/CardLibData":"CardLibData","../pay/AndroidPaySDK":"AndroidPaySDK","../pay/DefaultPaySDK":"DefaultPaySDK","../sdk/DefaultSDK":"DefaultSDK","../sdk/FacebookSDK":"FacebookSDK"}],GameMgr:[function(e,t,o){"use strict";cc._RF.push(t,"2115eMaqcpENI/DeoJub4FJ","GameMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameMgr=o.SubGameFrom=o.GameType=void 0;var a,i,r=e("../Game"),n=e("../data/DaliyHelper"),s=e("../global/GameConfig"),c=e("../data/DataTools"),l=e("../global/AudioMgr"),u=e("../sdk/LogEvent"),d=e("../view/UICenter"),p=e("./GameSucc"),h=e("./Stage"),f=e("./StageView"),g=e("../App"),m=e("../core/util/StrUtil"),y=e("../core/util/DateUtils"),v=e("../core/global/I18N"),b=e("../core/UI/ToastFull"),C=e("../core/global/Emitter"),_=e("../global/Const"),T=e("../view/window/StageWindow"),D=e("../sdk/SDKConst"),S=e("../sdk/StsLogEvent");(function(e){e[e.Random=0]="Random",e[e.Normal=1]="Normal",e[e.Daliy=2]="Daliy"})(a=o.GameType||(o.GameType={})),function(e){e[e.FromGame=0]="FromGame",e[e.FromWinner=1]="FromWinner"}(i=o.SubGameFrom||(o.SubGameFrom={}));var w=function(){function e(){this.mStage=null,this.mStageUI=null,this.mGameType=a.Normal,this.mcurGameId=null,this.mLastSucc=!1,this.DaliyInfo=[null,!1,0,0,!1],this.mGameSucc=null,this.mGameSucc=new p.default,this.init()}return Object.defineProperty(e.prototype,"gameType",{get:function(){return this.mGameType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameSucc",{get:function(){return this.mGameSucc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stage",{get:function(){if(!this.mStage){var e=g.default.instance.stage.getComponent(f.default);this.mStage=new h.default(e)}return this.mStage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageUI",{get:function(){if(!this.mStageUI){var e=cc.find("Canvas/UIRoot/StageWindow");this.mStageUI=e.getComponent(T.default)}return this.mStageUI},enumerable:!1,configurable:!0}),e.prototype.init=function(){C.Emitter.register(_.default.eChangeAutoComplete,this.changeAutoComplete,this),C.Emitter.register(_.default.eChangeCardBG,this.setCardBg,this),C.Emitter.register(_.default.eChangeCardFace,this.setCardFace,this),C.Emitter.register(_.default.eChangeFlopThree,this.changeFlopThree,this)},e.prototype.getStrGameType=function(e){return e!=a.Daliy?"classic":"daily"},e.prototype.resetGameData=function(){r.Game.userData.score=0,r.Game.userData.step=0,r.Game.userData.time=0},e.prototype.onCollectTask=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o]},e.prototype.changeFlopThree=function(e){this.stage.flopThree=e},e.prototype.changeAutoComplete=function(e){this.stage.onChangeAutoComplete(e)},e.prototype.setCardBg=function(e){this.stage.setCardBg(e)},e.prototype.setCardFace=function(){this.stage.setCardFace()},e.prototype.onUpdate=function(e){this.stage&&this.stage.onUpdate(e)},e.prototype.ReadyGame=function(){var e=this;setTimeout(function(){e.stage.init();try{e.readGameData()?(e.oldReport=r.Game.userData.getReport().slice(),e.stage.ready(),C.Emitter.fire(_.default.eOnGameReady)):e.startGame(a.Normal)}catch(t){console.error(t),e.startGame(a.Normal)}},200),r.Game.sdkPipeline.loadAD(),l.AudioMgr.playBgSound()},e.prototype.startDaliy=function(){this.mLastSucc||this.onGameFail(),this.startGame(a.Daliy)},e.prototype.startGame=function(e){this.changeFlopThree(r.Game.userData.flopThree),this.mGameType=e,this.mLastSucc=!1,this.mcurGameId=this.getCardId(e),this.onStartGame(this.mcurGameId),this.dotGameStart(u.default.dot_game_start)},e.prototype.newGame=function(){this.startGame(this.mGameType)},e.prototype.newNormalGame=function(){this.mLastSucc||this.onGameFail(),r.Game.userData.subFrom=i.FromGame,this.startGame(a.Normal)},e.prototype.restartGame=function(){this.onStartGame(this.mcurGameId),this.dotGameStart(u.default.dot_game_restart)},e.prototype.onStartGame=function(e){var t=this;C.Emitter.fire(_.default.eOnStartGame),this.resetGameData(),this.stage.reset(),this.oldReport=r.Game.userData.getReport().slice();var o=this.getStrGameType(this.gameType);r.Game.sdkPipeline.showInterstitial(D.default.AD_PLAY_POS_START,o,function(){t.stage.startGame(e,function(){t.saveGameData(),C.Emitter.fire(_.default.eOnGameReady)})})},e.prototype.onGameSucc=function(e){this.mLastSucc=!0;var t=r.Game.userData.cardLibData,o=t.isGrading,i=t.startP5Count,u=t.curP5Count,p=t.lucking,h=t.gradeIndex,f=r.Game.userData.preCardId;if(this.gameType==a.Normal&&(this.stage.flopThree||r.Game.cardLib.gameSucc()),r.Game.userData.saveReport(!0,e,this.stage.flopThree),this.gameType==a.Daliy){var m=new Date;n.default.getTrophy(m.getFullYear(),m.getMonth()),r.Game.userData.updateDaliyInfo(this.DaliyInfo[1],this.DaliyInfo[2],this.DaliyInfo[4])}s.default.SupportGold&&c.default.addGold(s.default.SuccRewardGold),l.AudioMgr.victory(),3==r.Game.userData.getSuccCount()&&g.default.instance.startShowBanner(),this.mGameSucc.onGameSucc(function(){d.UICenter.openWinnerWin(),r.Game.userData.saveData()}),r.Game.userData.preCardId=r.Game.cardLib.id,this.clearGameData(),r.Game.userData.saveData(),C.Emitter.fire(_.default.eOnGameEnd),S.default.onLevelComplete(),this.dotGameSuccess(o,i,u,p,h,f)},e.prototype.onGameFail=function(){var e=r.Game.userData.cardLibData,t=e.isGrading,o=e.startP5Count,i=e.curP5Count,n=e.lucking,s=e.gradeIndex,c=r.Game.userData.preCardId;this.mGameType!=a.Normal||this.stage.flopThree||r.Game.cardLib.gameFail(),r.Game.userData.preCardId=r.Game.cardLib.id,r.Game.userData.saveReport(!1,!1,this.stage.flopThree),this.dotGameFail(t,o,i,n,s,c)},e.prototype.getCardId=function(e){var t=null,o=a.Daliy==this.mGameType&&e==a.Daliy;if(this.mGameType=e,e==a.Random)s.default.TEST?r.Game.cardLib.getDefaultCard():r.Game.cardLib.GetRandom(),t=r.Game.cardLib.GetCurCardsID();else if(e==a.Daliy){var i=n.default.getNextDaliy(this.DaliyInfo,!o);if(i||(this.DaliyInfo=[null,!1,0,0,!1]),!i)return this.getCardId(a.Normal);r.Game.cardLib.GetChallenge(this.DaliyInfo[3]),t=r.Game.cardLib.GetCurCardsID()}else r.Game.cardLib.getLiveCards(),t=r.Game.cardLib.GetCurCardsID();return t},e.prototype.tipDaliy=function(){var e=m.default.getRichIcon("rili",50),t=y.default.dateNumFormat(this.DaliyInfo[3]);e+=m.default.stringFormat(" "+v.default.get("L887"),t),b.default.showWith(e)},e.prototype.saveGameData=function(){if(this.stage.isPlaying){var e={version:s.default.GameDataVersion,score:r.Game.userData.score,time:r.Game.userData.time,step:r.Game.userData.step,type:this.gameType,id:this.mcurGameId,dbId:r.Game.cardLib.id,daliyInfo:this.DaliyInfo,cardData:this.stage.getStoreData()},t={};t.online=y.default.dateFormat(new Date),t.gameData=e,r.Game.userData.updateData("online",y.default.dateFormat(new Date)),r.Game.userData.updateData("gameData",e),r.Game.userData.saveData(),console.log("saveGameData",e)}},e.prototype.readGameData=function(){var e=r.Game.userData.FBData.gameData;if(!e)return!1;var t=e.version,o=e.score,i=e.time,c=e.step,l=e.type,u=e.id,d=e.dbId,p=e.daliyInfo,h=e.cardData;if(!t||t!=s.default.GameDataVersion)return!1;if(l==a.Daliy){if(!n.default.dateIsValid(p[0]))return!1;this.DaliyInfo=p}return r.Game.userData.score=o,r.Game.userData.time=i,r.Game.userData.step=c,this.mGameType=l,this.mcurGameId=u,r.Game.cardLib.id=d,r.Game.cardLib.SetCurCardsID(this.mcurGameId),this.stage.recover(h),!0},e.prototype.clearGameData=function(){r.Game.userData.updateData("gameData",null)},e.prototype.needNewGameTip=function(){return this.gameType==a.Daliy&&0==this.stage.isPlaying},e.prototype.dotGameStart=function(e){var t=r.Game.cardLib.id,o=this.getStrGameType(this.gameType),n=this.mcurGameId,s=r.Game.userData.cardLibData,c=s.curGrade,l=this.stage.flopThree,d=r.Game.userData.preCardId,p=r.Game.userData.getTotal()+1;if(this.gameType==a.Daliy)u.default.log(e,{from:o,card_id:t,card_game:n,difficulty:c,date:this.DaliyInfo[3],first_ten:s.isGrading,p5_count:s.startP5Count,sub_p5_count:s.curP5Count,flop_three:l,luck:s.lucking,gradeIdx:s.gradeIndex,pre_card_id:d,total:p});else{var h=r.Game.userData.subFrom==i.FromGame?"game":"win";u.default.log(e,{from:o,card_id:t,card_game:n,difficulty:c,first_ten:s.isGrading,p5_count:s.startP5Count,sub_p5_count:s.curP5Count,flop_three:l,luck:s.lucking,gradeIdx:s.gradeIndex,pre_card_id:d,total:p,sub_from:h})}},e.prototype.dotGameFail=function(e,t,o,n,s,c){var l=this.getStrGameType(this.gameType),d=r.Game.cardLib.id,p=this.mcurGameId,h=r.Game.userData.cardLibData,f=h.curGrade,g=this.stage.magicUseCount,m=h.curScore,y=h.losingStreakCount,v=this.stage.flopThree,b=r.Game.userData.getTotal();if(this.gameType==a.Daliy)u.default.log(u.default.dot_game_fail,{from:l,card_id:d,card_game:p,difficulty:f,magic_num:g,time:r.Game.userData.time,step_num:r.Game.userData.step,p5_fraction:m,fail_num:y,date:this.DaliyInfo[3],first_ten:e,p5_count:t,sub_p5_count:o,flop_three:v,luck:n,gradeIdx:s,pre_card_id:c,total:b});else{var C=r.Game.userData.subFrom==i.FromGame?"game":"win";u.default.log(u.default.dot_game_fail,{from:l,card_id:d,card_game:p,difficulty:f,magic_num:g,time:r.Game.userData.time,step_num:r.Game.userData.step,p5_fraction:m,fail_num:y,first_ten:e,p5_count:t,sub_p5_count:o,flop_three:v,luck:n,gradeIdx:s,pre_card_id:c,total:b,sub_from:C})}},e.prototype.dotGameSuccess=function(e,t,o,n,s,c){var l=this.getStrGameType(this.gameType),d=r.Game.cardLib.id,p=r.Game.userData.cardLibData,h=p.curGrade,f=this.stage.magicUseCount,g=p.curScore,m=p.winningStreakCount,y=this.stage.flopThree,v=r.Game.userData.getTotal();if(this.gameType==a.Daliy)u.default.log(u.default.dot_game_win,{from:l,card_id:d,card_game:this.mcurGameId,difficulty:h,magic_num:f,time:r.Game.userData.time,step_num:r.Game.userData.step,p5_fraction:g,win_num:m,date:this.DaliyInfo[3],first_ten:e,p5_count:t,sub_p5_count:o,flop_three:y,luck:n,gradeIdx:s,pre_card_id:c,total:v});else{var b=r.Game.userData.subFrom==i.FromGame?"game":"win";u.default.log(u.default.dot_game_win,{from:l,card_id:d,card_game:this.mcurGameId,difficulty:h,magic_num:f,time:r.Game.userData.time,step_num:r.Game.userData.step,p5_fraction:g,win_num:m,first_ten:e,p5_count:t,sub_p5_count:o,flop_three:y,luck:n,gradeIdx:s,pre_card_id:c,total:v,sub_from:b})}},e}();o.GameMgr=w,cc._RF.pop()},{"../App":"App","../Game":"Game","../core/UI/ToastFull":"ToastFull","../core/global/Emitter":"Emitter","../core/global/I18N":"I18N","../core/util/DateUtils":"DateUtils","../core/util/StrUtil":"StrUtil","../data/DaliyHelper":"DaliyHelper","../data/DataTools":"DataTools","../global/AudioMgr":"AudioMgr","../global/Const":"Const","../global/GameConfig":"GameConfig","../sdk/LogEvent":"LogEvent","../sdk/SDKConst":"SDKConst","../sdk/StsLogEvent":"StsLogEvent","../view/UICenter":"UICenter","../view/window/StageWindow":"StageWindow","./GameSucc":"GameSucc","./Stage":"Stage","./StageView":"StageView"}],GameRes:[function(e,t,o){"use strict";cc._RF.push(t,"85913bUa0BARZF0U2OfT/Eb","GameRes"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../core/util/ResUtil"),i=e("../Game"),r=function(){function e(){this.bgFrames=new Object}return e.prototype.loadBgs=function(e){var t=this,o=i.Game.userData.gameBG;"default"==o&&(o="bgtable_1"),a.ResUtil.loadRes(o,a.eResType.Texture,function(a){t.bgFrames[o]=a,e&&e()})},e.prototype.getBgSpriteFrame=function(e,t,o){var i=this;this.bgFrames.hasOwnProperty(e)?t&&t.call(o,this.bgFrames[e]):a.ResUtil.loadRes(e,a.eResType.Texture,function(a){i.bgFrames[e]=a,t&&t.call(o,i.bgFrames[e])})},e}();o.default=r,cc._RF.pop()},{"../Game":"Game","../core/util/ResUtil":"ResUtil"}],GameSucc:[function(e,t,o){"use strict";cc._RF.push(t,"37b60Rz/n9HfKHXani14x9i","GameSucc"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../view/UICenter"),i=e("../view/window/NewRecordWindow"),r=e("../data/StoryHelper"),n=e("../Game"),s=function(){function e(){}return e.prototype.onGameSucc=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return setTimeout(function(){e&&e()},200),[2]})})},e.prototype.youWin=function(){return new Promise(function(e){a.UICenter.openYouWinWindow(e)})},e.prototype.succEffect=function(){return new Promise(function(e){a.UICenter.openCelebrateEffect(function(){n.Game.gameMgr.stage.reset(),e()})})},e.prototype.newRecord=function(){return new Promise(function(e){i.default.check(e)})},e.prototype.checkPuzzle=function(){var e=this;return new Promise(function(t){var o=r.default.addUserStoryScore(n.Game.scoreCounter.getStoryScore());e.openPuzzleWindow(0,o,t)})},e.prototype.checkWinTask=function(){return new Promise(function(e){a.UICenter.openWinTaskWindow(e)})},e.prototype.checkTask=function(){return new Promise(function(e){n.Game.taskMgr.hasTaskComplete()?a.UICenter.openTaskParam(e):e()})},e.prototype.openPuzzleWindow=function(e,t,o){var i=this;t&&0!=t.length?a.UICenter.openPuzzleWindow(t[e++],function(){e<t.length?i.openPuzzleWindow(e,t,o):o()}):o()},e}();o.default=s,cc._RF.pop()},{"../Game":"Game","../data/StoryHelper":"StoryHelper","../view/UICenter":"UICenter","../view/window/NewRecordWindow":"NewRecordWindow"}],GameWindow:[function(e,t,o){"use strict";cc._RF.push(t,"67aabr0e8dL5LHepQrlUqut","GameWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../UICenter"),i=e("../../core/global/I18N"),r=e("../../core/global/Emitter"),n=e("../../core/UI/WWindow"),s=e("../../Game"),c=e("../../global/Const"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.winningDealBgLabel=null,t.replayGameLabel=null,t.statisticsLabel=null,t.cancelLabel=null,t.btnReplay=null,t.btnNewGameNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),r.Emitter.register(c.default.eLanguageChange,this.initLanguage,this),this.initLanguage()},t.prototype.initLanguage=function(){this.winningDealBgLabel.string=i.default.get("L528"),this.replayGameLabel.string=i.default.get("L114"),this.statisticsLabel.string=i.default.get("L201"),this.cancelLabel.string=i.default.get("L2")},t.prototype.show=function(){e.prototype.show.call(this),s.Game.gameMgr.needNewGameTip()?(this.btnReplay.interactable=!1,this.newGameAnimationTip()):this.btnReplay.interactable=!0},t.prototype.rePlay=function(){s.Game.gameMgr.restartGame(),this.close()},t.prototype.winGame=function(){s.Game.gameMgr.newNormalGame(),this.close()},t.prototype.daliyGame=function(){a.UICenter.openDaliyWin(),this.close()},t.prototype.close=function(){this.toBack()},t.prototype.toBack=function(){this.btnNewGameNode.stopAllActions(),this.btnNewGameNode.scale=1,e.prototype.toBack.call(this)},t.prototype.onStatisticsClick=function(){this.close(),a.UICenter.openReportWin()},t.prototype.newGameAnimationTip=function(){cc.tween(this.btnNewGameNode).to(.3,{scale:1.05}).to(.4,{scale:.95}).to(.8,{scale:1.05}).to(.6,{scale:1}).delay(1).union().repeatForever().start()},__decorate([d(cc.Label)],t.prototype,"winningDealBgLabel",void 0),__decorate([d(cc.Label)],t.prototype,"replayGameLabel",void 0),__decorate([d(cc.Label)],t.prototype,"statisticsLabel",void 0),__decorate([d(cc.Label)],t.prototype,"cancelLabel",void 0),__decorate([d(cc.Button)],t.prototype,"btnReplay",void 0),__decorate([d(cc.Node)],t.prototype,"btnNewGameNode",void 0),__decorate([u],t)}(n.default);o.default=p,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../global/Const":"Const","../UICenter":"UICenter"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"3eb04tlrvBOn62rjuhYqeZs","Game"),Object.defineProperty(o,"__esModule",{value:!0}),o.Game=void 0;var a=e("./data/UserData"),i=e("./game/CardLibrary"),r=e("./game/ScoreCounter"),n=e("./core/UI/UIManager"),s=e("./core/global/I18N"),c=e("./game/GameMgr"),l=e("./sdk/SdkPipeline"),u=e("./game/GameRes"),d=function(){function e(){this.mUserData=null,this.mCardLib=null,this.mScoreCounter=null,this.mUiMgr=null,this.mTaskMgr=null,this.mGameMgr=null,this.mSdkPipeline=null,this.mGameRes=null,this.mUserData=new a.default,this.mCardLib=new i.default,this.mScoreCounter=new r.default,this.mI18N=new s.default,this.mUiMgr=new n.UIManager,this.mGameMgr=new c.GameMgr,this.mSdkPipeline=new l.default,this.mGameRes=new u.default}return Object.defineProperty(e.prototype,"userData",{get:function(){return this.mUserData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cardLib",{get:function(){return this.mCardLib},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scoreCounter",{get:function(){return this.mScoreCounter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"I18N",{get:function(){return this.mI18N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uiMgr",{get:function(){return this.mUiMgr},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"taskMgr",{get:function(){return this.mTaskMgr},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameMgr",{get:function(){return this.mGameMgr},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sdkPipeline",{get:function(){return this.mSdkPipeline},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameRes",{get:function(){return this.mGameRes},enumerable:!1,configurable:!0}),e.instance=new e,e}();o.Game=d.instance,cc._RF.pop()},{"./core/UI/UIManager":"UIManager","./core/global/I18N":"I18N","./data/UserData":"UserData","./game/CardLibrary":"CardLibrary","./game/GameMgr":"GameMgr","./game/GameRes":"GameRes","./game/ScoreCounter":"ScoreCounter","./sdk/SdkPipeline":"SdkPipeline"}],GoldWindow:[function(e,t,o){"use strict";cc._RF.push(t,"164acxSzYVKJKxjXCG23ja7","GoldWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("../../Game"),r=e("../../core/global/Emitter"),n=e("../../global/AudioMgr"),s=e("../AnimationUtil"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gold=null,t.icon=null,t.curGold=0,t}var o;return __extends(t,e),o=t,t.animate=function(e,t,a){var r=i.Game.uiMgr.getWindow("prefab/GoldWindow");r instanceof o&&r.animateGold(e,t,a)},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),r.Emitter.register("goldDataChanged",this.onGoldChanged,this)},t.prototype.show=function(t){e.prototype.show.call(this),t?(this.curGold=t,this.gold.string=""+t):this.gold.string=""+i.Game.userData.goldData.gold},t.prototype.onGoldChanged=function(){this.gold.string=""+i.Game.userData.goldData.gold},t.prototype.animateGold=function(e,t,o){var a=this;s.default.bezierFly(this.node,e,this.icon.node,t,2,function(e){a.curGold+=e,a.gold.string=""+a.curGold},function(){n.AudioMgr.gold()},o)},__decorate([u(cc.Label)],t.prototype,"gold",void 0),__decorate([u(cc.Sprite)],t.prototype,"icon",void 0),o=__decorate([l],t)}(a.default);o.default=d,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../global/AudioMgr":"AudioMgr","../AnimationUtil":"AnimationUtil"}],GuideWindow:[function(e,t,o){"use strict";cc._RF.push(t,"0bd98atyslOE76ZX4CaxvZL","GuideWindow"),Object.defineProperty(o,"__esModule",{value:!0}),o.GuideId=o.GuideFingerDir=void 0;var a,i=e("../../core/UI/WWindow"),r=e("../../Game"),n=e("../UICenter"),s=e("../../core/util/MathUtil"),c=cc._decorator,l=c.ccclass,u=c.property;(function(e){e[e.Top=1]="Top",e[e.Buttom=2]="Buttom",e[e.Left=3]="Left",e[e.Right=4]="Right"})(a=o.GuideFingerDir||(o.GuideFingerDir={})),function(e){e[e.DaliyBtn=0]="DaliyBtn",e[e.DaliyHelper=1]="DaliyHelper",e[e.DaliyHelperNext=2]="DaliyHelperNext",e[e.StoryBtn=3]="StoryBtn",e[e.StoryHelper=4]="StoryHelper",e[e.StoryHelperNext=5]="StoryHelperNext"}(o.GuideId||(o.GuideId={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maskNode=null,t.blackNode=null,t.fingerNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.blackNode.width=cc.winSize.width,this.blackNode.height=cc.winSize.height+120},Object.defineProperty(t,"guideActive",{get:function(){return r.Game.uiMgr.getWindowActive("prefab/GuideWindow")},enumerable:!1,configurable:!0}),t.check=function(e,t,o){var a=r.Game.userData.guideData;a&&a.findIndex(function(t){return t==e})>=0||t.activeInHierarchy&&!this.guideActive&&(a?a.push(e):(a=[]).push(e),r.Game.userData.guideData=a,n.UICenter.openGuideWindow(t,o))},t.prototype.show=function(t,o){var a=this;e.prototype.show.call(this),t.once(cc.Node.EventType.TOUCH_END,function(){a.toBack()},this),this.fitGuideMask(t,o)},t.prototype.fitGuideMask=function(e,t){var o=e.parent.convertToWorldSpaceAR(e.position),a=this.node.convertToNodeSpaceAR(o);this.maskNode.position=a,this.blackNode.position=new cc.Vec3(-a.x,-a.y,0),this.fitFinger(a,t)},t.prototype.fitFinger=function(e,t){var o=0,i=cc.Vec2.ONE,r=e,n=new cc.Vec2(r.x,r.y);switch(t){case a.Top:o=180,i.x=-1,r.y+=.5*this.maskNode.height,n.y=r.y+30;break;case a.Buttom:o=0,r.y-=.5*this.maskNode.height,n.y=r.y-30;break;case a.Left:o=-90,r.x-=.5*this.maskNode.height,n.x=r.x-30;break;case a.Right:o=90,r.x+=.5*this.maskNode.height,n.x=r.x+30}this.fingerNode.angle=o,this.fingerNode.scaleX=i.x,this.fingerNode.scaleY=i.y,this.fingerNode.position=r;var c=cc.moveTo(.5,n),l=cc.moveTo(.5,s.default.vec2(r));this.fingerNode.runAction(cc.sequence(c,l).repeatForever())},t.prototype.onHide=function(){e.prototype.onHide.call(this),this.fingerNode.stopAllActions()},__decorate([u(cc.Node)],t.prototype,"maskNode",void 0),__decorate([u(cc.Node)],t.prototype,"blackNode",void 0),__decorate([u(cc.Node)],t.prototype,"fingerNode",void 0),__decorate([l],t)}(i.default);o.default=d,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/util/MathUtil":"MathUtil","../UICenter":"UICenter"}],HelperWindow:[function(e,t,o){"use strict";cc._RF.push(t,"b83487+a8RIh6Cdo8mwPtbD","HelperWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("../../global/AudioMgr"),r=e("../../core/global/I18N"),n=cc._decorator,s=n.ccclass,c=n.property,l=function(){function e(){this.spriteFrame=null,this.text=""}return __decorate([c(cc.SpriteFrame)],e.prototype,"spriteFrame",void 0),__decorate([c(cc.String)],e.prototype,"text",void 0),__decorate([s("HelperData")],e)}(),u=function(){function e(){this.helperDatas=[],this.textTitle=""}return __decorate([c(l)],e.prototype,"helperDatas",void 0),__decorate([c(cc.String)],e.prototype,"textTitle",void 0),__decorate([s("helperDataArr")],e)}(),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.descLabel=null,t.descSprite=null,t.helperDataArr=[],t.rightBtn=null,t.indexLabel=null,t.helperDatas=[],t.curIndex=0,t.helperIndex=0,t}return __extends(t,e),t.prototype.show=function(t,o){e.prototype.show.call(this),this.onFinished=o,this.curIndex=0,(t<0||t>=this.helperDataArr.length)&&(t=0),this.helperIndex=t,this.helperDatas=this.helperDataArr[t].helperDatas,this.showItem(),this.initLanguage()},t.prototype.initLanguage=function(){this.titleLabel.string=r.default.get(this.helperDataArr[this.helperIndex].textTitle)},t.prototype.onLeftClick=function(){this.curIndex--,this.curIndex<0?this.curIndex=0:(this.showItem(),i.AudioMgr.clickOK())},t.prototype.onRightClick=function(){this.curIndex++,this.curIndex>=this.helperDatas.length?this.curIndex=this.curIndex-1:(this.showItem(),i.AudioMgr.clickOK())},t.prototype.showItem=function(){var e=this.helperDatas[this.curIndex];this.descLabel.string=r.default.get(e.text),this.descSprite.spriteFrame=e.spriteFrame,this.indexLabel.string=this.curIndex+1+"/"+this.helperDatas.length},t.prototype.onHide=function(){e.prototype.onHide.call(this),this.onFinished&&this.onFinished()},t.prototype.toBack=function(){e.prototype.toBack.call(this),i.AudioMgr.clickOK()},__decorate([c(cc.Label)],t.prototype,"titleLabel",void 0),__decorate([c(cc.Label)],t.prototype,"descLabel",void 0),__decorate([c(cc.Sprite)],t.prototype,"descSprite",void 0),__decorate([c(u)],t.prototype,"helperDataArr",void 0),__decorate([c(cc.Node)],t.prototype,"rightBtn",void 0),__decorate([c(cc.Label)],t.prototype,"indexLabel",void 0),__decorate([s],t)}(a.default);o.default=d,cc._RF.pop()},{"../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../global/AudioMgr":"AudioMgr"}],I18N:[function(e,t,o){"use strict";cc._RF.push(t,"abf1671iaNKxK5cWG2/SCio","I18N"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,r=(a.property,e("./Emitter")),n=e("../../Game"),s=e("../../global/Const"),c=e("../util/ResUtil"),l=function(){function e(){}var t;return t=e,e.getLocalKey=function(e){if(!t.dataMap[e]){var o=e.split("-");1==o.length&&(o=e.split("_")),e=(e=o[0]).toLowerCase(),(e=t.dataMap[e])||(e=t.defaultLU)}return e},e.getCountry=function(e){var t=e.split("-");return 1==t.length&&(t=e.split("_")),t.pop()},e.readProperty=function(e){for(var t={},o=0,a=e.split("\n");o<a.length;o++){var i=a[o];if("#"!=i.charAt(0)){var r=i.indexOf("=");if(-1!=r){var n=i.substring(0,r);n=n.replace(/[\s]+/g,"");var s=i.substring(r+1,i.length);s=s.trim(),t[n]=s}}}return t},e.get=function(e){return t.datas.hasOwnProperty(e)?t.datas[e]:t.defaultData[e]},e.getFont=function(){return t.font?t.font:this.defaultFont},e.loadProperty=function(e,o){e&&(t.defaultData=t.readProperty(e)),t.datas=o?t.readProperty(o):{}},e.initFont=function(e,o){e&&(t.defaultFont=e),t.font=o||null},e.prototype.languageChange=function(e){this.languageSwitch(e.node.name)},e.prototype.languageSwitch=function(e){n.Game.userData.language=e,n.Game.userData.updateData("l",n.Game.userData.language);var o=t.getLocalKey(e);this.switchFont(o),o!=t.defaultLU?c.ResUtil.loadRes(o,c.eResType.I18n,function(e){t.loadProperty(null,e.text),r.Emitter.fire(s.default.eLanguageChange)}):(t.loadProperty(null,null),r.Emitter.fire(s.default.eLanguageChange))},e.prototype.switchFont=function(e){c.ResUtil.loadRes(e,c.eResType.Font,function(e){t.initFont(null,e)},function(){t.initFont(null,null)})},e.dataMap={zh_CN:"zh_CN",zh:"zh_CN",en_US:"en_US",en:"en_US",es:"es",fr:"fr",hi:"hi",ms:"ms",pl:"pl",pt:"pt",th:"th",tr:"tr",vi:"vi",idd:"idd",tl:"tl"},e.defaultLU="en_US",e.datas={},e.defaultData={},e.defaultFont=null,t=__decorate([i],e)}();o.default=l,cc._RF.pop()},{"../../Game":"Game","../../global/Const":"Const","../util/ResUtil":"ResUtil","./Emitter":"Emitter"}],ICelebrateEffect:[function(e,t,o){"use strict";cc._RF.push(t,"ad15cc7IbVCP7ZuDEAjk+DI","ICelebrateEffect"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ISDK:[function(e,t,o){"use strict";cc._RF.push(t,"09bac88MbpKu4VGoSGuzmqO","ISDK"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator;a.ccclass,a.property,cc._RF.pop()},{}],ISPAYSDK:[function(e,t,o){"use strict";cc._RF.push(t,"8edc3NcphlG7p7KcKCFBns1","ISPAYSDK"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],JudicatorACN:[function(e,t,o){"use strict";cc._RF.push(t,"e3f6dy5FQ1Hib0WXuWdd4sR","JudicatorACN"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Judicator"),i=e("../../data/CardDefine"),r=e("../TaskDefine"),n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.arr=[],t}return __extends(t,e),t.prototype.recover=function(t){e.prototype.recover.call(this,t.tog),this.arr=t.arr},t.prototype.snapshoot=function(){return{arr:this.arr,tog:this.tog}},t.prototype.reset=function(){e.prototype.reset.call(this),this.arr=[]},t.prototype.getProgress=function(){return this.arr.length},t.prototype.getCount=function(){return i.default.SuitCount},t.prototype.onAction=function(e,t){this.isFirst?(this.isFirst=!1,this.judicateTarget(t)):this.judicateIndex(e),console.log("type:",r.CondType[this.type],"subType:",this.subType,"value:",e,"/",this.c)},t.prototype.judicateTarget=function(e){for(var t=0,o=e;t<o.length;t++){var a=o[t];if(a)for(var i=0,r=a.cards;i<r.length;i++){var n=r[i];this.judicateIndex(n.cardData.getSoleNumber())}}},t.prototype.judicateIndex=function(e){i.default.getCardValue(e)==this.c&&(this.arr.findIndex(function(t){return t==e})<0&&this.arr.push(e),this.tog=this.arr.length>=i.default.SuitCount)},t}(a.default);o.default=n,cc._RF.pop()},{"../../data/CardDefine":"CardDefine","../TaskDefine":"TaskDefine","./Judicator":"Judicator"}],Judicator:[function(e,t,o){"use strict";cc._RF.push(t,"a8524O+dRNB5oWzyncudR8v","Judicator"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Condition"),i=e("../TaskDefine"),r=e("../../data/CardDefine"),n=function(e){function t(t,o,a,i){var r=e.call(this,t)||this;return r.subType=o,r.op=a,r.c=i,r.tog=!1,r.isFirst=!0,r}return __extends(t,e),t.prototype.recover=function(t){e.prototype.recover.call(this,t),this.tog=t},t.prototype.snapshoot=function(){return this.tog},t.prototype.isFail=function(){switch(this.op){case i.Operator.LT:return this.tog;case i.Operator.GT:return!this.tog;default:return!1}},t.prototype.isComplete=function(){return this.tog},t.prototype.reset=function(){this.tog=!1},t.prototype.getProgress=function(){return 0},t.prototype.getCount=function(){return 0},t.prototype.onAction=function(e,t){this.isFirst?(this.isFirst=!1,this.judeTarget(t)):this.judeIndex(e),console.log("type:",i.CondType[this.type],"subType:",this.subType,"value:",e,"/",this.c)},t.prototype.judeTarget=function(e){for(var t=0,o=e;t<o.length;t++){var a=o[t];if(a)for(var i=0,r=a.cards;i<r.length;i++){var n=r[i];if(this.judeIndex(n.cardData.getSoleNumber()),this.tog)return}}},t.prototype.judeIndex=function(e){1==this.subType?this.tog=e==this.c:2==this.subType?this.tog=r.default.getCardType(e)==this.c:4==this.subType&&(this.tog=r.default.getCardValue(e)==this.c)},t}(a.Condition);o.default=n,cc._RF.pop()},{"../../data/CardDefine":"CardDefine","../Condition":"Condition","../TaskDefine":"TaskDefine"}],LanguageItem:[function(e,t,o){"use strict";cc._RF.push(t,"e340fSO9IFFsY7Wi2P1Hfd6","LanguageItem"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,r=a.property,n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.border=null,t.lanName=null,t._seletced=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.border.active=!1},t.prototype.setData=function(e,t){void 0===t&&(t=null),this._data=e,this._parentNode=t,this.icon.spriteFrame=e.icon,this.lanName.string=e.lanName},t.prototype.start=function(){},t.prototype.itemClick=function(){(this._parentNode||this.node.parent).emit("itemClick",this._data,this)},Object.defineProperty(t.prototype,"seletced",{get:function(){return this._seletced},set:function(e){this._seletced!=e&&(this._seletced=e,this.border.active=e)},enumerable:!1,configurable:!0}),__decorate([r(cc.Sprite)],t.prototype,"icon",void 0),__decorate([r(cc.Node)],t.prototype,"border",void 0),__decorate([r(cc.Label)],t.prototype,"lanName",void 0),__decorate([i],t)}(cc.Component);o.default=n,cc._RF.pop()},{}],LanguageWindow:[function(e,t,o){"use strict";cc._RF.push(t,"5a5f9hXnSRIspf+NucCGGwd","LanguageWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/global/Emitter"),i=e("../../global/AudioMgr"),r=e("../../core/global/I18N"),n=e("../../Game"),s=e("../../core/UI/WWindow"),c=e("../../sdk/LogEvent"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.changeCardBgLabel=null,t.scrollView=null,t.languages=["en_US","zh_CN","es","fr","hi","idd","ms","pl","pt","th","tl","tr","vi"],t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.addItem("zh_CN","\u7b80\u4f53\u4e2d\u6587"),this.addItem("en_US","English"),this.addItem("es","Espa\xf1ol"),this.addItem("fr","Fran\xe7ais"),this.addItem("hi","\u0939\u093f\u0928\u094d\u0926\u0940"),this.addItem("idd","Indonesia"),this.addItem("ms","Melayu"),this.addItem("pl","Polski"),this.addItem("pt","Portugu\xeas"),this.addItem("th","\u0e44\u0e17\u0e22"),this.addItem("tl","Tagalog"),this.addItem("tr","T\xfcrk dili"),this.addItem("vi","Ti\u1ebfng Vi\u1ec7t"),a.Emitter.register("languageChange",this.initLanguage,this),this.initLanguage(),this.selectLanguageToggle()},t.prototype.show=function(){var t;e.prototype.show.call(this),null===(t=this.scrollView)||void 0===t||t.scrollToTop()},t.prototype.addItem=function(){},t.prototype.itemClickHandler=function(e,t){this.selectedItem!=t&&(this.selectedItem&&(this.selectedItem.seletced=!1),this.selectedItem=t,this.selectedItem.seletced=!0,n.Game.userData.language=e.key,n.Game.I18N.languageSwitch(e.key))},t.prototype.initLanguage=function(){this.changeCardBgLabel.string=r.default.get("L530")},t.prototype.start=function(){},t.prototype.close=function(){i.AudioMgr.clickOK(),this.toBack()},t.prototype.onChooseLanguage=function(e,t){var o=t;n.Game.userData.language=o,n.Game.I18N.languageSwitch(o),c.default.log(c.default.dot_settings_language,{language:o})},t.prototype.selectLanguageToggle=function(){var e=this.languages.findIndex(function(e){return e==n.Game.userData.language});if(!(e<0||e>=this.content.childrenCount)){var t=this.content.children[e].getComponent(cc.Toggle);null!=t&&(t.isChecked=!0)}},__decorate([d(cc.Node)],t.prototype,"content",void 0),__decorate([d(cc.Label)],t.prototype,"changeCardBgLabel",void 0),__decorate([d(cc.ScrollView)],t.prototype,"scrollView",void 0),__decorate([u],t)}(s.default);o.default=p,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../global/AudioMgr":"AudioMgr","../../sdk/LogEvent":"LogEvent"}],LevelData:[function(e,t,o){"use strict";cc._RF.push(t,"fd312vzbf1PL6RYB4990tiQ","LevelData"),Object.defineProperty(o,"__esModule",{value:!0}),o.LevelData=void 0;var a=e("../core/Table/Table"),i=e("../core/Table/TableHelper"),r=e("../core/global/I18N"),n=e("../core/util/StrUtil"),s=e("../Game"),c=function(){function e(){this.level=1,this.title=1,this.sex=0,this.exp=0}return e.copy=function(t){var o=new e;return o.level=t.level,o.title=t.title,o.sex=t.sex,o.exp=t.exp,o},e.addExp=function(e,t){t||(t=s.Game.userData.levelData),t.exp+=e;for(var o=this.getExp(t.level);t.exp>=o;)t.level++,t.exp-=o,o=this.getExp(t.level)},e.getExp=function(e){var t=i.TableHelper.GetField(a.eTable.eTabLevel,e);return t?t.exp:Number.MAX_VALUE},e.getTitle=function(e,t){var o=i.TableHelper.GetField(a.eTable.eTabTitle,e);return o?0==t?r.default.get(o.title_m):r.default.get(o.title_w):n.default.empty},e.isLastTitleByLevel=function(e,t){return this.getLastTitleIdByLevel(e)==t},e.getLastTitleIdByLevel=function(e){var t=i.TableHelper.FindLast(a.eTable.eTabTitle,function(t){return t.unlockLevel<=e});return t?t.id:-1},e.getNearTitleByLevel=function(e,t){var o=i.TableHelper.FindLast(a.eTable.eTabTitle,function(t){return t.unlockLevel<=e});return o?0==t?r.default.get(o.title_m):r.default.get(o.title_w):n.default.empty},e.unlockNewTitle=function(e,t){var o=i.TableHelper.Find(a.eTable.eTabTitle,function(t){return t.unlockLevel>e});return!!o&&o.unlockLevel<=t},e}();o.LevelData=c,cc._RF.pop()},{"../Game":"Game","../core/Table/Table":"Table","../core/Table/TableHelper":"TableHelper","../core/global/I18N":"I18N","../core/util/StrUtil":"StrUtil"}],LevelUpWindow:[function(e,t,o){"use strict";cc._RF.push(t,"84c78mBVEpBR4UywMnUmBT5","LevelUpWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("../../global/AudioMgr"),r=e("../../Game"),n=e("../../core/global/I18N"),s=e("../../core/util/StrUtil"),c=e("../../data/LevelData"),l=e("../../core/global/Emitter"),u=e("../../global/Const"),d=cc._decorator,p=d.ccclass,h=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.confirmLabel=null,t.arriveLabel=null,t.levelLabel=null,t.unlockTitleLabel=null,t}return __extends(t,e),t.prototype.initLanguage=function(){this.titleLabel.string=n.default.get("L875"),this.confirmLabel.string=n.default.get("L1"),this.arriveLabel.string=n.default.get("L874")},t.prototype.show=function(t,o){e.prototype.show.call(this),this.onFinish=o,this.initLanguage();var a=r.Game.userData.levelData.level;this.levelLabel.string=s.default.stringFormat(n.default.get("L873"),a),c.LevelData.unlockNewTitle(t,a)?(this.unlockTitleLabel.string=s.default.stringFormat(n.default.get("L880"),c.LevelData.getNearTitleByLevel(a,r.Game.userData.levelData.sex)),l.Emitter.fire(u.default.eTitleRedPoint,t)):this.unlockTitleLabel.string=s.default.empty,i.AudioMgr.playSFX("levelup_window")},t.prototype.onHide=function(){e.prototype.onHide.call(this),this.onFinish&&this.onFinish()},t.prototype.toBack=function(){e.prototype.toBack.call(this),i.AudioMgr.clickOK()},__decorate([h(cc.Label)],t.prototype,"titleLabel",void 0),__decorate([h(cc.Label)],t.prototype,"confirmLabel",void 0),__decorate([h(cc.Label)],t.prototype,"arriveLabel",void 0),__decorate([h(cc.Label)],t.prototype,"levelLabel",void 0),__decorate([h(cc.Label)],t.prototype,"unlockTitleLabel",void 0),__decorate([p],t)}(a.default);o.default=f,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/util/StrUtil":"StrUtil","../../data/LevelData":"LevelData","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const"}],LevelWindow:[function(e,t,o){"use strict";cc._RF.push(t,"94c93f4unhFT7Eo1OO7M1K3","LevelWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("../AnimationUtil"),r=e("../../core/global/I18N"),n=e("../../core/util/StrUtil"),s=e("../../Game"),c=e("../UICenter"),l=e("../../data/LevelData"),u=e("../../core/global/Emitter"),d=e("../../global/Const"),p=e("../../global/AudioMgr"),h=cc._decorator,f=h.ccclass,g=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.LevelLabel=null,t.expLabel=null,t.levelIcon=null,t.expProgress=null,t.bg=null,t.titleRedPoint=null,t.curLevelData=null,t.titleOpened=!1,t}var o;return __extends(t,e),o=t,t.animate=function(e,t,a){var i=s.Game.uiMgr.getWindow("prefab/LevelWindow");i instanceof o?i.onAnimation(e,t,a):a()},t.prototype.init=function(){var t=this;e.prototype.init.call(this),u.Emitter.register(d.default.eTitleChanged,function(){t.showTitle(s.Game.userData.levelData.title,s.Game.userData.levelData.sex)},this),u.Emitter.register(d.default.eTitleRedPoint,function(e){t.titleRedPoint.active=!0;var o=s.Game.userData.levelData;if(l.LevelData.isLastTitleByLevel(e,o.title)){var a=l.LevelData.getLastTitleIdByLevel(o.level);a>0&&(o.title=a,s.Game.userData.saveLevelData(),u.Emitter.fire(d.default.eTitleChanged))}},this),this.titleRedPoint.active=!1},t.prototype.show=function(t,o){e.prototype.show.call(this),this.enableTitleClick=o,this.bg.active=!1,t?this.showLevelData(t):this.showLevelData(s.Game.userData.levelData)},t.prototype.showLevelData=function(e){this.curLevelData=e;var t=l.LevelData.getExp(e.level);this.showTitle(e.title,e.sex),this.showLevel(e.level),this.showExp(e.exp,t)},t.prototype.showTitle=function(e,t){this.titleLabel.string=l.LevelData.getTitle(e,t)},t.prototype.showLevel=function(e){this.LevelLabel.string=n.default.stringFormat(r.default.get("L873"),e)},t.prototype.showExp=function(e,t){this.expLabel.string=e+"/"+t,this.expProgress.progress=e/t},t.prototype.onAnimation=function(e,t,o){var a=this,r=this.curLevelData.level;i.default.bezierFly(this.node,e,this.levelIcon,t,10,function(e){l.LevelData.addExp(e,a.curLevelData),a.showLevel(a.curLevelData.level),a.showExp(a.curLevelData.exp,l.LevelData.getExp(a.curLevelData.level))},function(e){e?p.AudioMgr.playSFX("xp_loop"):p.AudioMgr.playSFX("xp_end")},function(){r<a.curLevelData.level?(u.Emitter.fire(d.default.eLevelChanged),c.UICenter.openLevelUpWindow(r,o)):o&&o()})},t.prototype.onTitleClick=function(){var e=this;this.enableTitleClick&&(this.titleRedPoint.active=!1,this.titleOpened=!0,this.bg.active=!0,this.bg.runAction(cc.fadeTo(.25,100)),s.Game.uiMgr.showWindow("prefab/TitleWindow",function(){e.titleOpened=!1,e.bg.runAction(cc.sequence(cc.fadeTo(.2,0),cc.callFunc(function(){e.bg.active=!1})))}),p.AudioMgr.playSFX("button_click"))},t.prototype.toBack=function(){e.prototype.toBack.call(this),this.titleOpened&&s.Game.uiMgr.hideWindow("prefab/TitleWindow")},__decorate([g(cc.Label)],t.prototype,"titleLabel",void 0),__decorate([g(cc.Label)],t.prototype,"LevelLabel",void 0),__decorate([g(cc.Label)],t.prototype,"expLabel",void 0),__decorate([g(cc.Node)],t.prototype,"levelIcon",void 0),__decorate([g(cc.ProgressBar)],t.prototype,"expProgress",void 0),__decorate([g(cc.Node)],t.prototype,"bg",void 0),__decorate([g(cc.Node)],t.prototype,"titleRedPoint",void 0),o=__decorate([f],t)}(a.default);o.default=m,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/util/StrUtil":"StrUtil","../../data/LevelData":"LevelData","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../AnimationUtil":"AnimationUtil","../UICenter":"UICenter"}],LoaderWindow:[function(e,t,o){"use strict";cc._RF.push(t,"f9a86Cf4zVPY7iC2yeQGgM6","LoaderWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../core/UI/WWindow"),i=e("../Game"),r=cc._decorator,n=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loading=null,t.isError=!1,t}return __extends(t,e),t.showNow=function(e){void 0===e&&(e=!1),i.Game.uiMgr.showWindow("prefab/LoaderWindow",e)},t.hideNow=function(){i.Game.uiMgr.hideWindow("prefab/LoaderWindow")},t.prototype.onLoad=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.isError&&e.toBack()},this)},t.prototype.show=function(t){e.prototype.show.call(this),this.isError=t,this.loading.active=!t},__decorate([s(cc.Node)],t.prototype,"loading",void 0),__decorate([n],t)}(a.default);o.default=c,cc._RF.pop()},{"../Game":"Game","../core/UI/WWindow":"WWindow"}],LoadingWindow:[function(e,t,o){"use strict";cc._RF.push(t,"07faeZQ5cpEpoM1qlQ9FR60","LoadingWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../global/Loading"),i=cc._decorator,r=i.ccclass,n=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressText=null,t.progress=null,t}return __extends(t,e),t.prototype.updateProgressUI=function(e){this.progressText&&(this.progressText.string=e+"%",this.progress.progress=e/100)},t.prototype.getGameScene=function(){return"db://assets/scene/Game.fire"},__decorate([n({type:cc.Label,tooltip:"\u52a0\u8f7d\u8fdb\u5ea6"})],t.prototype,"progressText",void 0),__decorate([n({type:cc.ProgressBar,tooltip:"\u52a0\u8f7d\u8fdb\u5ea6"})],t.prototype,"progress",void 0),__decorate([r],t)}(a.default);o.default=s,cc._RF.pop()},{"../../global/Loading":"Loading"}],Loading:[function(e,t,o){"use strict";cc._RF.push(t,"dc4calGVF9Go578H7kUAJWA","Loading"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../sdk/LogEvent"),i=e("./GameConfig"),r=e("./DataManager"),n=e("../Game"),s=e("../core/util/MathUtil"),c=e("../App"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.continer=null,t.preProgress=0,t.resProgress=0,t.dataProress=0,t.sceneProress=0,t.dataLoaded=!1,t.resLoaded=!1,t.time=0,t.logDot=0,t}var o;return __extends(t,e),o=t,t.prototype.updateProgressUI=function(){},t.prototype.getGameScene=function(){return""},t.prototype.onLoad=function(){cc.macro.ENABLE_MULTI_TOUCH=!1,a.default.loading(0,this.time,n.Game.userData.userType),o.instance=this,cc.debug.setDisplayStats(!1),2==i.default.loadingType&&(this.continer.active=!1)},t.prototype.start=function(){var e=this;cc.sys.os==cc.sys.OS_ANDROID?setTimeout(function(){e.hideNativeSplash(),e.preloadGame()},100):this.preloadGame()},t.prototype.hideNativeSplash=function(){},t.prototype.updateProress=function(){var e=Math.floor(this.resProgress+this.dataProress+this.sceneProress);this.preProgress<e?this.preProgress=e:e=this.preProgress,2==i.default.loadingType&&(e=10+.9*e,FBInstant.setLoadingProgress(e)),e=s.default.clamp(e,0,100),this.updateProgressUI(e),this.logDot+20<=e&&(this.logDot+=20,a.default.loading(this.logDot,this.time,n.Game.userData.userType))},t.prototype.preloadGame=function(){n.Game.userData.initData(o.instance.userDataLoaded,o.instance);var e=this.getGameScene();e&&cc.director.preloadScene(e,function(){o.instance.sceneProress=5,o.instance.updateProress()},function(){console.log("ResLoaded")}),this.preLoadUI()},t.prototype.preLoadUI=function(){cc.loader.loadResDir("prefab",function(e,t){o.instance.resProgress=50*e/t,o.instance.updateProress()},function(e,t,a){if(!e)for(var i=0;i<a.length;i++)n.Game.uiMgr.preLoadRes.add(a[i],t[i]);o.instance.resLoaded=!0,o.instance.loadGame()})},t.prototype.userDataLoaded=function(){console.log("UserDataLoaded"),r.default.loadData(function(e,t){o.instance.dataProress=45*e/t,o.instance.updateProress()},o.instance.localdataLoaded,o.instance)},t.prototype.localdataLoaded=function(){o.instance.updateProress(),i.default.initData(),n.Game.userData.GameDataLoaded(),o.instance.dataLoaded=!0,o.instance.loadGame(),console.log("GameDataLoaded")},t.prototype.loadGame=function(){o.instance.resLoaded&&o.instance.dataLoaded&&(2==i.default.loadingType?FBInstant.startGameAsync().then(function(){cc.director.loadScene(o.instance.getGameScene(),function(){})}).catch(function(e){cc.error(e)}):cc.director.loadScene(o.instance.getGameScene(),function(){o.instance.setGameBg(),n.Game.gameMgr.ReadyGame(),a.default.log(a.default.dot_enter_game,{user:n.Game.userData.userType}),c.default.instance.startShowBanner()}))},t.prototype.setGameBg=function(){var e=n.Game.userData.gameBG;"default"==e&&(e="bgtable_1"),n.Game.gameRes.getBgSpriteFrame(e,function(e){n.Game.gameMgr.stage.view.setBg(e)},this)},t.prototype.update=function(e){this.time+=e},__decorate([d({type:cc.Node,tooltip:"\u5bb9\u5668"})],t.prototype,"continer",void 0),o=__decorate([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../App":"App","../Game":"Game","../core/util/MathUtil":"MathUtil","../sdk/LogEvent":"LogEvent","./DataManager":"DataManager","./GameConfig":"GameConfig"}],LogEvent:[function(e,t,o){"use strict";cc._RF.push(t,"d0593wb7TVP+agUQFpasApL","LogEvent"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../global/GameConfig"),i=e("../Game"),r=cc._decorator.ccclass,n=function(){function e(){}var t;return t=e,e.loading=function(e,o,r){var n=a.default.SDK.getVersion();t.log(t.LOADING,{progress:e,time:o,user:r,version:n,FirstDate:i.Game.userData.userLoginInfo[0],FirstTime:i.Game.userData.userLoginInfo[1],Days:i.Game.userData.userLoginInfo[2],Day30:i.Game.userData.userLoginInfo[3]})},e.login=function(){var e=a.default.SDK.getVersion();t.log(t.LOGIN,{user:i.Game.userData.userType,version:e,FirstDate:i.Game.userData.userLoginInfo[0],FirstTime:i.Game.userData.userLoginInfo[1],Days:i.Game.userData.userLoginInfo[2],Day30:i.Game.userData.userLoginInfo[3]})},e.error=function(e,o,i,r,n){a.default.SDK.logEvent(t.ERROR,{msg:e,url:o,line:i,pos:r,stack:n.stack})},e.dot=function(e){t.log(e)},e.dotInMol=function(e,o){var a=i.Game.userData.flopThree?3:1;o?t.log(e,{cardType:a,value:o}):t.log(e,{cardType:a})},e.dotValue=function(e,o){t.log(e,{value:o})},e.log=function(e,t){if(a.default.SDK.logEvent(e,t),a.default.SDK.logEventToFirebase(e,t),t){var o="";for(var i in t)""!=o&&(o+=","),o+=i+","+t[i];console.log("logEvent:"+e+","+o)}else console.log("logEvent:"+e)},e.dot_game_start="Solitaire_gamestart",e.dot_game_restart="Solitaire_gamerestart",e.dot_game_win="Solitaire_gamewin",e.dot_game_fail="Solitaire_gamefail",e.dot_enter_game="Solitaire_enter_game",e.dot_card_change="Solitaire_change_back",e.dot_table_change="Solitaire_change_table",e.dot_cardface_change="Solitaire_change_just",e.dot_settings_soundeffect="Solitaire_settings_soundeffect",e.dot_settings_notice="Solitaire_settings_notice",e.dot_settings_language="Solitaire_settings_language",e.dot_settings_deal3cards="Solitaire_settings_deal3cards",e.dot_settings_leftmode="Solitaire_settings_leftmode",e.dot_game_grading="Solitaire_game_grading",e.dot_game_P5="Solitaire_game_P5",e.dot_ad_reward="Solitaire_reward_ad",e.dot_ad_banner="Solitaire_banner_ad",e.dot_ad_interst="Solitaire_interst_ad",e.LOADING="Solitaire_LOADING",e.LOGIN="Solitaire_LOGIN",e.ERROR="ERROR",t=__decorate([r],e)}();o.default=n,cc._RF.pop()},{"../Game":"Game","../global/GameConfig":"GameConfig"}],MagicAdWindow:[function(e,t,o){"use strict";cc._RF.push(t,"e20c4xllstNd5PAWcMhn7Rx","MagicAdWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/global/Emitter"),i=e("../../core/global/I18N"),r=e("../../core/UI/WWindow"),n=e("../../data/DataTools"),s=e("../../Game"),c=e("../../global/Const"),l=e("../../sdk/LogEvent"),u=e("../../sdk/SDKConst"),d=cc._decorator,p=d.ccclass,h=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lab_title=null,t.lab_content=null,t.lab_comfirm=null,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),a.Emitter.register(c.default.eLanguageChange,this.initLanguage,this),this.initLanguage()},t.prototype.initLanguage=function(){this.lab_title.string=i.default.get("L860"),this.lab_content.string=i.default.get("L861"),this.lab_comfirm.string=i.default.get("L387")},t.prototype.onWatchClick=function(){s.Game.sdkPipeline.showReward(function(e){e&&(n.default.addMagic(1),l.default.log(l.default.dot_ad_reward,{position:u.default.AD_PLAY_POS_BUY_MAGIC,magic_num:s.Game.userData.magicCount}))},this,u.default.AD_PLAY_POS_BUY_MAGIC),this.toBack()},__decorate([h(cc.Label)],t.prototype,"lab_title",void 0),__decorate([h(cc.RichText)],t.prototype,"lab_content",void 0),__decorate([h(cc.Label)],t.prototype,"lab_comfirm",void 0),__decorate([p],t)}(r.default);o.default=f,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../data/DataTools":"DataTools","../../global/Const":"Const","../../sdk/LogEvent":"LogEvent","../../sdk/SDKConst":"SDKConst"}],MagicComp:[function(e,t,o){"use strict";cc._RF.push(t,"ba2c4hBZ/tFAqzwEajCDgqv","MagicComp"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../data/CardData"),i=function(){function e(e,t){this.mStage=null,this.mOnUse=null,this.mStage=e,this.mOnUse=t}return e.prototype.find=function(){for(var e=[],t=0,o=this.mStage.gameSlots;t<o.length;t++){var a=o[t];e.push.apply(e,a.cards)}if(0==e.length)return null;e.sort(function(e,t){return e.cardData.value-t.cardData.value});for(var i=null,r=null,n=0,s=e;n<s.length;n++){var c=s[n];if(!c.isOpen&&(i=this.findTargetSlotBy(this.mStage.targetSlots,c))){r=c;break}}if(!i)return null;var l=this.getDestSlot(r);return l?{dest:l,target:i,card:r}:null},e.prototype.use=function(e,t){for(var o,i=e.dest,r=e.target,n=e.card,s=this.getDragCards(n),c=0,l=s;c<l.length;c++){var u=l[c];i.removeCard(u)}return n.flopOpen(),this.mStage.moveToSlot({moveType:a.MoveType.Normal},i,r,n),s.shift(),(o=this.mStage).moveToSlot.apply(o,__spreadArrays([{moveType:a.MoveType.Normal,callback:t},i,i],s)),this.mOnUse&&this.mOnUse(),!0},e.prototype.getDestSlot=function(e){for(var t=0,o=this.mStage.gameSlots;t<o.length;t++){var a=o[t];if(a.cards.indexOf(e)>=0)return a}return null},e.prototype.findTargetSlotBy=function(e,t){for(var o=null,a={ignoreNext:!0},i=0,r=e;i<r.length;i++){var n=r[i];if(n.canMoveInto(t,a)){o=n;break}}return o},e.prototype.getDragCards=function(e){for(var t=[];e;)t.push(e),e=e.next;return t},e}();o.default=i,cc._RF.pop()},{"../data/CardData":"CardData"}],MagicWindow:[function(e,t,o){"use strict";cc._RF.push(t,"e9eeckjoQlBxqedc3RMuEy4","MagicWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("../../core/util/StrUtil"),r=e("../../core/global/I18N"),n=e("../../global/AudioMgr"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.useLabel=null,t.tipLabel=null,t}return __extends(t,e),t.prototype.show=function(t){e.prototype.show.call(this),this.tipLabel.string=i.default.stringFormat(r.default.get("L862"),t),this.useLabel.string=r.default.get("L387")},t.prototype.toBack=function(){e.prototype.toBack.call(this),n.AudioMgr.clickOK()},__decorate([l(cc.Label)],t.prototype,"useLabel",void 0),__decorate([l(cc.RichText)],t.prototype,"tipLabel",void 0),__decorate([c],t)}(a.default);o.default=u,cc._RF.pop()},{"../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../core/util/StrUtil":"StrUtil","../../global/AudioMgr":"AudioMgr"}],MathUtil:[function(e,t,o){"use strict";cc._RF.push(t,"fe90a+QE4NC6aP2o+wsueeg","MathUtil"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function e(){}return e.clamp=function(e,t,o){return e<t?e=t:e>o&&(e=o),e},e.clamp01=function(e){return e<0?e=0:e>1&&(e=1),e},e.randomRange=function(e,t){var o=t-e;return e+Math.floor(Math.random()*o)},e.randomRangeInt=function(e,t){return cc.math.randomRangeInt(e,t)},e.vec3=function(e,t){return e instanceof cc.Vec2?new cc.Vec3(e.x,e.y,0):new cc.Vec3(e,t,0)},e.vec2=function(e){return e instanceof cc.Vec2?e:new cc.Vec2(e.x,e.y)},e.shuffle=function(e){for(var t,o=e.length;o;){var a=Math.floor(Math.random()*o--);t=[e[o],e[a]],e[a]=t[0],e[o]=t[1]}return e},e.deg2Rad=Math.PI/180,e.rad2Deg=180/Math.PI,e}();o.default=a,cc._RF.pop()},{}],MessageBox:[function(e,t,o){"use strict";cc._RF.push(t,"6925ftezzRDDYH3Etlsm33F","MessageBox"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=cc._decorator,r=i.ccclass,n=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.text=null,t.lab_confirm=null,t}return __extends(t,e),t.prototype.show=function(t,o){e.prototype.show.call(this),this.text.string=t,this.lab_confirm.string=o},__decorate([n(cc.RichText)],t.prototype,"text",void 0),__decorate([n(cc.Label)],t.prototype,"lab_confirm",void 0),__decorate([r],t)}(a.default);o.default=s,cc._RF.pop()},{"../../core/UI/WWindow":"WWindow"}],NewBGWindow:[function(e,t,o){"use strict";cc._RF.push(t,"5f066+5rVNCQIzu+tUvgzar","NewBGWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/global/Emitter"),i=e("../../core/global/I18N"),r=e("../../core/Table/Table"),n=e("../../core/Table/TableHelper"),s=e("../../core/UI/WWindow"),c=e("../../Game"),l=e("../../global/Const"),u=e("../../global/DataManager"),d=e("../../sdk/LogEvent"),p=cc._decorator,h=p.ccclass,f=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lab_title=null,t.lab_text=null,t.lbl_use=null,t.image_bg=null,t.mNewIdx=0,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.initLanguage()},t.prototype.initLanguage=function(){this.lab_title.string=i.default.get("L4024"),this.lab_text.string=i.default.get("L4025"),this.lbl_use.string=i.default.get("L863")},t.prototype.show=function(t){e.prototype.show.call(this),this.mNewIdx=t;var o=n.TableHelper.GetFieldByIndex(r.eTable.eTabGameBg,t),a=u.default.getGameBg(o.res);a&&(this.image_bg.spriteFrame=a)},t.prototype.onUseBGClick=function(){var e=n.TableHelper.GetFieldByIndex(r.eTable.eTabGameBg,this.mNewIdx);c.Game.userData.gameBG=e.res;var t=u.default.getGameBg(e.res);t&&a.Emitter.fire(l.default.eChangeGameBG,t),u.default.getGameBgBig(e.res,function(e){c.Game.gameMgr.stage.view.setBg(e)},this);var o=this.mNewIdx+1;d.default.log(d.default.dot_table_change,{unlocknum:o,table_id:c.Game.userData.gameBG,table_from:"reward"}),this.toBack()},__decorate([f(cc.Label)],t.prototype,"lab_title",void 0),__decorate([f(cc.Label)],t.prototype,"lab_text",void 0),__decorate([f(cc.Label)],t.prototype,"lbl_use",void 0),__decorate([f(cc.Sprite)],t.prototype,"image_bg",void 0),__decorate([h],t)}(s.default);o.default=g,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../global/Const":"Const","../../global/DataManager":"DataManager","../../sdk/LogEvent":"LogEvent"}],NewRecordWindow:[function(e,t,o){"use strict";cc._RF.push(t,"f5095x6SHhKwpdvWK1+gyT3","NewRecordWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("../../Game"),r=e("../../data/DataTools"),n=e("../../core/global/I18N"),s=e("../../core/util/DateUtils"),c=e("../../global/AudioMgr"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.recordLabel=null,t}return __extends(t,e),t.check=function(e){var t="",o=!1;r.default.timeNewRecord()&&(t+=n.default.get("L108")+":"+s.default.timeFormat(i.Game.userData.time,!1)+"\n",o=!0),r.default.stepNewRecord()&&(t+=n.default.get("L109")+":"+i.Game.userData.step+"\n",o=!0),r.default.scoreNewRecord()&&(t+=n.default.get("L107")+":"+i.Game.userData.score,o=!0),o?i.Game.uiMgr.showWindow("prefab/NewRecordWindow",t,e):e()},t.prototype.show=function(t,o){var a=this;e.prototype.show.call(this),this.recordLabel.string=t,this.finished=o,this.timer=setTimeout(function(){a.timer=void 0,a.toBack()},3e3),c.AudioMgr.newRecord(),this.soundId=c.AudioMgr.curEffectId},t.prototype.onHide=function(){e.prototype.onHide.call(this),this.finished&&this.finished()},t.prototype.toBack=function(){this.soundId&&(cc.audioEngine.stopEffect(this.soundId),this.soundId=void 0),this.timer&&(clearTimeout(Number(this.timer)),this.timer=void 0),e.prototype.toBack.call(this)},__decorate([d(cc.Label)],t.prototype,"recordLabel",void 0),__decorate([u],t)}(a.default);o.default=p,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../core/util/DateUtils":"DateUtils","../../data/DataTools":"DataTools","../../global/AudioMgr":"AudioMgr"}],PEDictionary:[function(e,t,o){"use strict";cc._RF.push(t,"cf766kVkDxDqY9NvoMWOhZk","PEDictionary"),Object.defineProperty(o,"__esModule",{value:!0}),o.PEDictionary=void 0;var a=function(){function e(e){void 0===e&&(e=!1),this.mKeys=[],this.mValues=[],this.mIsCache=e}return Object.defineProperty(e.prototype,"count",{get:function(){return this.mKeys.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return this.mKeys},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this.mValues},enumerable:!1,configurable:!0}),e.prototype.clear=function(){if(this.mIsCache)for(var e=0,t=this.mKeys;e<t.length;e++)delete this[t[e]];this.mKeys=[],this.mValues=[]},e.prototype.add=function(e,t){if(!this.containsKey(e))return this.mIsCache&&(this[e]=t),this.mKeys.push(e),this.mValues.push(t);console.error("The same key in dictionary! key="+e)},e.prototype.remove=function(e){var t=this.mKeys.indexOf(e,0);-1!==t&&(this.mKeys.splice(t,1),this.mValues.splice(t,1),this.mIsCache&&delete this[e])},e.prototype.setDicValue=function(e,t){var o=this.mKeys.indexOf(e,0);return o>=0&&(this.mKeys[o]=e,this.mValues[o]=t,this.mIsCache&&(this[e]=t),!0)},e.prototype.tryGetValue=function(e){var t=this.mKeys.indexOf(e,0);return t>=0?this.mValues[t]:null},e.prototype.containsKey=function(e){return this.mKeys.indexOf(e,0)>=0},e}();o.PEDictionary=a,cc._RF.pop()},{}],PNGDataDecoder:[function(e,t,o){"use strict";cc._RF.push(t,"84b85ymX0hA9YLj5qrI9rlI","PNGDataDecoder"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ByteArray"),i=e("./zlib/FlateStream"),r=function(){function e(){}return e.unencryptionString=function(e){e.position=33;var t=e.readUnsignedInt(),o=(e.readUnsignedInt(),new a.default);e.readBytes(o,0,t),o.position=0;var r=new i.default(o.bytes);(o=new a.default(r.getBytes(r.bufferLength))).readByte(),t=o.readUnsignedInt();var n=o.readUnsignedInt();o.position=0;for(var s=new a.default,c=0;c<n;c++){o.readByte();for(var l=0;l<n;l++)s.writeUnsignedInt(o.readUnsignedInt())}return s.position=8,s.readUTFBytes(t)},e.unencryption=function(e){e.position=33;var t=e.readUnsignedInt(),o=(e.readUnsignedInt(),new a.default);e.readBytes(o,0,t),o.position=0;var r=new i.default(o.bytes);(o=new a.default(r.getBytes(r.bufferLength))).readByte(),t=o.readUnsignedInt();var n=o.readUnsignedInt();o.position=0;for(var s=new a.default,c=0;c<n;c++){o.readByte();for(var l=0;l<n;l++)s.writeUnsignedInt(o.readUnsignedInt())}s.position=8;var u=new a.default;return s.readBytes(u,0,t),u},e}();o.default=r,cc._RF.pop()},{"./ByteArray":"ByteArray","./zlib/FlateStream":"FlateStream"}],PuzzleWindow:[function(e,t,o){"use strict";cc._RF.push(t,"2eb0433bPNBsLW8Wu5FN7GF","PuzzleWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("../../core/global/I18N"),r=e("../../global/AudioMgr"),n=e("../../core/Table/TableHelper"),s=e("../../core/Table/Table"),c=e("../../global/DataManager"),l=e("../../Game"),u=e("../../core/global/Emitter"),d=e("../../global/Const"),p=cc._decorator,h=p.ccclass,f=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.puzzleIcon=null,t.puzzleIconAni=null,t.chapterName=null,t.descLabel=null,t.confirmLabel=null,t}return __extends(t,e),t.prototype.initLanguage=function(){this.confirmLabel.string=i.default.get("L1")},t.prototype.show=function(t,o){e.prototype.show.call(this),this.initLanguage(),this.puzzleIconAni.node.active=!1,this.onFinished=o;var a=n.TableHelper.GetField(s.eTable.eTabFragment,t);this.puzzleIcon.spriteFrame=c.default.story_puzzle.getSpriteFrame(a.fragmentRes),this.puzzleIconAni.spriteFrame=c.default.story_puzzle.getSpriteFrame(a.fragmentRes),this.descLabel.string=i.default.get("L609")+i.default.get("L"+a.name);var r=n.TableHelper.GetField(s.eTable.eTabPlot,a.plotId);this.chapterName.string=i.default.get("L610")+i.default.get("L"+r.name)},t.prototype.moveAction=function(){var e=this;this.puzzleIconAni.node.active=!0,this.puzzleIconAni.node.scale=1,this.puzzleIconAni.node.parent=l.Game.uiMgr.topUI,this.puzzleIconAni.node.position=l.Game.uiMgr.topUI.convertToNodeSpaceAR(this.puzzleIcon.node.convertToWorldSpaceAR(cc.Vec3.ZERO)),this.puzzleIcon.node.position;var t=cc.scaleTo(1,.2),o=l.Game.gameMgr.stageUI.storyIcon.convertToWorldSpaceAR(cc.Vec2.ZERO);o=l.Game.uiMgr.topUI.convertToNodeSpaceAR(o);var a=cc.moveTo(1,o);this.puzzleIconAni.node.runAction(cc.sequence(cc.spawn(t,a),cc.callFunc(function(){e.puzzleIconAni.node.parent=e.puzzleIcon.node.parent,u.Emitter.fire(d.default.eOnCheckRedPoint)})))},t.prototype.toBack=function(){this.moveAction(),e.prototype.toBack.call(this),r.AudioMgr.clickOK()},t.prototype.onHide=function(){e.prototype.onHide.call(this),this.onFinished&&this.onFinished()},__decorate([f(cc.Sprite)],t.prototype,"puzzleIcon",void 0),__decorate([f(cc.Sprite)],t.prototype,"puzzleIconAni",void 0),__decorate([f(cc.Label)],t.prototype,"chapterName",void 0),__decorate([f(cc.Label)],t.prototype,"descLabel",void 0),__decorate([f(cc.Label)],t.prototype,"confirmLabel",void 0),__decorate([h],t)}(a.default);o.default=g,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../../global/DataManager":"DataManager"}],RecordMax:[function(e,t,o){"use strict";cc._RF.push(t,"f44d58RsFdAsIRSPAFN3m4M","RecordMax"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAction=function(t){t>this.current&&e.prototype.onAction.call(this,t)},t}(e("./Recorder").default);o.default=a,cc._RF.pop()},{"./Recorder":"Recorder"}],RecorderClearCol:[function(e,t,o){"use strict";cc._RF.push(t,"8bf53lnuSZDSJAWPoA8mf5M","RecorderClearCol"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Recorder"),i=e("../../data/CardDefine"),r=e("../TaskDefine"),n=function(e){function t(t,o,a){var i=e.call(this,t,o,a)||this;return i.op=o,i.count=a,i.record=0,i}return __extends(t,e),t.prototype.recover=function(e){this.current=e.current,this.record=e.record},t.prototype.snapshoot=function(){return{current:this.current,record:this.record}},t.prototype.reset=function(){this.count<=i.default.GameRowCount&&e.prototype.reset.call(this),this.record=0},t.prototype.onAction=function(e){e>this.record&&(this.current=this.current-this.record+e,this.record=e),console.log("type:",r.CondType[this.type],"value:",this.current,r.Operator[this.op],this.count)},t}(a.default);o.default=n,cc._RF.pop()},{"../../data/CardDefine":"CardDefine","../TaskDefine":"TaskDefine","./Recorder":"Recorder"}],Recorder:[function(e,t,o){"use strict";cc._RF.push(t,"a6a33okcjJOE4iGDJ4E8FH1","Recorder"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Condition"),i=e("../TaskDefine"),r=function(e){function t(t,o,a){var i=e.call(this,t)||this;return i.op=o,i.count=a,i.current=0,i}return __extends(t,e),t.prototype.recover=function(t){e.prototype.recover.call(this,t),this.current=t},t.prototype.snapshoot=function(){return this.current},t.prototype.isFail=function(){switch(this.op){case i.Operator.E:return!1;case i.Operator.LT:return this.current>=this.count;case i.Operator.LTE:return this.current>this.count;case i.Operator.GT:case i.Operator.GTE:return!1;default:return this.current>=this.count}},t.prototype.isComplete=function(){switch(this.op){case i.Operator.E:return this.current==this.count;case i.Operator.LT:return this.current<this.count;case i.Operator.LTE:return this.current<=this.count;case i.Operator.GT:return this.current>this.count;case i.Operator.GTE:return this.current>=this.count;default:return this.current<this.count}},t.prototype.reset=function(){this.current=0},t.prototype.getProgress=function(){return this.current},t.prototype.getCount=function(){return this.count},t.prototype.onAction=function(e){this.current=e,console.log("type:",i.CondType[this.type],"value:",this.current,i.Operator[this.op],this.count)},t}(a.Condition);o.default=r,cc._RF.pop()},{"../Condition":"Condition","../TaskDefine":"TaskDefine"}],RemoveAdFailWindow:[function(e,t,o){"use strict";cc._RF.push(t,"72cc2wvHbFGX7opTIpRsX0J","RemoveAdFailWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/global/Emitter"),i=e("../../core/global/I18N"),r=e("../../core/UI/WWindow"),n=e("../../global/Const"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lab_title=null,t.lab_content=null,t.lab_comfirm=null,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),a.Emitter.register(n.default.eLanguageChange,this.initLanguage,this),this.initLanguage()},t.prototype.initLanguage=function(){this.lab_title.string=i.default.get("L4028"),this.lab_content.string=i.default.get("L4029"),this.lab_comfirm.string=i.default.get("L2")},__decorate([l(cc.Label)],t.prototype,"lab_title",void 0),__decorate([l(cc.RichText)],t.prototype,"lab_content",void 0),__decorate([l(cc.Label)],t.prototype,"lab_comfirm",void 0),__decorate([c],t)}(r.default);o.default=u,cc._RF.pop()},{"../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../global/Const":"Const"}],RemoveAdWindow:[function(e,t,o){"use strict";cc._RF.push(t,"ce0ead9x/FA75Rx8PHMpktV","RemoveAdWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/global/Emitter"),i=e("../../core/global/I18N"),r=e("../../core/Table/Table"),n=e("../../core/Table/TableHelper"),s=e("../../core/UI/WWindow"),c=e("../../data/ShopHelper"),l=e("../../Game"),u=e("../../global/Const"),d=cc._decorator,p=d.ccclass,h=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lab_title=null,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),a.Emitter.register(u.default.eLanguageChange,this.initLanguage,this),this.initLanguage()},t.prototype.initLanguage=function(){this.lab_title.string=i.default.get("L4028")},t.prototype.onBuyClick=function(e,t){var o=this,a=parseInt(t);console.log("clickIdx,",a);var i=0==a?c.default.RemoveAdId:c.default.RemoveAdIdYear,s=n.TableHelper.GetField(r.eTable.eTabShop,i);s&&l.Game.sdkPipeline.purchaseByShopId(s.id,1,function(e){c.default.getInstance().shopDataChange(s,e,1),o.hide()})},t.prototype.onRestoreClick=function(){l.Game.sdkPipeline.suppleMent()},__decorate([h(cc.Label)],t.prototype,"lab_title",void 0),__decorate([p],t)}(s.default);o.default=f,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../data/ShopHelper":"ShopHelper","../../global/Const":"Const"}],ReportWindow:[function(e,t,o){"use strict";cc._RF.push(t,"2457arSHXNKiqefBy7sYbr9","ReportWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../global/AudioMgr"),i=e("../../core/global/Emitter"),r=e("../../core/global/I18N"),n=e("../../Game"),s=e("../../core/UI/WWindow"),c=e("../../global/Const"),l=e("../../core/UI/DialogBox"),u=cc._decorator,d=u.ccclass,p=u.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titelLabel=null,t.nameLabel=[],t.valuesLabel=[],t.resetLabel=null,t.cancelLabel=null,t.nameOneLabel=[],t.valuesOneLabel=[],t.nameThreeLabel=[],t.valuesThreeLabel=[],t.subTitleLabel=[],t.scrollView=null,t.currentIndex=0,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),i.Emitter.register(c.default.eLanguageChange,this.initLanguage,this),this.initLanguage()},t.prototype.initLanguage=function(){this.titelLabel.string=r.default.get("L201"),this.resetLabel.string=r.default.get("L366"),this.cancelLabel.string=r.default.get("L2"),this.subTitleLabel[0].string=r.default.get("L4015"),this.subTitleLabel[1].string=r.default.get("L217"),this.subTitleLabel[2].string=r.default.get("L218"),this.nameLabel[0].string=r.default.get("L352"),this.nameLabel[1].string=r.default.get("L353"),this.nameLabel[2].string=r.default.get("L362"),this.nameLabel[3].string=r.default.get("L4013"),this.nameLabel[4].string=r.default.get("L358"),this.nameLabel[5].string=r.default.get("L339"),this.nameLabel[6].string=r.default.get("L360"),this.nameLabel[7].string=r.default.get("L4014"),this.nameOneLabel[0].string=r.default.get("L352"),this.nameOneLabel[1].string=r.default.get("L353"),this.nameOneLabel[2].string=r.default.get("L362"),this.nameOneLabel[3].string=r.default.get("L4013"),this.nameOneLabel[4].string=r.default.get("L358"),this.nameOneLabel[5].string=r.default.get("L339"),this.nameOneLabel[6].string=r.default.get("L360"),this.nameOneLabel[7].string=r.default.get("L4014"),this.nameThreeLabel[0].string=r.default.get("L352"),this.nameThreeLabel[1].string=r.default.get("L353"),this.nameThreeLabel[2].string=r.default.get("L362"),this.nameThreeLabel[3].string=r.default.get("L4013"),this.nameThreeLabel[4].string=r.default.get("L358"),this.nameThreeLabel[5].string=r.default.get("L339"),this.nameThreeLabel[6].string=r.default.get("L360"),this.nameThreeLabel[7].string=r.default.get("L4014")},t.prototype.show=function(){var t;e.prototype.show.call(this),this.updateUI(),null===(t=this.scrollView)||void 0===t||t.scrollToTop()},t.prototype.updateUI=function(){this.refreshTotal(),this.refreshCardOne(),this.refreshCardThree()},t.prototype.refreshTotal=function(){var e=n.Game.userData.FBData.report,t=n.Game.userData.FBData.report3,o=e[0]+e[1]+t[0]+t[1],a=e[0]+t[0];this.valuesLabel[0].string=o+"",this.valuesLabel[1].string=a+"";var i=n.Game.userData.userSts;this.valuesLabel[2].string=i.streakWin+"",this.valuesLabel[3].string=0==o?"0%":(100*a/o).toFixed(2)+"%",this.valuesLabel[4].string=this.getBestStep()+"",this.valuesLabel[5].string=this.getBestCostTime()+"",this.valuesLabel[6].string=Math.max(e[7],t[7])+"",this.valuesLabel[7].string=e[12]+t[12]+""},t.prototype.getBestStep=function(){var e=0,t=n.Game.userData.FBData.report,o=n.Game.userData.FBData.report3;return t[5]>0&&o[5]>0?e=Math.min(t[5],o[5]):t[5]>0?e=t[5]:o[5]>0&&(e=o[5]),e},t.prototype.getBestCostTime=function(){var e=0,t=n.Game.userData.FBData.report,o=n.Game.userData.FBData.report3;return t[3]>0&&o[3]>0?e=Math.min(t[3],o[3]):t[3]>0?e=t[3]:o[3]>0&&(e=o[3]),e},t.prototype.refreshCardOne=function(){var e=n.Game.userData.FBData.report,t=e[0]+e[1];this.valuesOneLabel[0].string=e[0]+e[1]+"",this.valuesOneLabel[1].string=e[0]+"",this.valuesOneLabel[2].string=e[8]+"",this.valuesOneLabel[3].string=0==t?"0%":(100*e[0]/t).toFixed(2)+"%",this.valuesOneLabel[4].string=e[5]+"",this.valuesOneLabel[5].string=e[3]+"",this.valuesOneLabel[6].string=e[7]+"",this.valuesOneLabel[7].string=e[12]+""},t.prototype.refreshCardThree=function(){var e=n.Game.userData.FBData.report3,t=e[0]+e[1];this.valuesThreeLabel[0].string=e[0]+e[1]+"",this.valuesThreeLabel[1].string=e[0]+"",this.valuesThreeLabel[2].string=e[8]+"",this.valuesThreeLabel[3].string=0==t?"0%":(100*e[0]/t).toFixed(2)+"%",this.valuesThreeLabel[4].string=e[5]+"",this.valuesThreeLabel[5].string=e[3]+"",this.valuesThreeLabel[6].string=e[7]+"",this.valuesThreeLabel[7].string=e[12]+""},t.prototype.onResetDataClick=function(){var e=this,t=new l.DialogBoxData;t.initWith(l.eDialogButtonType.CONFIRM|l.eDialogButtonType.CANCEL,r.default.get("L368"),"",r.default.get("L366"),r.default.get("L2")),t.callback=function(t){t==l.eDialogButtonType.CONFIRM&&e.clearData()},l.default.showWith(t)},t.prototype.clearData=function(){n.Game.userData.clearReportData(1==this.currentIndex),this.updateUI()},t.prototype.start=function(){},t.prototype.close=function(){a.AudioMgr.clickOK(),this.toBack()},__decorate([p(cc.Label)],t.prototype,"titelLabel",void 0),__decorate([p(cc.Label)],t.prototype,"nameLabel",void 0),__decorate([p(cc.Label)],t.prototype,"valuesLabel",void 0),__decorate([p(cc.Label)],t.prototype,"resetLabel",void 0),__decorate([p(cc.Label)],t.prototype,"cancelLabel",void 0),__decorate([p(cc.Label)],t.prototype,"nameOneLabel",void 0),__decorate([p(cc.Label)],t.prototype,"valuesOneLabel",void 0),__decorate([p(cc.Label)],t.prototype,"nameThreeLabel",void 0),__decorate([p(cc.Label)],t.prototype,"valuesThreeLabel",void 0),__decorate([p(cc.Label)],t.prototype,"subTitleLabel",void 0),__decorate([p(cc.ScrollView)],t.prototype,"scrollView",void 0),__decorate([d],t)}(s.default);o.default=h,cc._RF.pop()},{"../../Game":"Game","../../core/UI/DialogBox":"DialogBox","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const"}],ResUtil:[function(e,t,o){"use strict";var a;cc._RF.push(t,"eaa26KMYgRO7IyhPWX0OxAo","ResUtil"),Object.defineProperty(o,"__esModule",{value:!0}),o.ResUtil=o.eResType=void 0,function(e){e[e.ScenePrefab=0]="ScenePrefab",e[e.UIPrefab=1]="UIPrefab",e[e.Audio=2]="Audio",e[e.Texture=3]="Texture",e[e.I18n=4]="I18n",e[e.Atlas=5]="Atlas",e[e.I18nAtlas=6]="I18nAtlas",e[e.Font=7]="Font"}(a=o.eResType||(o.eResType={}));var i=function(){function e(){}return e.MakeResUrl=function(e,t){switch(t){case a.ScenePrefab:e="prefab/Scene/"+e;break;case a.UIPrefab:e="prefab/"+e;break;case a.Audio:e="sound/"+e;break;case a.Texture:e="texture/"+e;break;case a.I18n:e="i18n/"+e;break;case a.Atlas:e="atlas/"+e;break;case a.I18nAtlas:e="atlas/i18n/"+e;break;case a.Font:e="font/"+e;break;default:console.error("MakeUrl UnKnow Type ="+t+" resName="+e)}return e},e.loadRes=function(t,o,i,r){if(t){var n=cc.Asset;switch(o){case a.ScenePrefab:case a.UIPrefab:n=cc.Prefab;break;case a.Audio:n=cc.AudioClip;break;case a.Texture:n=cc.SpriteFrame;break;case a.I18n:n=cc.TextAsset;break;case a.Atlas:case a.I18nAtlas:n=cc.SpriteAtlas;break;case a.Font:n=cc.Font;break;default:return void console.error("loadRes UnKnow Url ="+t+", Type ="+o)}var s=e.MakeResUrl(t,o);cc.resources.load(s,n,function(e,t){if(null!=e)return console.error(e),void(r&&r());i(t)})}else console.error("loadRes error! resUrl is"+t)},e}();o.ResUtil=i,cc._RF.pop()},{}],RotateForever:[function(e,t,o){"use strict";cc._RF.push(t,"c3725lpfUlJF6rQ8EUhQ6Lr","RotateForever"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,r=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speed=16,t}return __extends(t,e),t.prototype.update=function(e){this.node.angle-=360*e/this.speed},__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],SDKConst:[function(e,t,o){"use strict";cc._RF.push(t,"fb6ccUDOMhFNrpekwHbVWRV","SDKConst"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}return e.AD_STATUS_LOADING="loading",e.AD_STATUS_LOADED="loaded",e.AD_STATUS_ERROR="error",e.AD_STATUS_PLAYING="playing",e.AD_STATUS_PLAYEND="playend",e.AD_STATUS_PLAY_ERROR="playError",e.AD_STATUS_INIT="init",e.AD_TYPE_REWARD="Reward",e.AD_TYPE_INTERST="Interst",e.AD_TYPE_BANNER="Banner",e.AD_PLAY_POS_START=1,e.AD_PLAY_POS_SETTING=2,e.AD_PLAY_POS_DALIY=3,e.AD_PLAY_POS_RUN_BACK=4,e.AD_PLAY_POS_BUY_MAGIC=6,e.AD_PLAY_POS_CARD_BG=7,__decorate([i],e)}());o.default=r,cc._RF.pop()},{}],ScoreCounter:[function(e,t,o){"use strict";cc._RF.push(t,"a2f653o7JBPXpbp1nKhDpEj","ScoreCounter"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Game"),i=cc._decorator,r=i.ccclass,n=(i.property,function(){function e(){this.curType="",this.score=0}return e.prototype.SetStatisticsType=function(e){this.curType=e},e.prototype.calculate=function(e,t,o){void 0===t&&(t=!1),void 0===o&&(o=!1);var a=0;switch(e){case 0:o?(a-=52,this.score=-52):(a+=0,this.score=0);break;case 1:a+=o?5:10;break;case 2:a-=o?5:15;break;case 3:case 4:a+=5;break;case 5:a-=2;break;case 6:a+=10;break;case 7:a-=2;break;case 8:a-=t?10:50;break;case 9:a+=25;break;case 103:case 104:a-=5;break;case 108:a+=t?10:50}return this.score+=a,a},e.prototype.SetUnfinishedScore=function(e){this.score=e},e.prototype.calcAndSave=function(e){var t=this.calculate(e,a.Game.userData.flopThree);a.Game.userData.score+=t,a.Game.userData.score<0&&(a.Game.userData.score=0)},e.prototype.getStoryScore=function(){return 1==a.Game.userData.getSuccCount()?15:5},e.prototype.GetScore=function(e){return void 0===e&&(e=!1),e?this.score+25:this.score},e.StatisticsType=["Standard","Vegas"],__decorate([r],e)}());o.default=n,cc._RF.pop()},{"../Game":"Game"}],SdkPipeline:[function(e,t,o){"use strict";cc._RF.push(t,"9fce3O6INJP87K+RwHIev/A","SdkPipeline"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../global/GameConfig"),i=e("./SDKConst"),r=e("../Game"),n=e("../App"),s=e("../core/UI/Toast"),c=e("../core/global/I18N"),l=e("./StsLogEvent"),u=e("./LogEvent"),d=e("../core/Table/TableHelper"),p=e("../core/Table/Table"),h=e("../data/ShopHelper"),f=function(){function e(){this.mShowDialog=!1,this.adOpening=!1}return e.prototype.loadAD=function(){a.default.SDK.loadAD("",i.default.AD_TYPE_INTERST)},e.prototype.isShowAd=function(){return!(a.default.TEST||r.Game.userData.shopData.removeAds>0)},e.prototype.showInterstitial=function(e,t,o){var s=this;void 0===t&&(t=""),void 0===o&&(o=null),r.Game.userData.getSuccCount()<3?o&&o():this.isShowAd()?this.adOpening?o&&o():a.default.SDK.ADisLoaded(i.default.AD_TYPE_INTERST)?(n.default.isPause=!0,a.default.SDK.showInterstitial(function(a){a?(""!=t?u.default.log(u.default.dot_ad_interst,{position:e,game_from:t}):u.default.log(u.default.dot_ad_interst,{position:e}),s.adOpening=!0):(n.default.isPause=!1,o&&o(),s.adOpening=!1)},function(){n.default.isPause=!1,r.Game.userData.userSts.inCount++,l.default.onInComplete(),o&&o(),s.adOpening=!1},this,e)):o&&o():o&&o()},e.prototype.showReward=function(e,t,o){var i=this;if(!a.default.SDK.rewardAvailability())return s.default.showWith(c.default.get("L4027")),void(e&&e.call(t,!1));n.default.isPause=!0,a.default.SDK.showReward(function(e){e?i.adOpening=!0:(n.default.isPause=!1,i.adOpening=!1)},function(o){n.default.isPause=!1,e&&e.call(t,o),r.Game.userData.userSts.rdCount++,i.adOpening=!1},t,o)},e.prototype.showBanner=function(e){a.default.SDK.displayBannerAD(e)},e.prototype.showRateDialog=function(){a.default.SDK.getIsRated()||this.mShowDialog||r.Game.userData.getReport()[0]%10==0&&(a.default.SDK.showRateDialog(),this.mShowDialog=!0)},e.prototype.purchaseByShopId=function(e,t,o){var a=d.TableHelper.GetField(p.eTable.eTabShop,e);if(a){var i;i=cc.sys.os===cc.sys.OS_IOS?a.iosPayId:(cc.sys.os,cc.sys.OS_ANDROID,a.androidPayId),this.purchase(i,t,o)}},e.prototype.purchase=function(e,t,o){a.default.PAYSDK.PayisLoaded()?a.default.PAYSDK.purchase(e,t,function(e,t){0==t||"0"==t?o(e):s.default.showWith(c.default.get("L4030"))}):s.default.showWith(c.default.get("L4029"))},e.prototype.suppleMent=function(){cc.sys.os===cc.sys.OS_ANDROID&&a.default.PAYSDK.suppleMent(function(e,t,o){0==o||"0"==o?h.default.getInstance().doMoneyBuy(e,t):s.default.showWith(c.default.get("L40170"))})},e.prototype.smbPayFinsih=function(e){cc.sys.os===cc.sys.OS_ANDROID&&a.default.SDK.smbCommand("payfinish",e)},e}();o.default=f,cc._RF.pop()},{"../App":"App","../Game":"Game","../core/Table/Table":"Table","../core/Table/TableHelper":"TableHelper","../core/UI/Toast":"Toast","../core/global/I18N":"I18N","../data/ShopHelper":"ShopHelper","../global/GameConfig":"GameConfig","./LogEvent":"LogEvent","./SDKConst":"SDKConst","./StsLogEvent":"StsLogEvent"}],SettingWindow:[function(e,t,o){"use strict";cc._RF.push(t,"b2102UUcBRCErmhkAVWd1Y1","SettingWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../global/AudioMgr"),i=e("../UICenter"),r=e("../../core/global/Emitter"),n=e("../../core/global/I18N"),s=e("../../Game"),c=e("../../core/UI/WWindow"),l=e("../../global/DataManager"),u=e("../../sdk/LogEvent"),d=e("../../global/Const"),p=e("../../global/GameConfig"),h=e("../../core/UI/Toast"),f=cc._decorator,g=f.ccclass,m=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.musicLock=null,t.soundLock=null,t.flopThree=null,t.rightLayout=null,t.noticeLock=null,t.gameBGIcon=null,t.cardBGIcon=null,t.cardIcon=null,t.flag=null,t.isInit=!1,t.nameLabel=[],t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.musicLock.isChecked=s.Game.userData.FBData.k[0],this.soundLock.isChecked=s.Game.userData.FBData.k[1],this.flopThree.isChecked=s.Game.userData.flopThree,this.rightLayout.isChecked=s.Game.userData.rightLayout,this.noticeLock.isChecked=s.Game.userData.notice,this.gameBGIcon.spriteFrame=this.getSelectGameBgFrame(),this.cardBGIcon.spriteFrame=this.getSelectCardBgFrame(),this.cardIcon.spriteFrame=this.getCardIcon(),r.Emitter.register(d.default.eChangeGameBG,this.changeGameBG,this),r.Emitter.register(d.default.eChangeCardBG,this.changeCardBG,this),r.Emitter.register(d.default.eChangeCardFace,this.changeCardFace,this),r.Emitter.register(d.default.eLanguageChange,this.initLanguage,this),this.isInit=!0,this.initLanguage()},t.prototype.initLanguage=function(){this.title.string=n.default.get("L101"),this.nameLabel[0].string=n.default.get("L4009"),this.nameLabel[1].string=n.default.get("L202"),this.nameLabel[2].string=n.default.get("L218"),this.nameLabel[3].string=n.default.get("L4010"),this.nameLabel[4].string=n.default.get("L4011"),this.nameLabel[5].string=n.default.get("L215"),this.nameLabel[6].string=n.default.get("L4012"),this.nameLabel[7].string=n.default.get("L216"),this.nameLabel[8].string=n.default.get("L201"),this.nameLabel[9].string=n.default.get("L530")},t.prototype.setLanguageIcon=function(){this.flag.spriteFrame=l.default.language_RES.getSpriteFrame(s.Game.userData.language),r.Emitter.hasRegister("lazyDataLoaed")&&r.Emitter.remove("lazyDataLoaed",this.setLanguageIcon,this)},t.prototype.changeGameBG=function(e){this.isInit&&(this.gameBGIcon.spriteFrame=e)},t.prototype.changeCardBG=function(e){this.isInit&&(this.cardBGIcon.spriteFrame=e)},t.prototype.changeCardFace=function(){if(this.isInit){var e=this.getCardIcon();this.cardIcon.spriteFrame=e}},t.prototype.getCardIcon=function(){return l.default.cardBaseRES.getSpriteFrame("spade13")},t.prototype.changeMusic=function(){this.isInit&&(a.AudioMgr.musicLock=s.Game.userData.FBData.k[0]=this.musicLock.isChecked,s.Game.userData.updateData("k",s.Game.userData.FBData.k))},t.prototype.changeSound=function(){this.isInit&&(a.AudioMgr.effectLock=s.Game.userData.FBData.k[1]=this.soundLock.isChecked,s.Game.userData.updateData("k",s.Game.userData.FBData.k),u.default.log(u.default.dot_settings_soundeffect,{toggle:this.soundLock.isChecked}))},t.prototype.changeFlopThree=function(){this.isInit&&(s.Game.userData.flopThree=this.flopThree.isChecked,s.Game.userData.flopThree!=s.Game.gameMgr.stage.flopThree&&h.default.showWith(n.default.get("L4026")),u.default.log(u.default.dot_settings_deal3cards,{deal3cards:s.Game.userData.flopThree}))},t.prototype.doChangeFlopThree=function(e){e&&(s.Game.gameMgr.newGame(),this.close())},t.prototype.changeLayout=function(){this.isInit&&(s.Game.userData.rightLayout=this.rightLayout.isChecked,u.default.log(u.default.dot_settings_leftmode,{leftmode:s.Game.userData.rightLayout}))},t.prototype.changeNotice=function(){this.isInit&&(s.Game.userData.notice=this.noticeLock.isChecked,u.default.log(u.default.dot_settings_notice,{notice_toggle:this.noticeLock.isChecked}))},t.prototype.openCardBGWin=function(){i.UICenter.openCardBGWin()},t.prototype.openGameBGWin=function(){i.UICenter.openGameBGWin()},t.prototype.openCardIconWin=function(){i.UICenter.openCardFaceWin()},t.prototype.openGameLanguageWin=function(){i.UICenter.openGameLanguageWin()},t.prototype.onStatisticsClick=function(){i.UICenter.openReportWin()},t.prototype.onOpenPlay=function(){i.UICenter.openHelper2Window()},t.prototype.close=function(){a.AudioMgr.clickOK(),this.toBack()},t.prototype.getSelectGameBgFrame=function(){var e="default"==s.Game.userData.gameBG?"bgtable_1":s.Game.userData.gameBG;return l.default.getGameBg(e)},t.prototype.getSelectCardBgFrame=function(){var e="default"==s.Game.userData.cardBG?"pokerbg_1":s.Game.userData.cardBG;return l.default.getCardBg(e)},t.prototype.onRemoveAdClick=function(){p.default.PAYSDK.PayisLoaded()?i.UICenter.openRemoveAdWindow():i.UICenter.openRemoveAdFailWindow()},__decorate([m({type:cc.Label,tooltip:"\u6807\u9898"})],t.prototype,"title",void 0),__decorate([m({type:cc.Toggle,tooltip:"\u97f3\u4e50\u5f00\u5173"})],t.prototype,"musicLock",void 0),__decorate([m({type:cc.Toggle,tooltip:"\u58f0\u97f3\u5f00\u5173"})],t.prototype,"soundLock",void 0),__decorate([m({type:cc.Toggle,tooltip:"\u7ffb3\u5f20"})],t.prototype,"flopThree",void 0),__decorate([m({type:cc.Toggle,tooltip:"\u53f3\u624b\u4e60\u60ef"})],t.prototype,"rightLayout",void 0),__decorate([m({type:cc.Toggle,tooltip:"\u901a\u77e5"})],t.prototype,"noticeLock",void 0),__decorate([m({type:cc.Sprite,tooltip:"\u684c\u9762\u80cc\u666f"})],t.prototype,"gameBGIcon",void 0),__decorate([m({type:cc.Sprite,tooltip:"\u724c\u80cc"})],t.prototype,"cardBGIcon",void 0),__decorate([m({type:cc.Sprite,tooltip:"\u5361\u724c\u6b63\u9762"})],t.prototype,"cardIcon",void 0),__decorate([m({type:cc.Sprite,tooltip:"\u56fd\u65d7"})],t.prototype,"flag",void 0),__decorate([m(cc.Label)],t.prototype,"nameLabel",void 0),__decorate([g],t)}(c.default);o.default=y,cc._RF.pop()},{"../../Game":"Game","../../core/UI/Toast":"Toast","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../../global/DataManager":"DataManager","../../global/GameConfig":"GameConfig","../../sdk/LogEvent":"LogEvent","../UICenter":"UICenter"}],Shape4Circles:[function(e,t,o){"use strict";cc._RF.push(t,"5ed45f3KuZDEIP56H0yaiZK","Shape4Circles"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.grapAngle=15,t.posOffset=30,t}return __extends(t,e),t.prototype.onPlay=function(){var e=this;this.duration=0,this.startRotate=!1;var t=cc.winSize.height/this.scaleFactor/8,o=t-this.posOffset;new cc.Vec3(0,3*o),this.createFrams(new cc.Vec3(0,3*o),t),this.createFrams(new cc.Vec3(0,o),t,-1),this.createFrams(new cc.Vec3(0,-o),t),this.createFrams(new cc.Vec3(0,3*-o),t,-1),this.move(function(){return e.startRotate=!0})},t.prototype.createFrams=function(e,t,o){void 0===o&&(o=1),this.frames=this.frames.concat(this.circleFrame(e,t,this.grapAngle,o))},t}(e("./ShapeCircle").default);o.default=a,cc._RF.pop()},{"./ShapeCircle":"ShapeCircle"}],ShapeBase:[function(e,t,o){"use strict";cc._RF.push(t,"f940eX4D+RHS5bNt0tHOvxK","ShapeBase"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../game/CardView"),i=e("../../../core/util/MathUtil"),r=e("../../../data/CardData"),n=function(){function e(){this.nodes=[]}return Object.defineProperty(e.prototype,"uiRootScale",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return 1},enumerable:!1,configurable:!0}),e.prototype.play=function(e){this.onComplete=e,this.onPlay()},e.prototype.stop=function(){this.onStop(),this.onCompleted()},e.prototype.followScale=function(){return!0},e.prototype.update=function(){},e.prototype.getNode=function(t,o){var i=new r.CardData(t,o,!0),n=e.cardPool.get(i);return null==n?n=cc.instantiate(e.cardPrefab):(n.scale=1,n.angle=0),n.parent=e.parent,n.getComponent(a.default).initByData(i),this.nodes.push(n),n},e.prototype.putNode=function(t){return e.cardPool.put(t)},e.prototype.onCompleted=function(){for(var e=0,t=this.nodes;e<t.length;e++){var o=t[e];cc.Tween.stopAllByTarget(o),this.putNode(o)}this.nodes=[],this.onComplete&&this.onComplete()},e.prototype.onPlay=function(){},e.prototype.onStop=function(){},e.prototype.getRandomEdgePos=function(){var e=i.default.randomRange(1,5),t=e<3,o=t?cc.winSize.height:cc.winSize.width;o=i.default.randomRange(0,o),o-=(t?cc.winSize.height:cc.winSize.width)/2,e=2==e||3==e?-1:1;var r=t?cc.winSize.width+a.default.Size.width:cc.winSize.height+a.default.Size.height;return r=r*e/2,t?new cc.Vec3(r,o,0):new cc.Vec3(o,r,0)},e.cardPool=new cc.NodePool("CardViews"),e.cardPrefab=null,e.parent=null,e.ShapeMoveToFrameTm=.3,e.ShapeUpdateTm=4,e}();o.default=n,cc._RF.pop()},{"../../../core/util/MathUtil":"MathUtil","../../../data/CardData":"CardData","../../../game/CardView":"CardView"}],ShapeCircle:[function(e,t,o){"use strict";cc._RF.push(t,"9f890ln5phBAK0XWKBg9YPN","ShapeCircle"),Object.defineProperty(o,"__esModule",{value:!0}),o.ShapeCircleData=void 0;var a=e("../ShapeBase"),i=e("../../../../core/util/MathUtil"),r=e("../../../../data/CardDefine"),n=function(){function e(e,t,o,a,i){this.node=e,this.center=t,this.radius=o,this.angle=a,this.rotateDir=i,this.pos=new cc.Vec3(0,0,0)}return e.prototype.getPos=function(){return this.pos.x=this.radius*Math.cos(i.default.deg2Rad*this.angle)+this.center.x,this.pos.y=this.radius*Math.sin(i.default.deg2Rad*this.angle)+this.center.y,this.pos},e.prototype.onRotate=function(e){this.angle-=e*this.rotateDir,this.node.position=this.getPos(),this.node.angle=this.angle},e}();o.ShapeCircleData=n;var s=function(e){function t(){var t=e.call(this)||this;return t.startRotate=!1,t.speed=30,t.frames=[],t}return __extends(t,e),t.prototype.onPlay=function(){var o=this;e.prototype.onPlay.call(this),this.duration=0,this.startRotate=!1;var a=(cc.winSize.width/this.scaleFactor-t.edgeOffset)/2;this.frames=this.circleFrame(cc.Vec3.ZERO,a),this.move(function(){return o.startRotate=!0})},t.prototype.move=function(e,t){void 0===t&&(t=!1);for(var o,i=0,r=0,n=this.frames;r<n.length;r++){var s=n[r];s.node.position=t?s.getPos():this.getRandomEdgePos(),o=cc.tween(s.node).to(a.default.ShapeMoveToFrameTm,{position:t?this.getRandomEdgePos():s.getPos(),angle:t?0:s.angle}),i==this.frames.length-1&&o.call(e),o.start(),i++}},t.prototype.update=function(e){if(this.startRotate){this.duration+=e;for(var t=0,o=this.frames;t<o.length;t++)o[t].onRotate(e*this.speed);this.duration>=a.default.ShapeUpdateTm&&(this.startRotate=!1,this.move(this.onCompleted.bind(this),!0))}},t.prototype.onStop=function(){this.frames=[]},t.prototype.circleFrame=function(e,t,o,a){void 0===o&&(o=10),void 0===a&&(a=1);for(var s=[],c=1,l=1,u=90;u>=-270;u-=o)c=i.default.randomRange(1,r.default.SuitCount+1),l=i.default.randomRange(1,r.default.EachSuitCount+1),s.push(new n(this.getNode(c,l),e,t,u,a));return s},t.edgeOffset=150,t}(a.default);o.default=s,cc._RF.pop()},{"../../../../core/util/MathUtil":"MathUtil","../../../../data/CardDefine":"CardDefine","../ShapeBase":"ShapeBase"}],ShapeConcentricCircles:[function(e,t,o){"use strict";cc._RF.push(t,"5f8b5JR2oVBVJ2YBd+iCXrJ","ShapeConcentricCircles"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ShapeCircle"),i=e("../../../../game/CardView"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onPlay=function(){var e=this;this.duration=0,this.startRotate=!1;var t=(cc.winSize.width/this.scaleFactor-i.default.Size.width)/2;this.frames=this.circleFrame(cc.Vec3.ZERO,t);var o=t-a.default.edgeOffset;this.frames=this.frames.concat(this.circleFrame(cc.Vec3.ZERO,o,20,-1)),this.move(function(){return e.startRotate=!0})},t}(a.default);o.default=r,cc._RF.pop()},{"../../../../game/CardView":"CardView","./ShapeCircle":"ShapeCircle"}],ShapeDiamond:[function(e,t,o){"use strict";cc._RF.push(t,"e8b4dE6fXBJlI7KiLG26woq","ShapeDiamond"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ShapeSquare"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onPlay=function(){var e=this;this.duration=0,this.startRotate=!1;var t=cc.winSize.width/this.scaleFactor-90,o=[];o.push(new a.ShapeKeyFrame(new cc.Vec3(t/4,t/6+120),0)),o.push(new a.ShapeKeyFrame(new cc.Vec3(t/2,100),0)),o.push(new a.ShapeKeyFrame(new cc.Vec3(0,-t/2+20),0)),o.push(new a.ShapeKeyFrame(new cc.Vec3(-t/2,100),0)),o.push(new a.ShapeKeyFrame(new cc.Vec3(-t/4,t/6+120),0)),this.frames=this.createKeyFrame(o),this.move(function(){return e.startRotate=!0})},t}(a.default);o.default=i,cc._RF.pop()},{"./ShapeSquare":"ShapeSquare"}],ShapePentagram:[function(e,t,o){"use strict";cc._RF.push(t,"f3f70aUnXFKSZ+4obk9S1TL","ShapePentagram"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ShapeSquare"),i=e("../../../../core/util/MathUtil"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onPlay=function(){var e=this;this.duration=0,this.startRotate=!1;for(var t=(cc.winSize.width/this.scaleFactor-90)/2,o=[],r=90;r>-630;r-=144)o.push(new a.ShapeKeyFrame(new cc.Vec3(t*Math.cos(i.default.deg2Rad*r),t*Math.sin(i.default.deg2Rad*r)-20),r-72));this.frames=this.createKeyFrame(o),this.move(function(){return e.startRotate=!0})},t}(a.default);o.default=r,cc._RF.pop()},{"../../../../core/util/MathUtil":"MathUtil","./ShapeSquare":"ShapeSquare"}],ShapeRhombus:[function(e,t,o){"use strict";cc._RF.push(t,"e89aeQHFrFCm7NJodeHvQxZ","ShapeRhombus"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ShapeSquare"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onPlay=function(){var e=this;this.duration=0,this.startRotate=!1;var t=(cc.winSize.width/this.scaleFactor-90)/2,o=[];o.push(new a.ShapeKeyFrame(new cc.Vec3(0,t),0)),o.push(new a.ShapeKeyFrame(new cc.Vec3(t,0),0)),o.push(new a.ShapeKeyFrame(new cc.Vec3(0,-t),0)),o.push(new a.ShapeKeyFrame(new cc.Vec3(-t,0),0)),this.frames=this.createKeyFrame(o),this.move(function(){return e.startRotate=!0})},t}(a.default);o.default=i,cc._RF.pop()},{"./ShapeSquare":"ShapeSquare"}],ShapeSandglass:[function(e,t,o){"use strict";cc._RF.push(t,"2211coNvyVCJ53riQ/6TBLn","ShapeSandglass"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ShapeSquare"),i=e("../../../../core/util/MathUtil"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onPlay=function(){var e=this;this.duration=0,this.startRotate=!1;var t=cc.winSize.width/this.scaleFactor-90,o=(t/=2)*Math.cos(30*i.default.deg2Rad),r=[];r.push(new a.ShapeKeyFrame(new cc.Vec3(0,0),0)),r.push(new a.ShapeKeyFrame(new cc.Vec3(t,-o),0)),r.push(new a.ShapeKeyFrame(new cc.Vec3(-t,-o),0)),r.push(new a.ShapeKeyFrame(new cc.Vec3(0,0),0)),r.push(new a.ShapeKeyFrame(new cc.Vec3(-t,o),0)),r.push(new a.ShapeKeyFrame(new cc.Vec3(t,o),0)),this.frames=this.createKeyFrame(r),this.move(function(){return e.startRotate=!0})},t}(a.default);o.default=r,cc._RF.pop()},{"../../../../core/util/MathUtil":"MathUtil","./ShapeSquare":"ShapeSquare"}],ShapeSquare:[function(e,t,o){"use strict";cc._RF.push(t,"8fe87zHs+FAdJMY579tO9nG","ShapeSquare"),Object.defineProperty(o,"__esModule",{value:!0}),o.ShapeSquareData=o.ShapeKeyFrame=void 0;var a=e("../ShapeBase"),i=e("../../../../core/util/MathUtil"),r=e("../../../../data/CardDefine"),n=function(e,t){this.keyPos=e,this.angle=t,this.weight=0};o.ShapeKeyFrame=n;var s=function(){function e(e,t,o,a){this.node=e,this.keyframes=t,this.frameIndex=o,this.rotateDir=a,this.angle=0,this.pos=new cc.Vec3}return e.prototype.getPos=function(){for(var e=0,t=0;t<this.keyframes.length&&!(this.frameIndex<e);t++)e+=this.keyframes[t].weight;return t--,e-=this.keyframes[t].weight,cc.Vec3.lerp(this.pos,this.keyframes[t].keyPos,this.keyframes[(t+1)%this.keyframes.length].keyPos,(this.frameIndex-e)/this.keyframes[t].weight),this.angle=this.keyframes[t].angle,this.pos},e.prototype.onRotate=function(e){this.frameIndex+=e*this.rotateDir,this.frameIndex<0?this.frameIndex=1-this.frameIndex:this.frameIndex>1&&(this.frameIndex=this.frameIndex-1),this.node.position=this.getPos(),this.node.angle=this.angle},e}();o.ShapeSquareData=s;var c=function(e){function t(){var t=e.call(this)||this;return t.speed=.1,t.frames=[],t}return __extends(t,e),t.prototype.onPlay=function(){var e=this;this.duration=0,this.startRotate=!1;var o=(cc.winSize.width/this.scaleFactor-t.edgeOffset)/2,a=[];a.push(new n(new cc.Vec3(o,o),0)),a.push(new n(new cc.Vec3(o,-o),0)),a.push(new n(new cc.Vec3(-o,-o),0)),a.push(new n(new cc.Vec3(-o,o),0)),this.frames=this.createKeyFrame(a),this.move(function(){return e.startRotate=!0})},t.prototype.move=function(e,t){void 0===t&&(t=!1);for(var o,i=0,r=0,n=this.frames;r<n.length;r++){var s=n[r];s.node.position=t?s.getPos():this.getRandomEdgePos(),o=cc.tween(s.node).to(a.default.ShapeMoveToFrameTm,{position:t?this.getRandomEdgePos():s.getPos(),angle:t?0:s.angle}),i==this.frames.length-1&&o.call(e),o.start(),i++}},t.prototype.update=function(e){if(this.startRotate){this.duration+=e;for(var t=0,o=this.frames;t<o.length;t++)o[t].onRotate(e*this.speed);this.duration>=a.default.ShapeUpdateTm&&(this.startRotate=!1,this.move(this.onCompleted.bind(this),!0))}},t.prototype.calcWeight=function(e){if(e.length<1)return 0;for(var t=0,o=1,a=e.length,i=0;i<a;i++,o++)o>=a&&(o=0),e[i].weight=cc.Vec3.distance(e[i].keyPos,e[o].keyPos),t+=e[i].weight;for(var r=0,n=e;r<n.length;r++){var s=n[r];s.weight=s.weight/t}return t},t.prototype.createKeyFrame=function(e,t,o){void 0===t&&(t=30),void 0===o&&(o=1);for(var a=[],n=this.calcWeight(e),c=0;c<n;c+=t){var l=i.default.randomRange(1,r.default.SuitCount+1),u=i.default.randomRange(1,r.default.EachSuitCount+1);a.push(new s(this.getNode(l,u),e,c/n,o))}return a},t.edgeOffset=150,t}(a.default);o.default=c,cc._RF.pop()},{"../../../../core/util/MathUtil":"MathUtil","../../../../data/CardDefine":"CardDefine","../ShapeBase":"ShapeBase"}],ShapeTriangular2:[function(e,t,o){"use strict";cc._RF.push(t,"8a39eXhpkBE1Z6kyq6g9XjP","ShapeTriangular2"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("../ShapeBase").default);o.default=a,cc._RF.pop()},{"../ShapeBase":"ShapeBase"}],ShapeTriangular:[function(e,t,o){"use strict";cc._RF.push(t,"d43cabFhGJL7oFjZZOwZH+Z","ShapeTriangular"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ShapeSquare"),i=e("../../../../core/util/MathUtil"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onPlay=function(){var e=this;this.duration=0,this.startRotate=!1;var t=cc.winSize.width/this.scaleFactor-90,o=(t/=2)*Math.cos(30*i.default.deg2Rad),r=[];r.push(new a.ShapeKeyFrame(new cc.Vec3(0,o),0)),r.push(new a.ShapeKeyFrame(new cc.Vec3(t,-o),0)),r.push(new a.ShapeKeyFrame(new cc.Vec3(-t,-o),0)),this.frames=this.createKeyFrame(r),this.move(function(){return e.startRotate=!0})},t}(a.default);o.default=r,cc._RF.pop()},{"../../../../core/util/MathUtil":"MathUtil","./ShapeSquare":"ShapeSquare"}],ShopHelper:[function(e,t,o){"use strict";cc._RF.push(t,"3dcdbFm1SZC5775+oGJ2whu","ShopHelper"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../core/Table/TableHelper"),i=e("../core/Table/Table"),r=e("../Game"),n=e("../core/global/Emitter"),s=e("../global/Const"),c=function(){function e(){}return e.getInstance=function(){return e.instance},e.prototype.getFildValueByType=function(e,t){for(var o=0;o<5;o++)if(e["type"+(o+1)]===t)return e["num"+(o+1)];return 0},e.prototype.shopDataChange=function(t,o,a){console.log("*****king shopDataChange\uff1a*****orderId:"+o+" purchaseScene:"+a);var i=this.getFildValueByType(t,4),c=r.Game.userData.shopData;c.removeAds=i,c.buyIds.findIndex(function(e){return e==t.id})<0&&c.buyIds.push(t.id),r.Game.userData.shopData=c,t.id==e.RemoveAdId&&n.Emitter.fire(s.default.eHideRemoveAd)},e.prototype.doMoneyBuy=function(e,t){var o=a.TableHelper.Find(i.eTable.eTabShop,function(t){return t.androidPayId==e});console.log("*****king \u8865\u5355\u6267\u884c\uff1a"+e+"*****orderId:"+t),this.shopDataChange(o,t,1)},e.RemoveAdId=107,e.RemoveAdIdYear=108,e.instance=new e,e}();o.default=c,cc._RF.pop()},{"../Game":"Game","../core/Table/Table":"Table","../core/Table/TableHelper":"TableHelper","../core/global/Emitter":"Emitter","../global/Const":"Const"}],ShuffleComp:[function(e,t,o){"use strict";cc._RF.push(t,"25759ubd91KS5KyZ+KeS1zJ","ShuffleComp"),Object.defineProperty(o,"__esModule",{value:!0}),o.ShufflingState=o.ShuffleCacheData=void 0;var a,i=e("../core/global/Emitter"),r=e("../core/util/MathUtil"),n=e("../data/CardData"),s=e("../global/Const"),c=e("../global/GameConfig"),l=function(){this.slot=null,this.opened=[],this.closed=[],this.openCount=0,this.closeCount=0,this.shuffleOpend=!1};o.ShuffleCacheData=l,function(e){e[e.None=0]="None",e[e.Moving=1]="Moving",e[e.Shuffing=2]="Shuffing",e[e.Recovering=3]="Recovering",e[e.End=4]="End"}(a=o.ShufflingState||(o.ShufflingState={}));var u=function(){function e(e,t){this.mStage=null,this.mOnUse=null,this.mCenterSlot=null,this.cacheSlots=[],this.mShuffling=a.None,this.mStage=e,this.centerSlot.init(e),this.mOnUse=t}return Object.defineProperty(e.prototype,"centerSlot",{get:function(){return this.mCenterSlot||(this.mCenterSlot=this.mStage.view.getCenterSlotView()),this.mCenterSlot},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needImmediateSave",{get:function(){return this.mShuffling==a.Moving||this.mShuffling==a.Shuffing||this.mShuffling==a.Recovering},enumerable:!1,configurable:!0}),e.prototype.use=function(){var e=this;i.Emitter.fire(s.default.eOnShuffling),this.mShuffling=a.Moving,this.startMove(function(){e.mShuffling=a.Shuffing;var t=e.shuffle();e.shuffleAnim(t),e.timeoutShuffle=setTimeout(function(){return e.recoverMove()},2e3)}),this.mOnUse&&this.mOnUse()},e.prototype.immediateRecover=function(){this.clearTimeouts(),this.mShuffling==a.Moving?(this.shuffle(),this.recoverMove()):this.mShuffling==a.Shuffing&&this.recoverMove()},e.prototype.clearTimeouts=function(){this.timeoutMoving&&clearTimeout(Number(this.timeoutMoving)),this.timeoutShuffle&&clearTimeout(Number(this.timeoutShuffle)),this.timeoutRecover&&clearTimeout(Number(this.timeoutRecover)),this.timeoutAnim&&clearTimeout(Number(this.timeoutAnim))},e.prototype.startMove=function(e){for(var t=0,o=this.mStage.gameSlots;t<o.length;t++){var a=o[t];this.cacheSlot(a,!1),this.moveToCenter(a)}this.cacheSlot(this.mStage.flopSlot,!0),this.moveToCenter(this.mStage.flopSlot),this.cacheSlot(this.mStage.dealerSlot,!0),this.moveToCenter(this.mStage.dealerSlot),this.timeoutMoving=setTimeout(e,1e3*c.default.CardMoveTime)},e.prototype.shuffleAnim=function(e,t){var o=this;void 0===t&&(t=0);var a=r.default.randomRangeInt(0,e.length);e[a].shuffle(!0);var i=r.default.randomRangeInt(0,e.length),n=e[i].shuffle(!1);t<4&&(this.timeoutAnim=setTimeout(function(){return o.shuffleAnim(e,++t)},1e3*n))},e.prototype.recoverMove=function(){var e=this;this.mShuffling=a.Recovering;for(var t=0,o=this.cacheSlots;t<o.length;t++){var r=o[t];this.moveToSlot(r)}this.cacheSlots=[],setTimeout(function(){e.mShuffling=a.End,i.Emitter.fire(s.default.eOnShuffled)},1e3*c.default.CardMoveTime)},e.prototype.cacheSlot=function(e,t){var o=new l;o.slot=e,o.shuffleOpend=t,o.opened=[],o.closed=[];for(var a=0,i=e.cards;a<i.length;a++){var r=i[a];r.isOpen?(o.opened.push(r),t?r.flopClose():r.flop(!1)):o.closed.push(r)}o.openCount=o.opened.length,o.closeCount=o.closed.length,this.cacheSlots.push(o)},e.prototype.shuffle=function(){for(var e=[],t=0,o=this.cacheSlots;t<o.length;t++){var a=o[t];e.push.apply(e,a.closed),a.shuffleOpend&&(e.push.apply(e,a.opened),a.opened=[]),a.closed=[]}e=r.default.shuffle(e);for(var i=0,n=0,s=this.cacheSlots;n<s.length;n++){a=s[n];for(var c=0;c<a.closeCount;c++)a.closed.push(e[i++]);if(a.shuffleOpend)for(c=0;c<a.openCount;c++)a.opened.push(e[i++])}return e},e.prototype.moveToCenter=function(e){var t;if(e.cards.length>0){var o=e.cards.reverse();(t=this.mStage).moveToSlot.apply(t,__spreadArrays([{moveType:n.MoveType.Shuffle,easyObj:"linear"},e,this.centerSlot],o))}},e.prototype.moveToSlot=function(e){for(var t,o=0,a=e.opened;o<a.length;o++){var i=a[o];e.shuffleOpend,i.flopOpen()}var r=[];r=r.concat(e.closed,e.opened),(t=this.mStage).moveToSlot.apply(t,__spreadArrays([{moveType:n.MoveType.Shuffle,easyObj:"linear"},this.centerSlot,e.slot],r))},e}();o.default=u,cc._RF.pop()},{"../core/global/Emitter":"Emitter","../core/util/MathUtil":"MathUtil","../data/CardData":"CardData","../global/Const":"Const","../global/GameConfig":"GameConfig"}],ShuffleWindow:[function(e,t,o){"use strict";cc._RF.push(t,"afc468wT/NIQLb0La6jNlJH","ShuffleWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/global/Emitter"),i=e("../../core/global/I18N"),r=e("../../core/UI/WWindow"),n=e("../../Game"),s=e("../../global/Const"),c=e("../../sdk/SDKConst"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lab_title=null,t.lab_content=null,t.lab_ad=null,t.lab_use=null,t.bg_node=null,t.btn_use=null,t.mBgHeights=[970.9,840],t.onUsed=!1,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),a.Emitter.register(s.default.eLanguageChange,this.initLanguage,this),this.initLanguage()},t.prototype.initLanguage=function(){this.lab_title.string=i.default.get("L307"),this.lab_content.string=i.default.get("L4031"),this.lab_ad.string=i.default.get("L4032"),this.lab_use.string=i.default.get("L4033")},t.prototype.show=function(){e.prototype.show.call(this),this.onUsed=!1,n.Game.userData.shuffleCount>0?(this.bg_node.height=this.mBgHeights[0],this.btn_use.active=!0):(this.bg_node.height=this.mBgHeights[1],this.btn_use.active=!1)},t.prototype.onWatchClick=function(){var e=this;n.Game.sdkPipeline.showReward(function(t){t&&(n.Game.userData.shuffleCount+=1,e.onUseClick())},this,c.default.AD_PLAY_POS_BUY_MAGIC)},t.prototype.onUseClick=function(){n.Game.userData.shuffleCount>0&&n.Game.gameMgr.stage.checkShuffle()&&(n.Game.userData.shuffleCount-=1,this.onUsed=!0,this.toBack())},t.prototype.onHide=function(){e.prototype.onHide.call(this),this.onUsed&&(this.onUsed=!1,n.Game.gameMgr.stage.useShuffle())},__decorate([d(cc.Label)],t.prototype,"lab_title",void 0),__decorate([d(cc.RichText)],t.prototype,"lab_content",void 0),__decorate([d(cc.Label)],t.prototype,"lab_ad",void 0),__decorate([d(cc.Label)],t.prototype,"lab_use",void 0),__decorate([d(cc.Node)],t.prototype,"bg_node",void 0),__decorate([d(cc.Node)],t.prototype,"btn_use",void 0),__decorate([u],t)}(r.default);o.default=p,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../global/Const":"Const","../../sdk/SDKConst":"SDKConst"}],StageView:[function(e,t,o){"use strict";cc._RF.push(t,"87568Ea2hNM9qQbQcfZ8BVR","StageView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./CardSlotView"),i=e("./CardView"),r=e("../view/DropCardEff"),n=e("../core/global/Emitter"),s=e("../global/Const"),c=e("../Game"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.topArea=null,t.dealerArea=null,t.flopArea=null,t.targetArea=null,t.gameArea=null,t.centerArea=null,t.cardPrefab=null,t.overLayer=null,t.dropCardEff=[],t.cardTipIcon=null,t}return __extends(t,e),t.prototype.onLoad=function(){for(var e=this,t=0,o=this.dropCardEff;t<o.length;t++)o[t].node.active=!1;n.Emitter.register(s.default.eChangeLayout,this.changeLayout,this),n.Emitter.register(s.default.eChangeGameBG,this.setBg,this),c.Game.userData.rightLayout&&this.changeLayout(!0),this.node.on(cc.Node.EventType.TOUCH_END,function(t){t.target==e.node&&n.Emitter.fire(s.default.eOnStageClick,t)})},t.prototype.reset=function(){},t.prototype.changeLayout=function(e){e?(this.topArea.getComponent(cc.Layout).horizontalDirection=cc.Layout.HorizontalDirection.RIGHT_TO_LEFT,this.gameArea.getComponent(cc.Layout).horizontalDirection=cc.Layout.HorizontalDirection.RIGHT_TO_LEFT):(this.topArea.getComponent(cc.Layout).horizontalDirection=cc.Layout.HorizontalDirection.LEFT_TO_RIGHT,this.gameArea.getComponent(cc.Layout).horizontalDirection=cc.Layout.HorizontalDirection.LEFT_TO_RIGHT)},t.prototype.getDealerSlotView=function(){return this.dealerArea.getComponentInChildren(a.default)},t.prototype.getFlopSlotView=function(){return this.flopArea.getComponent(a.default)},t.prototype.getTargetSlotViews=function(){return this.targetArea.getComponentsInChildren(a.default)},t.prototype.getGameSlotViews=function(){return this.gameArea.getComponentsInChildren(a.default)},t.prototype.getCenterSlotView=function(){return this.centerArea.getComponent(a.default)},t.prototype.createCard=function(){return cc.instantiate(this.cardPrefab).getComponent(i.default)},t.prototype.setBg=function(e){this.bg.spriteFrame=e},t.prototype.addToOverLayer=function(e,t){t?this.overLayer.insertChild(e,0):this.overLayer.addChild(e)},t.prototype.getOverLayerNodePos=function(e){return this.overLayer.convertToNodeSpaceAR(e)},t.prototype.playDropCardEff=function(e,t){var o=e.convertToWorldSpaceAR(cc.Vec3.ZERO);o=this.overLayer.convertToNodeSpaceAR(o),this.dropCardEff[t].node.active=!0,this.dropCardEff[t].node.position=o,this.dropCardEff[t].eimt(function(e){e.node.active=!1})},__decorate([d(cc.Sprite)],t.prototype,"bg",void 0),__decorate([d(cc.Node)],t.prototype,"topArea",void 0),__decorate([d({type:cc.Node,tooltip:"\u53d1\u724c\u533a\uff0cID=1"})],t.prototype,"dealerArea",void 0),__decorate([d({type:cc.Node,tooltip:"\u7ffb\u724c\u533a\uff0cID=4"})],t.prototype,"flopArea",void 0),__decorate([d({type:cc.Node,tooltip:"\u76ee\u6807\u533a\uff0cID=3"})],t.prototype,"targetArea",void 0),__decorate([d({type:cc.Node,tooltip:"\u6e38\u620f\u533a\uff0cID=2"})],t.prototype,"gameArea",void 0),__decorate([d({type:cc.Node,tooltip:"\u6d17\u724c\u533a\uff0cID=2"})],t.prototype,"centerArea",void 0),__decorate([d(cc.Prefab)],t.prototype,"cardPrefab",void 0),__decorate([d({type:cc.Node,tooltip:"\u62d6\u52a8\u533a\u57df"})],t.prototype,"overLayer",void 0),__decorate([d(r.default)],t.prototype,"dropCardEff",void 0),__decorate([d(cc.Node)],t.prototype,"cardTipIcon",void 0),__decorate([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Game":"Game","../core/global/Emitter":"Emitter","../global/Const":"Const","../view/DropCardEff":"DropCardEff","./CardSlotView":"CardSlotView","./CardView":"CardView"}],StageWindow:[function(e,t,o){"use strict";cc._RF.push(t,"8b972QMTJVG+axI6gvylH/6","StageWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("../../Game"),r=e("../../global/AudioMgr"),n=e("../../core/UI/Toast"),s=e("../../core/global/I18N"),c=e("../UICenter"),l=e("../../core/util/DateUtils"),u=e("../../core/util/StrUtil"),d=e("../AnimationUtil"),p=e("../../data/DataTools"),h=e("../../data/StoryHelper"),f=e("../../global/GameConfig"),g=e("../../core/global/Emitter"),m=e("../../global/Const"),y=e("../../game/GameMgr"),v=cc._decorator,b=v.ccclass,C=v.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.menuArea=null,t.menu2Area=null,t.storyIcon=null,t.menuLabels=[],t.scoreView=null,t.timeView=null,t.stepView=null,t.daliyRedPoint=null,t.storyRedPoint=null,t.taskRedPoint=null,t.bottomMenu=null,t.magicBtn=null,t.magicCount=null,t.magicEff=null,t.taskIconNode=null,t.menuButtons=[],t.modelLabel=null,t.btnGameNode=null,t.shuffleCount=null,t.menuShow=!0,t.magicUsing=!1,t}return __extends(t,e),t.prototype.start=function(){this.initUI(),this.reset(),this.enableUndo(0),this.enableTips(!1),i.Game.userData.firstLogin&&(i.Game.userData.firstLogin=!1),this.menuShow=!0},t.prototype.reset=function(){this.updateScore(0),this.stepUpdate(0),this.updateTime(0),this.checkRedPoint()},t.prototype.initUI=function(){var e=this;i.Game.uiMgr.initUIClickAudio(this.node),this.initLanguage(),this.magicEff.active=!1,this.bottomMenu.active=f.default.SupportMagic,this.shuffleCountChanged(i.Game.userData.shuffleCount),i.Game.userData.rightLayout&&this.changeLayout(!0),g.Emitter.register(m.default.eOnStartGame,this.onStartGame,this),g.Emitter.register(m.default.eOnGameReady,this.onGameReady,this),g.Emitter.register(m.default.eOnGameEnd,this.onGameEnd,this),g.Emitter.register(m.default.eOnGameToMenu,this.onGameToMenu,this),g.Emitter.register(m.default.eOnStageClick,this.onStageClick,this),g.Emitter.register(m.default.eScoreUpdate,this.updateScore,this),g.Emitter.register(m.default.eStepUpdate,this.stepUpdate,this),g.Emitter.register(m.default.eTimeUpdate,this.updateTime,this),g.Emitter.register(m.default.eChangeLayout,this.changeLayout,this),g.Emitter.register(m.default.eLanguageChange,this.initLanguage,this),g.Emitter.register(m.default.eMagicOpenChanged,this.activeMagic,this),g.Emitter.register(m.default.eMagicCountChanged,this.magicCountChanged,this),g.Emitter.register(m.default.eShuffleCountChanged,this.shuffleCountChanged,this),g.Emitter.register(m.default.eTaskSwitched,this.onNewTaskOpen,this),g.Emitter.register(m.default.eOnCheckRedPoint,this.checkRedPoint,this),g.Emitter.register(m.default.eCanAutoComplete,this.onCanAutoComplete,this),g.Emitter.register(m.default.eUndoCountChanged,this.enableUndo,this),g.Emitter.register(m.default.eNewGameTips,this.newGameAnimationTip,this),g.Emitter.register(m.default.eOnShuffling,function(){return e.enableMenus(!1)},this),g.Emitter.register(m.default.eOnShuffled,function(){return e.enableMenus(!0)},this)},t.prototype.onStartGame=function(){this.enableMenus(!1),this.refreshGameMode(),this.onCanAutoComplete(!1),this.activeMagic(f.default.SupportMagic)},t.prototype.onGameReady=function(){this.enableMenus(!0,!1),this.enableTips(!0),this.refreshGameMode(),this.activeMagic(f.default.SupportMagic),this.newGameAnimationStop()},t.prototype.onGameToMenu=function(){this.enableMenus(!0,!1),this.enableUndo(0),this.enableTips(!1)},t.prototype.onGameEnd=function(){this.enableMenus(!1),this.checkRedPoint()},t.prototype.onStageClick=function(){console.log("onStageClick"),this.menuShow?this.animation.play("StageMenuHide"):this.animation.play("StageMenuShow"),this.menuShow=!this.menuShow},t.prototype.initLanguage=function(){this.menuLabels[0].string=s.default.get("L101"),this.menuLabels[1].string=s.default.get("L397"),this.menuLabels[2].string=s.default.get("L104"),this.menuLabels[3].string=s.default.get("L601"),this.menuLabels[4].string=s.default.get("L105"),this.menuLabels[5].string=s.default.get("L106"),this.refreshGameMode()},t.prototype.changeLayout=function(e){this.menuArea.getComponent(cc.Layout).horizontalDirection=e?cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:cc.Layout.HorizontalDirection.LEFT_TO_RIGHT},t.prototype.onNewTaskOpen=function(){var e=this;i.Game.userData.firstLogin||setTimeout(function(){n.default.showWith(u.default.stringFormat(s.default.get("L885"),u.default.getRichIcon("r_icon",50))),r.AudioMgr.playSFX("new_tasks_01_notify"),setTimeout(e.onNewTaskFlyUp.bind(e),1500)},500)},t.prototype.onNewTaskFlyUp=function(){var e=this;d.default.bezierFly(this.node,n.default.getViewNode(),this.taskIconNode,1,1,function(){},function(){},function(){e.checkRedPoint()}),r.AudioMgr.playSFX("new_tasks_02_fly_up")},t.prototype.checkRedPoint=function(){this.daliyRedPoint.active=!p.default.isDaliyCompleted(),this.storyRedPoint.active=h.default.hasNewPuzzle()},t.prototype.enableMenus=function(e,t){void 0===t&&(t=!0);for(var o=0;o<this.menuButtons.length;o++){if(!t&&o>5)return;this.menuButtons[o].interactable=e}},t.prototype.enableTips=function(e){this.menuButtons[6].interactable=e,this.menuButtons[8].interactable=e},t.prototype.enableUndo=function(e){this.menuButtons[7].interactable=e>0,this.menuButtons[9].interactable=e>0},t.prototype.updateScore=function(e){e<0&&(e=0),this.scoreView.string=e+""},t.prototype.stepUpdate=function(e){e>999&&(e=999),this.stepView.string=e+""},t.prototype.updateTime=function(e){this.timeView.string=l.default.timeFormat(e,!1)},t.prototype.activeMagic=function(e){this.magicBtn.active=e,this.magicCountChanged(i.Game.userData.magicCount)},t.prototype.magicCountChanged=function(e){e<=0?(this.magicCount.string="+",this.magicCount.node.y=2):(this.magicCount.string=""+(e<=99?e:99),this.magicCount.node.y=0)},t.prototype.shuffleCountChanged=function(e){e<=0?(this.shuffleCount.string="+",this.shuffleCount.node.y=2):(this.shuffleCount.string=""+(e<=99?e:99),this.shuffleCount.node.y=0)},t.prototype.onCanAutoComplete=function(e){var t=this;e?c.UICenter.activeAutoSuccWindow()||c.UICenter.openAutoSuccWindow(function(){i.Game.gameMgr.stage.autoComplete(),t.enableMenus(!1)}):c.UICenter.closeAutoSuccWindow()},t.prototype.onSettingClick=function(){c.UICenter.openSettingWin()},t.prototype.onDaliyClick=function(){c.UICenter.openDaliyWin()},t.prototype.onGameClick=function(){c.UICenter.openGameWin()},t.prototype.onStoryClick=function(){c.UICenter.openStoryWindow()},t.prototype.onTipsClick=function(){i.Game.gameMgr.stage.userTips()||n.default.showWith(s.default.get("L307"))},t.prototype.onUndoClick=function(){i.Game.gameMgr.stage.useUndo()||n.default.showWith(s.default.get("L307"))},t.prototype.onTaskClick=function(){c.UICenter.openTask()},t.prototype.onMagicClick=function(){if(i.Game.userData.magicCount>0)this.useMagicWand();else{if(this.magicUsing)return;c.UICenter.openMagicAdWindow()}},t.prototype.useMagicWand=function(){var e=this;if(!this.magicUsing){var t=i.Game.gameMgr.stage.findMagic();if(t){i.Game.userData.magicCount=i.Game.userData.magicCount-1,this.magicUsing=!0,this.magicEff.active=!0,this.magicEff.position=cc.Vec3.ZERO,this.magicEff.scale=1;var o=t.card.wordLeftTopPos;o=this.magicEff.parent.convertToNodeSpaceAR(o),cc.tween(this.magicEff).to(.5,{position:o,scale:.8}).call(function(){setTimeout(function(){i.Game.gameMgr.stage.useMagic(t,function(){return e.magicUsing=!1}),e.magicEff.active=!1},300)}).start()}else n.default.showWith(s.default.get("L307"))}},t.prototype.onShuffleClick=function(){c.UICenter.openShuffleWindow()},t.prototype.refreshGameMode=function(){i.Game.gameMgr.gameType!=y.GameType.Daliy?this.modelLabel.string=s.default.get("L4001"):this.modelLabel.string=s.default.get("L4002")},t.prototype.newGameAnimationTip=function(){var e=this.btnGameNode.position.clone();cc.tween(this.btnGameNode).to(.5,{position:cc.v3(0,e.y+20)},{easing:"smooth"}).to(.5,{position:e},{easing:"smooth"}).union().repeatForever().start()},t.prototype.newGameAnimationStop=function(){this.btnGameNode.stopAllActions(),this.btnGameNode.setPosition(cc.v2(0,15.659))},__decorate([C({type:cc.Node,tooltip:"\u83dc\u5355\u533a"})],t.prototype,"menuArea",void 0),__decorate([C({type:cc.Node,tooltip:"\u83dc\u5355\u533a2"})],t.prototype,"menu2Area",void 0),__decorate([C({type:cc.Node,tooltip:"\u5267\u60c5\u56fe\u6807"})],t.prototype,"storyIcon",void 0),__decorate([C(cc.Label)],t.prototype,"menuLabels",void 0),__decorate([C(cc.Label)],t.prototype,"scoreView",void 0),__decorate([C(cc.Label)],t.prototype,"timeView",void 0),__decorate([C(cc.Label)],t.prototype,"stepView",void 0),__decorate([C(cc.Node)],t.prototype,"daliyRedPoint",void 0),__decorate([C(cc.Node)],t.prototype,"storyRedPoint",void 0),__decorate([C(cc.Node)],t.prototype,"taskRedPoint",void 0),__decorate([C(cc.Node)],t.prototype,"bottomMenu",void 0),__decorate([C(cc.Node)],t.prototype,"magicBtn",void 0),__decorate([C(cc.Label)],t.prototype,"magicCount",void 0),__decorate([C(cc.Node)],t.prototype,"magicEff",void 0),__decorate([C(cc.Node)],t.prototype,"taskIconNode",void 0),__decorate([C(cc.Button)],t.prototype,"menuButtons",void 0),__decorate([C(cc.Label)],t.prototype,"modelLabel",void 0),__decorate([C(cc.Node)],t.prototype,"btnGameNode",void 0),__decorate([C(cc.Label)],t.prototype,"shuffleCount",void 0),__decorate([b],t)}(a.default);o.default=_,cc._RF.pop()},{"../../Game":"Game","../../core/UI/Toast":"Toast","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/util/DateUtils":"DateUtils","../../core/util/StrUtil":"StrUtil","../../data/DataTools":"DataTools","../../data/StoryHelper":"StoryHelper","../../game/GameMgr":"GameMgr","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../../global/GameConfig":"GameConfig","../AnimationUtil":"AnimationUtil","../UICenter":"UICenter"}],Stage:[function(e,t,o){"use strict";cc._RF.push(t,"98fe2j1JS5AxKgGqq5Mu83e","Stage"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../data/CardDefine"),i=e("../data/CardData"),r=e("../Game"),n=e("../global/DataManager"),s=e("../global/AudioMgr"),c=e("../global/GameConfig"),l=e("./UndoComp"),u=e("./TipsComp"),d=e("../core/global/Emitter"),p=e("../global/Const"),h=e("./MagicComp"),f=e("../core/util/MathUtil"),g=e("../core/UI/Toast"),m=e("../core/global/I18N"),y=e("../core/util/StrUtil"),v=e("./ShuffleComp"),b=function(){function e(e){var t=this;this.mView=null,this.mDealerSlot=null,this.mFlopSlot=null,this.mTargetSlots=null,this.mGameSlots=null,this.mAllCards=null,this.mAllSlots=[],this.mFlopThree=!1,this.mAutoCompleteFalg=!1,this.mAutoCompleting=!1,this.mIsPlaying=!1,this.mUndoComp=null,this.mTipsComp=null,this.mMagicComp=null,this.mShuffleComp=null,this.mUndoCount=0,this.mTipCount=0,this.mRedealCount=0,this.mSecond=0,this.mStartTime=!1,this.mMagicUseCount=0,this.mLastUndoCardKey="",this.mView=e,this.mDealerSlot=this.mView.getDealerSlotView(),this.mFlopSlot=this.mView.getFlopSlotView(),this.mTargetSlots=this.mView.getTargetSlotViews(),this.mGameSlots=this.mView.getGameSlotViews(),this.mAllSlots.push(this.mDealerSlot,this.mFlopSlot),this.mAllSlots=this.mAllSlots.concat(this.mTargetSlots,this.mGameSlots);for(var o=0,a=this.mAllSlots;o<a.length;o++)a[o].init(this);this.mAllCards={},this.mUndoComp=new l.default,this.mTipsComp=new u.default(this,this.mView.cardTipIcon),this.mMagicComp=new h.default(this,function(){return t.mUndoComp.reset()}),this.mShuffleComp=new v.default(this,function(){return t.mUndoComp.reset()})}return Object.defineProperty(e.prototype,"allCards",{get:function(){return this.mAllCards},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this.mView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flopThree",{get:function(){return this.mFlopThree},set:function(e){this.mFlopThree=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flopSlot",{get:function(){return this.mFlopSlot},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dealerSlot",{get:function(){return this.mDealerSlot},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameSlots",{get:function(){return this.mGameSlots},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetSlots",{get:function(){return this.mTargetSlots},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this.mIsPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"magicUseCount",{get:function(){return this.mMagicUseCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastUndoCardKey",{get:function(){return this.mLastUndoCardKey},set:function(e){this.mLastUndoCardKey=e},enumerable:!1,configurable:!0}),e.prototype.reset=function(){for(var e=0,t=this.mAllSlots;e<t.length;e++)t[e].reset();this.mView.reset(),this.mUndoComp.reset(),this.mStartTime=!1,this.mIsPlaying=!1,this.mAutoCompleteFalg=!1,this.mAutoCompleting=!1,this.mUndoCount=0,this.mTipCount=0,this.mRedealCount=0,this.mSecond=0,this.mMagicUseCount=0},e.prototype.onUpdate=function(e){this.isPlaying&&this.mStartTime&&(this.mSecond+=e,this.mSecond>=1&&(this.mSecond-=1,r.Game.userData.time++))},e.prototype.init=function(){this.createCards(),this.initUserSetting()},e.prototype.getStoreData=function(){var e={undoCount:this.mUndoCount,tipCount:this.mTipCount,redealCount:this.mRedealCount,deal:[],flop:[],target:[],game:[],flopThree:this.mFlopThree,magicUseCount:this.mMagicUseCount};this.mShuffleComp.needImmediateSave&&this.mShuffleComp.immediateRecover(),e.deal=this.mDealerSlot.getCardDatas(),e.flop=this.mFlopSlot.getCardDatas();for(var t=0,o=this.mTargetSlots;t<o.length;t++){var a=o[t];e.target.push(a.getCardDatas())}for(var i=0,r=this.mGameSlots;i<r.length;i++)a=r[i],e.game.push(a.getCardDatas());return e},e.prototype.recover=function(e){var t=e.undoCount,o=e.tipCount,a=e.redealCount,i=e.deal,r=e.flop,n=e.target,s=e.game,c=e.flopThree,l=e.magicUseCount;this.mUndoCount=t,this.mTipCount=o,this.mRedealCount=a,this.mFlopThree=c,this.mMagicUseCount=l,this.recoverSlot(this.mDealerSlot,i),this.recoverSlot(this.mFlopSlot,r);for(var u=0;u<this.mTargetSlots.length;u++)this.recoverSlot(this.mTargetSlots[u],n[u]);for(u=0;u<this.mGameSlots.length;u++)this.recoverSlot(this.mGameSlots[u],s[u]);this.checkGameState()},e.prototype.recoverSlot=function(e,t){var o,i;e.reset();for(var r=0,n=t;r<n.length;r++){var s=n[r],c=s[0],l=s[1],u=s[2];o=a.default.cardTypeValue2Key(c,l),(i=this.mAllCards[o]).reset(),i.flopCard(u),e.pushCard(i),e.addChild(i)}},e.prototype.startGame=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){switch(o.label){case 0:return this.reset(),this.shuffleCards(e),[4,this.dealerCard()];case 1:return o.sent(),[4,this.beginGame()];case 2:return o.sent(),t&&t(),this.ready(),[2]}})})},e.prototype.ready=function(){this.mIsPlaying=!0},e.prototype.createCards=function(){for(var e=1;e<=a.default.SuitCount;e++)for(var t=1;t<=a.default.EachSuitCount;t++){var o=this.mView.createCard();o.init(new i.CardData(e,t)),this.mAllCards[a.default.cardData2Key(o.cardData)]=o}},e.prototype.initUserSetting=function(){var e=this,t=r.Game.userData.gameBG;"default"==t&&(t="bgtable_1"),r.Game.gameRes.getBgSpriteFrame(t,function(t){e.mView.setBg(t)},this);var o=n.default.getDefaultCardBg();"default"!=r.Game.userData.cardBG&&(o=n.default.getCardBg(r.Game.userData.cardBG)),this.setCardBg(o),this.mFlopThree=r.Game.userData.flopThree},e.prototype.setCardBg=function(e){for(var t in this.mAllCards)this.mAllCards[t].setCardBg(e)},e.prototype.setCardFace=function(){for(var e in this.mAllCards)this.mAllCards[e].setCardIcon()},e.prototype.shuffleCards=function(e){for(var t,o,i=a.default.key2Data(e),r=[],n=28;n<i.length;n++)r.push(i[n]);for(r=f.default.shuffle(r),n=0;n<r.length;n++)o=a.default.cardArr2Key(r[n]),(t=this.mAllCards[o]).active=!0,this.mDealerSlot.pushCard(t),this.mDealerSlot.addChild(t);for(n=27;n>=0;n--)o=a.default.cardArr2Key(i[n]),(t=this.mAllCards[o]).active=!0,this.mDealerSlot.pushCard(t),this.mDealerSlot.addChild(t)},e.prototype.dealerCard=function(){var e=this;return s.AudioMgr.deal(),new Promise(function(t){for(var o=e.mGameSlots.length,a={insert:!0,startPos:e.getOverLayerNodePos(e.dealerSlot.getPopWorldPos(null)),moveType:i.MoveType.Init,delay:0,easyObj:"linear",duration:c.default.DealerMoveTime,callback:null},r=0;r<o;r++)for(var n=r;n<o;n++)a.delay+=c.default.DealerGrapTime,n==o-1&&r==o-1&&(a.callback=t),e.moveToSlot(a,e.mDealerSlot,e.mGameSlots[n],e.mDealerSlot.popCard())})},e.prototype.beginGame=function(){return __awaiter(this,void 0,Promise,function(){var e=this;return __generator(this,function(){return[2,new Promise(function(t){for(var o=0;o<e.mGameSlots.length;o++)if(o==e.mGameSlots.length-1){var a=e.mGameSlots[o].peekCard().flopOpen();setTimeout(t,a)}else e.mGameSlots[o].peekCard().flopOpen()})]})})},e.prototype.moveToSlot=function(e,t,o){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];if(a&&0!=a.length){for(var r=e.moveType,n=e.callback,s=a[a.length-1],c=0,l=a;c<l.length;c++){var u=l[c];u.moveType=r,n&&(e.callback=u===s?n:null),t.MoveToSlot(o,u,e)}this.onDealStep.apply(this,__spreadArrays([e,t,o],a))}},e.prototype.findTargetSlot=function(e,t,o,a){if(void 0===t&&(t=!0),void 0===o&&(o=!0),void 0===a&&(a=!1),!t&&!o||!e)return null;var i=[];return o&&(i=i.concat(this.mTargetSlots)),t&&(i=i.concat(this.mGameSlots)),this.findTargetSlotBy(i,e,a)},e.prototype.findTargetSlotBy=function(e,t,o){void 0===o&&(o=!1);for(var a=null,i=0,r=e;i<r.length;i++){var n=r[i],s={ignoreNext:o};if(n.canMoveInto(t,s)){a=n;break}}return a},e.prototype.findDropSlot=function(e){for(var t=0,o=__spreadArrays(this.targetSlots,this.gameSlots);t<o.length;t++){var a=o[t];if(a.canDrop(e))return a}return null},e.prototype.onMoveCardToTarget=function(e){if(e.cardData.isK()){for(var t=!0,o=null,a=0,i=this.mTargetSlots;a<i.length;a++)if(!(o=i[a].peekCard())||!o.cardData.isK()){t=!1;break}t&&this.gameSucc()}},e.prototype.onMoveCardEnd=function(e){e.moveType!=i.MoveType.Init&&e.moveType!=i.MoveType.Shuffle&&(this.mAutoCompleting||(this.checkGameState(),this.mTipsComp.clear()))},e.prototype.checkGameState=function(){this.mAutoCompleteFalg=this.cheakCanAutoComplete(),d.Emitter.fire(p.default.eCanAutoComplete,this.mAutoCompleteFalg),this.mDealerSlot.isEmpty()&&this.checkGameFail()&&g.default.showWith(m.default.get("L307"))},e.prototype.onCardTouch=function(){this.mTipsComp.clear()},e.prototype.cheakCanAutoComplete=function(){if(this.flopThree&&(!this.mDealerSlot.isEmpty()||this.mFlopSlot.childrenCount>2))return!1;for(var e=0,t=this.mGameSlots;e<t.length;e++)if(!t[e].allOpen)return!1;return!0},e.prototype.checkGameFail=function(){__spreadArrays(this.mGameSlots,[this.mFlopSlot]);for(var e=0,t=this.mGameSlots;e<t.length;e++){var o=t[e],a=o.peekCard();if(a)for(;a&&a.isOpen;){if((s=this.findTargetSlot(a))&&this.mTipsComp.checkValidMove(o,s,a))return!1;a=a.last}}for(var i=this.mFlopSlot.peekCard();i;){if(s=this.findTargetSlot(i,!0,!0,!0))return!1;i=i.last}for(var r=0,n=this.mTargetSlots;r<n.length;r++){var s,c=n[r].peekCard();if(c&&(s=this.findTargetSlot(c,!0,!1))&&this.mTipsComp.checkValidMoveOfTargetCard(c,s))return!1}return!this.isGameSlotsEmpty()||!this.mFlopSlot.isEmpty()},e.prototype.isGameSlotsEmpty=function(){for(var e=0,t=this.mGameSlots;e<t.length;e++)if(!t[e].isEmpty())return!1;return!0},e.prototype.autoComplete=function(){return __awaiter(this,void 0,void 0,function(){var e,t,o;return __generator(this,function(a){switch(a.label){case 0:this.mAutoCompleting=!0,e=__spreadArrays(this.mGameSlots,[this.mFlopSlot]),this.flopThree||e.push(this.mDealerSlot),t=0,o=e,a.label=1;case 1:return t<o.length?[4,o[t].onAutoFindTarget()]:[3,4];case 2:if(a.sent())return this.autoComplete(),[2];a.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},e.prototype.gameSucc=function(){this.mIsPlaying=!1,r.Game.gameMgr.onGameSucc(this.mUndoCount>0),d.Emitter.fire(p.default.eCanAutoComplete,!1)},e.prototype.gameFail=function(){d.Emitter.fire(p.default.eCanAutoComplete,!1)},e.prototype.onDealerClick=function(){this.mRedealCount++},e.prototype.useUndo=function(){return!!this.mUndoComp.use()&&(this.mUndoCount++,!0)},e.prototype.userTips=function(){return!!this.mTipsComp.use()&&(this.mTipCount++,!0)},e.prototype.findMagic=function(){return this.mMagicComp.find()},e.prototype.useMagic=function(e,t){this.mMagicComp.use(e,t),this.mMagicUseCount++},e.prototype.checkShuffle=function(){return!this.mAutoCompleteFalg},e.prototype.useShuffle=function(){this.mShuffleComp.use()},e.prototype.isFlopSlot=function(e){return e==this.flopSlot},e.prototype.isDealerSlot=function(e){return e==this.dealerSlot},e.prototype.isGameSlot=function(e){return this.gameSlots.findIndex(function(t){return t==e})>=0},e.prototype.isTargetSlot=function(e){return this.targetSlots.findIndex(function(t){return t==e})>=0},e.prototype.getEmptyGameSlot=function(){for(var e=0,t=0,o=this.gameSlots;t<o.length;t++)o[t].isEmpty()&&e++;return e},e.prototype.addToOverLayer=function(e,t){void 0===t&&(t=!1),this.mView.addToOverLayer(e,t)},e.prototype.getOverLayerNodePos=function(e){return this.mView.getOverLayerNodePos(e)},e.prototype.playDropCardEff=function(e,t){this.mView.playDropCardEff(e.node,t)},e.prototype.onChangeAutoComplete=function(e){e&&this.mAutoCompleteFalg&&this.autoComplete()},e.prototype.onDealStep=function(e,t,o){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];var s,c=e.moveType,l=e.undoMoveType;c!=i.MoveType.Init&&c!=i.MoveType.Shuffle&&(this.mStartTime||(this.mStartTime=!0),this.stepChanged(),c!=i.MoveType.Undo&&c!=i.MoveType.Auto&&this.recordUndo.apply(this,__spreadArrays([c,t,o],r)),c==i.MoveType.Undo&&(this.scoreCounter(5),this.isGameSlot(o)&&(s=t.peekCard())&&s.hasLast()&&!s.last.isOpen&&this.scoreCounter(104),l==i.MoveType.RestDeal&&this.scoreCounter(108)),c==i.MoveType.RestDeal&&this.scoreCounter(8),this.isTargetSlot(o)&&this.scoreCounter(1),this.isTargetSlot(t)&&this.scoreCounter(2),this.isFlopSlot(t)&&!this.isDealerSlot(o)&&this.scoreCounter(3),this.isFlopSlot(o)&&!this.isDealerSlot(t)&&this.scoreCounter(103),this.isGameSlot(t)&&(s=t.peekCard())&&!s.isOpen&&this.scoreCounter(4),this.isGameSlot(o)&&o.descTypeOpen(),y.default.isNullOrEmpty(this.lastUndoCardKey)||(this.lastUndoCardKey=""),this.isTargetSlot(t)&&r.length>0&&this.mTipsComp.checkValidMoveOfTargetCard(r[0],o)&&(this.lastUndoCardKey=a.default.cardData2Key(r[0].cardData)))},e.prototype.recordUndo=function(e,t,o){for(var a,i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];(a=this.mUndoComp).push.apply(a,__spreadArrays([e,t,o],i))},e.prototype.scoreCounter=function(e){r.Game.scoreCounter.calcAndSave(e)},e.prototype.stepChanged=function(){r.Game.userData.step++},e.prototype.onCollectTask=function(e){for(var t,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];(t=r.Game.gameMgr).onCollectTask.apply(t,__spreadArrays([e],o))},e}();o.default=b,cc._RF.pop()},{"../Game":"Game","../core/UI/Toast":"Toast","../core/global/Emitter":"Emitter","../core/global/I18N":"I18N","../core/util/MathUtil":"MathUtil","../core/util/StrUtil":"StrUtil","../data/CardData":"CardData","../data/CardDefine":"CardDefine","../global/AudioMgr":"AudioMgr","../global/Const":"Const","../global/DataManager":"DataManager","../global/GameConfig":"GameConfig","./MagicComp":"MagicComp","./ShuffleComp":"ShuffleComp","./TipsComp":"TipsComp","./UndoComp":"UndoComp"}],StoryDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d8b7eLt8hRHsJPoX7JfFacS","StoryDialog"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../core/global/I18N"),i=e("../../../core/UI/WNode"),r=e("../../../core/Table/Table"),n=e("../../../data/StoryHelper"),s=e("../../../core/Table/TableHelper"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgNode=null,t.arrow=null,t.bg=null,t.label=null,t.skipLabel=null,t.chapterData=null,t.curIndex=0,t.puzzles=[],t.curInsNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.bg.on(cc.Node.EventType.TOUCH_END,this.next,this)},t.prototype.initLanguage=function(){this.skipLabel.string=a.default.get("L526")},t.prototype.show=function(){e.prototype.show.call(this),this.initLanguage()},t.prototype.showByParam=function(t,o){e.prototype.show.call(this),this.puzzles=o,this.chapterData=n.default.getChapterById(t.plotId),this.curIndex=this.chapterData.puzzles.findIndex(function(e){return e==t.id}),this.showItem(t)},t.prototype.next=function(){if(this.curInsNode&&this.curInsNode.destroy(),this.curIndex++,this.curIndex>=this.chapterData.puzzles.length)this.hide();else{var e=this.chapterData.puzzles[this.curIndex],t=s.TableHelper.GetField(r.eTable.eTabFragment,e);this.showItem(t)}},t.prototype.showItem=function(e){this.label.string=a.default.get("L"+e.dialogue);var t=this.puzzles.find(function(t){return t.spriteFrame.name==e.fragmentRes});this.curInsNode=cc.instantiate(t.node),this.curInsNode.scale=1.4,this.curInsNode.parent=this.node,this.curInsNode.position=this.node.convertToNodeSpaceAR(t.node.parent.convertToWorldSpaceAR(t.node.position)),console.log(e.orientation),2==e.orientation||8==e.orientation?this.bgNode.y=this.curInsNode.y+210:this.bgNode.y=this.curInsNode.y-210,2==e.orientation||4==e.orientation?this.bgNode.x=this.curInsNode.x+70:this.bgNode.x=this.curInsNode.x,this.bgNode.x+this.bgNode.width/2>this.node.width/2-14?this.bgNode.x=this.node.width/2-this.bgNode.width/2-14:this.bgNode.x-this.bgNode.width/2<-this.node.width/2+14&&(this.bgNode.x=-this.node.width/2+this.bgNode.width/2+14),2==e.orientation?(this.arrow.scaleX=1,this.arrow.scaleY=1,this.arrow.x=-this.bgNode.width/4,this.arrow.y=-this.bgNode.height/2-this.arrow.height/2):8==e.orientation?(this.arrow.scaleX=-1,this.arrow.scaleY=1,this.arrow.x=this.bgNode.width/4,this.arrow.y=-this.bgNode.height/2-this.arrow.height/2):4==e.orientation?(this.arrow.scaleX=1,this.arrow.scaleY=-1,this.arrow.x=-this.bgNode.width/4,this.arrow.y=this.bgNode.height/2+this.arrow.height/2):(this.arrow.scaleX=-1,this.arrow.scaleY=-1,this.arrow.x=this.bgNode.width/4,this.arrow.y=this.bgNode.height/2+this.arrow.height/2)},t.prototype.skip=function(){this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this),this.curInsNode&&this.curInsNode.destroy(),this.onHideAction&&this.onHideAction()},__decorate([u(cc.Node)],t.prototype,"bgNode",void 0),__decorate([u(cc.Node)],t.prototype,"arrow",void 0),__decorate([u(cc.Node)],t.prototype,"bg",void 0),__decorate([u(cc.Label)],t.prototype,"label",void 0),__decorate([u(cc.Label)],t.prototype,"skipLabel",void 0),__decorate([l],t)}(i.default);o.default=d,cc._RF.pop()},{"../../../core/Table/Table":"Table","../../../core/Table/TableHelper":"TableHelper","../../../core/UI/WNode":"WNode","../../../core/global/I18N":"I18N","../../../data/StoryHelper":"StoryHelper"}],StoryHelper:[function(e,t,o){"use strict";cc._RF.push(t,"22550jRDkJMiawJlxF5exDc","StoryHelper"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Game"),i=e("../core/Table/TableHelper"),r=e("../core/Table/Table"),n=e("./UserData"),s=function(){function e(){}return e.addUserStoryScore=function(e){var t=a.Game.userData.storyData;t||(t=new n.StoryData,a.Game.userData.storyData=t),t.score+=e;var o=this.checkScoreToPuzzle(t);return a.Game.userData.storyData=t,o},e.getUserStoryScore=function(){return a.Game.userData.storyData?a.Game.userData.storyData.score:0},e.checkScoreToPuzzle=function(e){e.plots||(e.plots=[]);var t=[];this.convertScoreToPuzzle(e,t);for(var o=0,a=t;o<a.length;o++){var i=a[o];this.curPuzzleIds.push(i)}return t},e.convertScoreToPuzzle=function(e,t){e.plots||(e.plots=[]);var o=this.getCurChapter();if(!this.chapterIsComplete(o)){var a=i.TableHelper.GetField(r.eTable.eTabPlot,o.plotsId);if(e.score>=a.taskScore){e.score-=a.taskScore;var n,s=i.TableHelper.FindAll(r.eTable.eTabFragment,function(e){return e.plotId==o.plotsId});n=0==o.puzzles.length?s[0].id:s[o.puzzles.length].id,o.puzzles.push(n),t.push(n),this.convertScoreToPuzzle(e,t)}}},e.chapterIsComplete=function(e){if(!e||!e.puzzles)return!1;var t=this.getPuzzleCount(e.plotsId);return e.puzzles.length>=t},e.getCurChapter=function(){var e=a.Game.userData.storyData;e||(this.addUserStoryScore(0),e=a.Game.userData.storyData);var t=null;if(0==e.plots.length&&((t=new n.StoryChapterData).plotsId=1,t.unlock=!0,t.puzzles=[],e.plots.push(t)),!t){for(var o=0;o<e.plots.length;o++)if(!this.chapterIsComplete(e.plots[o])){t=e.plots[o];break}if(!t){if(o==this.getChapterCount())return e.plots[o-1];var i=e.plots[o-1];(t=new n.StoryChapterData).plotsId=i.plotsId+1,t.unlock=!0,t.puzzles=[],e.plots.push(t)}}return t},e.getUserPuzzleCount=function(e){if(a.Game.userData.storyData&&a.Game.userData.storyData.plots){var t=a.Game.userData.storyData.plots.find(function(t){return t.plotsId==e});if(t&&t.puzzles)return t.puzzles.length}return 0},e.getPuzzleCount=function(e){var t=i.TableHelper.FindAll(r.eTable.eTabFragment,function(t){return t.plotId==e});return t?t.length:0},e.isChapterUnlock=function(e){if(e<0||e>this.getChapterCount()-1)return!1;var t=a.Game.userData.storyData;return!(!t||!t.plots||e>=t.plots.length)&&t.plots[e].unlock},e.getChapterByIndex=function(e){if(e<0||e>this.getChapterCount()-1)return null;var t=a.Game.userData.storyData;return!t||!t.plots||e>=t.plots.length?null:t.plots[e]},e.getChapterById=function(e){var t=a.Game.userData.storyData;return t&&t.plots?t.plots.find(function(t){return t.plotsId==e}):null},e.getChapterCount=function(){return 5},e.isNewPuzzle=function(e){return this.curPuzzleIds.findIndex(function(t){return t==e})>=0},e.removeNewPuzzle=function(e){var t=this.curPuzzleIds.findIndex(function(t){return t==e});t>=0&&t<this.curPuzzleIds.length&&this.curPuzzleIds.splice(t,1)},e.hasNewPuzzle=function(){return this.curPuzzleIds.length>0},e.curPuzzleIds=[],e}();o.default=s,cc._RF.pop()},{"../Game":"Game","../core/Table/Table":"Table","../core/Table/TableHelper":"TableHelper","./UserData":"UserData"}],StoryItem:[function(e,t,o){"use strict";cc._RF.push(t,"87d088dKDxJ5ah+mkDI662X","StoryItem"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../core/UI/WNode"),i=e("../../../core/Table/TableHelper"),r=e("../../../core/Table/Table"),n=e("../../../data/StoryHelper"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.puzzles=[],t.closeOpacity=null,t.openOpacity=null,t}return __extends(t,e),t.prototype.onLoad=function(){for(var e=this,t=function(t){o.close(t.node),t.node.on(cc.Node.EventType.TOUCH_END,function(){return e.onPuzzleClick(t)},o)},o=this,a=0,i=this.puzzles;a<i.length;a++)t(i[a])},t.prototype.close=function(e){e.color=cc.Color.BLACK,e.opacity=this.closeOpacity},t.prototype.open=function(e){e.color=cc.Color.WHITE,e.opacity=this.openOpacity},t.prototype.aniOpen=function(e){var t=this;this.close(e);var o=cc.tintTo(.3,255,255,255),a=cc.tintTo(.3,0,0,0),i=cc.tintTo(.3,255,255,255),r=cc.tintTo(.3,0,0,0),n=cc.tintTo(.3,255,255,255);e.runAction(cc.sequence(o,a,i,r,n,cc.callFunc(function(){e.opacity=t.openOpacity})))},t.prototype.showByParam=function(e){for(var t=function(t){if(!e)return o.close(t.node),"continue";var a=i.TableHelper.Find(r.eTable.eTabFragment,function(e){return e.fragmentRes==t.spriteFrame.name});e.puzzles.findIndex(function(e){return e==a.id})>=0?n.default.isNewPuzzle(a.id)?(n.default.removeNewPuzzle(a.id),o.aniOpen(t.node)):o.open(t.node):o.close(t.node)},o=this,a=0,s=this.puzzles;a<s.length;a++)t(s[a])},t.prototype.onPuzzleClick=function(e){var t=i.TableHelper.Find(r.eTable.eTabFragment,function(t){return t.fragmentRes==e.spriteFrame.name}),o=n.default.getChapterById(t.plotId);o&&o.puzzles.find(function(e){return e==t.id})&&(t?this.showDialog(t,this.puzzles):console.error("find field error, sprite name="+e.spriteFrame.name))},__decorate([l(cc.Sprite)],t.prototype,"puzzles",void 0),__decorate([c],t)}(a.default);o.default=u,cc._RF.pop()},{"../../../core/Table/Table":"Table","../../../core/Table/TableHelper":"TableHelper","../../../core/UI/WNode":"WNode","../../../data/StoryHelper":"StoryHelper"}],StoryProgress:[function(e,t,o){"use strict";cc._RF.push(t,"17cddo9X8RFzoa5MnSlDlNn","StoryProgress"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../core/UI/WNode"),i=e("../../../core/global/I18N"),r=e("../../../data/StoryHelper"),n=cc._decorator,s=n.ccclass,c=n.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.progressLabel=null,t.progress=null,t.fieldPlot=null,t}return __extends(t,e),t.prototype.showByParam=function(t){this.fieldPlot=t,e.prototype.show.call(this),this.showTitle(),this.showProgress()},t.prototype.showTitle=function(){if(this.fieldPlot){var e=r.default.getUserPuzzleCount(this.fieldPlot.id),t=r.default.getPuzzleCount(this.fieldPlot.id);this.titleLabel.string=i.default.get("L602")+":"+e+"/"+t}},t.prototype.showProgress=function(){var e=r.default.getUserStoryScore(),t=this.fieldPlot?this.fieldPlot.taskScore:20;this.progressLabel.string=e+"/"+t,this.progress.progress=e/t},t.prototype.onAddBtnClick=function(){},__decorate([c(cc.Label)],t.prototype,"titleLabel",void 0),__decorate([c(cc.Label)],t.prototype,"progressLabel",void 0),__decorate([c(cc.ProgressBar)],t.prototype,"progress",void 0),__decorate([s],t)}(a.default);o.default=l,cc._RF.pop()},{"../../../core/UI/WNode":"WNode","../../../core/global/I18N":"I18N","../../../data/StoryHelper":"StoryHelper"}],StoryWindow:[function(e,t,o){"use strict";cc._RF.push(t,"a0c7bi7eYBKX7YyfMVtAYRk","StoryWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("../../core/global/I18N"),r=e("../../core/global/Emitter"),n=e("./content/StoryItem"),s=e("./content/StoryDialog"),c=e("../../global/AudioMgr"),l=e("../UICenter"),u=e("../../core/Table/TableHelper"),d=e("../../core/Table/Table"),p=e("./content/StoryProgress"),h=e("../../data/StoryHelper"),f=e("../../core/UI/DialogBox"),g=e("../../global/Const"),m=cc._decorator,y=m.ccclass,v=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.skipLabel=null,t.storyItems=[],t.storyDialog=null,t.btnLeft=null,t.btnRight=null,t.progress=null,t.helperBtn=null,t.closeOpacity=20,t.openOpacity=255,t.curIndex=0,t}return __extends(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),r.Emitter.register(g.default.eLanguageChange,this.initLanguage,this),this.initLanguage(),this.storyDialog.onHideAction=function(){t.progress.show()};for(var o=0,a=this.storyItems;o<a.length;o++){var i=a[o];i.closeOpacity=this.closeOpacity,i.openOpacity=this.openOpacity,i.showDialog=function(e,o){t.progress.hide(),t.storyDialog.showByParam(e,o)}}},t.prototype.initLanguage=function(){this.titleLabel.string=i.default.get("L601"),this.skipLabel.string=i.default.get("L526")},t.prototype.show=function(){e.prototype.show.call(this);var t=h.default.getCurChapter();t&&t.plotsId>0?this.curIndex=t.plotsId-1:this.curIndex=0,this.showItem()},t.prototype.onLeftClick=function(){this.curIndex--,this.curIndex<0&&(this.curIndex=0),c.AudioMgr.clickOK(),this.checkUnlock()?this.showItem():this.curIndex++},t.prototype.onRightClick=function(){this.curIndex++,this.curIndex>=this.storyItems.length&&(this.curIndex=this.curIndex-1),c.AudioMgr.clickOK(),this.checkUnlock()?this.showItem():this.curIndex--},t.prototype.checkUnlock=function(){if(h.default.isChapterUnlock(this.curIndex))return!0;var e=new f.DialogBoxData;return e.initWith(f.eDialogButtonType.CONFIRM,i.default.get("L617"),i.default.get("L601")),e.clickToBack=!0,f.default.showWith(e),!1},t.prototype.showItem=function(){for(var e=u.TableHelper.GetField(d.eTable.eTabPlot,this.curIndex+1),t=0;t<this.storyItems.length;t++)this.storyItems[t].node.name==e.storyRes?(this.storyItems[t].show(),this.storyItems[t].showByParam(h.default.getChapterByIndex(t))):this.storyItems[t].activeInHierarchy&&this.storyItems[t].hide();this.checkButtonState(),this.storyDialog.hide(),this.progress.showByParam(e)},t.prototype.checkButtonState=function(){this.btnLeft.active=this.curIndex>0,this.btnRight.active=this.curIndex<this.storyItems.length-1},t.prototype.onTipClick=function(){c.AudioMgr.clickOK(),l.UICenter.openHelperWindow(1)},t.prototype.toBack=function(){e.prototype.toBack.call(this),r.Emitter.fire(g.default.eOnCheckRedPoint),c.AudioMgr.clickOK()},__decorate([v(cc.Label)],t.prototype,"titleLabel",void 0),__decorate([v(cc.Label)],t.prototype,"skipLabel",void 0),__decorate([v(n.default)],t.prototype,"storyItems",void 0),__decorate([v(s.default)],t.prototype,"storyDialog",void 0),__decorate([v(cc.Node)],t.prototype,"btnLeft",void 0),__decorate([v(cc.Node)],t.prototype,"btnRight",void 0),__decorate([v(p.default)],t.prototype,"progress",void 0),__decorate([v(cc.Node)],t.prototype,"helperBtn",void 0),__decorate([v],t.prototype,"closeOpacity",void 0),__decorate([v],t.prototype,"openOpacity",void 0),__decorate([y],t)}(a.default);o.default=b,cc._RF.pop()},{"../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/DialogBox":"DialogBox","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../data/StoryHelper":"StoryHelper","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../UICenter":"UICenter","./content/StoryDialog":"StoryDialog","./content/StoryItem":"StoryItem","./content/StoryProgress":"StoryProgress"}],StrUtil:[function(e,t,o){"use strict";cc._RF.push(t,"babffDQKiFLh4YDuGiRVVhS","StrUtil"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function e(){}return Object.defineProperty(e,"empty",{get:function(){return""},enumerable:!1,configurable:!0}),e.isNullOrEmpty=function(e){return null==e||null==e||""==e},e.getFileName=function(e){var t=e.indexOf("?"),o=e;return t>0&&(o=e.slice(0,t)),(t=o.lastIndexOf("/"))<=0?o:o.slice(t+1,o.length)},e.isNetUrl=function(e){return!this.isNullOrEmpty(e)&&"http"==e.slice(0,4)},e.prefixInteger=function(e,t){return(Array(t).join("0")+e).slice(-t)},e.stringFormat=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(!e)return e;for(var a=0;a<t.length;a++)if(null!=t[a]){var i=new RegExp("({)"+a+"(})","g");e=e.replace(i,t[a])}return e},e.rpad=function(e,t,o){for(o=o.charAt(0),e||(e=o);e.length<t;)e+=o;return e},e.lpad=function(e,t,o){for(o=o.charAt(0),e||(e=o);e.length<t;)e=o+e;return e},e.startWith=function(e,t){return!(!e||!t||e.length<t.length)&&e.substr(0,t.length)==t},e.endWith=function(e,t){return!(!e||!t||e.length<t.length)&&e.substr(e.length-t.length)==t},e.getRichIcon=function(e,t,o){return void 0===t&&(t=30),void 0===o&&(o="center"),"<img src='"+e+"' height="+t+" align="+o+" />"},e}();o.default=a,cc._RF.pop()},{}],StsLogEvent:[function(e,t,o){"use strict";cc._RF.push(t,"37795YqDUlBWLDFuXGoFbMW","StsLogEvent"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../core/util/DateUtils"),i=e("../Game"),r=e("../global/GameConfig"),n=function(){function e(){}return e.log=function(e){r.default.SDK.logEventToFirebase(e),r.default.SDK.logEvent(e)},e.onInitUser=function(){var t=i.Game.userData.FBData.login[1],o=new Date(t);a.default.dateFormat(new Date)==a.default.dateFormat(o)&&(e.isFirstDay=!0)},e.onInComplete=function(){this.isFirstDay&&this.InDotCount.indexOf(i.Game.userData.userSts.inCount)>=0&&this.log("first_game_"+i.Game.userData.userSts.inCount+"is_end")},e.onRdComplete=function(){this.isFirstDay},e.onLevelComplete=function(){if(this.isFirstDay){var e=i.Game.userData.getSuccCount();1==e?this.log("first_finish"):2==e?this.log("second_finish"):3==e&&this.log("third_finish")}},e.onDuration=function(){this.isFirstDay&&(i.Game.userData.userSts.time>this.DotDuration[0]&&0==i.Game.userData.userSts.logTime?(this.log("duration_10m"),i.Game.userData.userSts.logTime=this.DotDuration[0]):i.Game.userData.userSts.time>this.DotDuration[1]&&i.Game.userData.userSts.logTime==this.DotDuration[0]?(this.log("duration_20m"),i.Game.userData.userSts.logTime=this.DotDuration[1]):i.Game.userData.userSts.time>this.DotDuration[2]&&i.Game.userData.userSts.logTime==this.DotDuration[1]&&(this.log("duration_30m"),i.Game.userData.userSts.logTime=this.DotDuration[2]))},e.isFirstDay=!1,e.InDotCount=[1,3,5,10,15],e.DotDuration=[600,1200,1800],e}();o.default=n,cc._RF.pop()},{"../Game":"Game","../core/util/DateUtils":"DateUtils","../global/GameConfig":"GameConfig"}],SuccEffectWindow:[function(e,t,o){"use strict";cc._RF.push(t,"d7cc5cQ/6pPpILh7WuJj2pi","SuccEffectWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../global/GameConfig"),i=e("../../core/UI/WWindow"),r=e("../../core/global/I18N"),n=e("../../Game"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tips=null,t.isPlaying=!1,t.timeOut=null,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.gameArea=n.Game.gameMgr.stage.view.gameArea,this.winSize=n.Game.gameMgr.stage.view.node;var t=a.default.SuccEffMoveAllTm;o.effectData=[[cc.moveTo(t/5,new cc.Vec2(0,this.gameArea.y)),cc.moveTo(t/5,new cc.Vec2(this.winSize.width/2-30,(145-this.winSize.height/2+this.gameArea.y)/2)),cc.moveTo(t/5,new cc.Vec2(0,145-this.winSize.height/2)),cc.moveTo(t/5,new cc.Vec2(30-this.winSize.width/2,(145-this.winSize.height/2+this.gameArea.y)/2)),cc.moveTo(t/5,new cc.Vec2(0,this.gameArea.y))],[cc.moveTo(t/10,new cc.Vec2(0,this.gameArea.y)),cc.moveTo(t/5,new cc.Vec2(this.winSize.width/2-30,this.gameArea.y)),cc.moveTo(t/5,new cc.Vec2(this.winSize.width/2-30,145-this.winSize.height/2)),cc.moveTo(t/5,new cc.Vec2(30-this.winSize.width/2,145-this.winSize.height/2)),cc.moveTo(t/5,new cc.Vec2(30-this.winSize.width/2,this.gameArea.y)),cc.moveTo(t/10,new cc.Vec2(0,this.gameArea.y))],[cc.moveTo(t/4,new cc.Vec2(0,this.gameArea.y)),cc.moveTo(t/4,new cc.Vec2(this.winSize.width/2-30,145-this.winSize.height/2)),cc.moveTo(t/4,new cc.Vec2(30-this.winSize.width/2,145-this.winSize.height/2)),cc.moveTo(t/4,new cc.Vec2(0,this.gameArea.y))],[cc.moveTo(t/7,new cc.Vec2(0,this.gameArea.y)),cc.moveTo(t/7,new cc.Vec2(this.winSize.width/2-30,145-this.winSize.height/2)),cc.moveTo(t/7,new cc.Vec2(30-this.winSize.width/2,145-this.winSize.height/2)),cc.moveTo(t/7,new cc.Vec2(0,this.gameArea.y)),cc.moveTo(t/7,new cc.Vec2((this.winSize.width/2-30)/2,(145-this.winSize.height/2+this.gameArea.y)/2)),cc.moveTo(t/7,new cc.Vec2((30-this.winSize.width/2)/2,(145-this.winSize.height/2+this.gameArea.y)/2)),cc.moveTo(t/7,new cc.Vec2(0,this.gameArea.y))],[cc.moveTo(t/8,new cc.Vec2(0,this.gameArea.y)),cc.moveTo(t/8,new cc.Vec2(this.winSize.width/2-30,this.gameArea.y)),cc.moveTo(t/8,new cc.Vec2(0,(145-this.winSize.height/2+this.gameArea.y)/2)),cc.moveTo(t/8,new cc.Vec2(this.winSize.width/2-30,145-this.winSize.height/2)),cc.moveTo(t/8,new cc.Vec2(30-this.winSize.width/2,145-this.winSize.height/2)),cc.moveTo(t/8,new cc.Vec2(0,(145-this.winSize.height/2+this.gameArea.y)/2)),cc.moveTo(t/8,new cc.Vec2(30-this.winSize.width/2,this.gameArea.y)),cc.moveTo(t/8,new cc.Vec2(0,this.gameArea.y))],[cc.moveTo(t/8,new cc.Vec2(0,this.gameArea.y)),cc.moveTo(t/8,new cc.Vec2(this.winSize.width/2-30,(145-this.winSize.height/2+this.gameArea.y)/2)),cc.moveTo(t/8,new cc.Vec2(this.winSize.width/4-30,(145-this.winSize.height/2+this.gameArea.y)/2)),cc.moveTo(t/8,new cc.Vec2(this.winSize.width/4-30,145-this.winSize.height/2)),cc.moveTo(t/8,new cc.Vec2(30-this.winSize.width/4,145-this.winSize.height/2)),cc.moveTo(t/8,new cc.Vec2(30-this.winSize.width/4,(145-this.winSize.height/2+this.gameArea.y)/2)),cc.moveTo(t/8,new cc.Vec2(30-this.winSize.width/2,(145-this.winSize.height/2+this.gameArea.y)/2)),cc.moveTo(t/8,new cc.Vec2(0,this.gameArea.y))]];for(var i=[],r=Math.PI/180,s=this.winSize.width/2-30,c=(145-this.winSize.height/2-this.gameArea.y)/2,l=(145-this.winSize.height/2+this.gameArea.y)/2,u=-90;u<=270;u+=10)i.push(cc.moveTo(10*t/360,new cc.Vec2(s*Math.cos(r*u),c*Math.sin(r*u)+l)));o.effectData.push(i);for(var d,p,h=[],f=1;f<5;f++){for(d=s*f/4,p=c*f/4,i=[],u=-90;u<=270;u+=40)i.push(cc.moveTo(10*t/360,new cc.Vec2(d*Math.cos(r*u),p*Math.sin(r*u)+l)));h.push(i)}o.EffectData4.push(h),i=[cc.moveTo(t/6,new cc.Vec2(0,this.gameArea.y)),cc.moveTo(t/6,new cc.Vec2(s*Math.cos(-90*r),c*Math.sin(-90*r)+l)),cc.moveTo(t/6,new cc.Vec2(s*Math.cos(54*r),c*Math.sin(54*r)+l)),cc.moveTo(t/6,new cc.Vec2(s*Math.cos(198*r),c*Math.sin(198*r)+l)),cc.moveTo(t/6,new cc.Vec2(s*Math.cos(-18*r),c*Math.sin(-18*r)+l)),cc.moveTo(t/6,new cc.Vec2(s*Math.cos(126*r),c*Math.sin(126*r)+l)),cc.moveTo(t/6,new cc.Vec2(s*Math.cos(270*r),c*Math.sin(270*r)+l))],o.effectData.push(i);var g=[],m=c/3,y=s/3,v=-s/2,b=l+c/2;for(i=[],u=-90;u<=270;u+=40)i.push(cc.moveTo(10*t/360,new cc.Vec2(y*Math.cos(r*u)+v,m*Math.sin(r*u)+b)));for(g.push(i),b=l-c/2,i=[],u=-90;u<=270;u+=40)i.push(cc.moveTo(10*t/360,new cc.Vec2(y*Math.cos(r*u)+v,m*Math.sin(r*u)+b)));for(g.push(i),v=s/2,b=l+c/2,i=[],u=-90;u<=270;u+=40)i.push(cc.moveTo(10*t/360,new cc.Vec2(y*Math.cos(r*u)+v,m*Math.sin(r*u)+b)));for(g.push(i),b=l-c/2,i=[],u=-90;u<=270;u+=40)i.push(cc.moveTo(10*t/360,new cc.Vec2(y*Math.cos(r*u)+v,m*Math.sin(r*u)+b)));g.push(i),o.EffectData4.push(g),this.initLanguage(),this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this)},t.prototype.initLanguage=function(){this.tips.string=r.default.get("L526")},t.prototype.show=function(t){e.prototype.show.call(this),this.finished=t,Math.random()<o.effectData.length/(o.effectData.length+o.EffectData4.length)?this.moveEffect():this.moveEffectCircles4()},t.prototype.onClick=function(){this.stopEffect(!0)},t.prototype.moveEffect=function(){var e,t,i=this;this.isPlaying=!0;for(var r,s,c,l=1,u=o.effectData[Math.floor(Math.random()*o.effectData.length)],d=3;d>=0;d--){r=n.Game.gameMgr.stage.targetSlots[d].childrenCount-1,t=n.Game.gameMgr.stage.targetSlots[d].getPopWorldPos(null),t=this.node.convertToNodeSpaceAR(t);for(var p=r;p>=0;p--){(e=n.Game.gameMgr.stage.targetSlots[d].node.children[p]).removeFromParent(!1),e.x=t.x,e.y=t.y,this.node.insertChild(e,0),s=[cc.delayTime(l)];for(var h=0,f=u;h<f.length;h++){var g=f[h];s.push(g.clone())}c=cc.sequence(s),e.runAction(c),l+=a.default.SuccEffDelayTm}}var m=c.getDuration()+1;this.timeOut=setTimeout(function(){i.isPlaying=!1,i.finished&&i.finished(),i.toBack()},1e3*m)},t.prototype.moveEffectCircles4=function(){var e,t,i=this;this.isPlaying=!0;for(var r,s,c,l,u=1,d=o.EffectData4[Math.floor(Math.random()*o.EffectData4.length)],p=0;p<4;p++){r=d[p],s=n.Game.gameMgr.stage.targetSlots[p].childrenCount-1,t=n.Game.gameMgr.stage.targetSlots[p].getPopWorldPos(null),t=this.node.convertToNodeSpaceAR(t);for(var h=s;h>=0;h--){(e=n.Game.gameMgr.stage.targetSlots[p].node.children[h]).removeFromParent(!1),e.x=t.x,e.y=t.y,this.node.insertChild(e,0),c=[cc.delayTime(u)];for(var f=0,g=r;f<g.length;f++){var m=g[f];c.push(m.clone())}l=cc.sequence(c),e.runAction(l),u+=a.default.SuccEffDelayTm}}var y=l.getDuration()+1;this.timeOut=setTimeout(function(){i.isPlaying=!1,i.finished&&i.finished(),i.toBack()},1e3*y)},t.prototype.stopEffect=function(e){if(void 0===e&&(e=!1),this.isPlaying){for(var t in this.isPlaying=!1,clearTimeout(Number(this.timeOut)),n.Game.gameMgr.stage.allCards)n.Game.gameMgr.stage.allCards[t].node.stopAllActions(),n.Game.gameMgr.stage.allCards[t].position=new cc.Vec2(0,this.gameArea.y);e&&(this.finished&&this.finished(),this.toBack())}},t.prototype.onHide=function(){e.prototype.onHide.call(this),this.stopEffect()},t.EffectData4=[],__decorate([l(cc.Label)],t.prototype,"tips",void 0),o=__decorate([c],t)}(i.default);o.default=u,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../global/GameConfig":"GameConfig"}],SwitchButton:[function(e,t,o){"use strict";cc._RF.push(t,"29b4b8C5sBEaJ9z3S3gCW7z","SwitchButton"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../global/I18N"),i=cc._decorator,r=i.ccclass,n=i.property,s=e("../global/Emitter"),c=e("../../global/Const"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelOff=null,t.labelOn=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.target&&(this.target.anchorX=0,this.target.width=this.node.width),this.checkMark.node.anchorX=0,s.Emitter.register(c.default.eLanguageChange,this.initLanguage,this),this.initLanguage()},t.prototype.initLanguage=function(){this.labelOff.string=a.default.get("L204")||"OFF",this.labelOn.string=a.default.get("L205")||"ON"},t.prototype.start=function(){},t.prototype._updateCheckMark=function(){this.checkMark&&(this.isChecked?(this.checkMark.node.x=this.target.width-this.checkMark.node.width,this.labelOff.node.color=cc.Color.WHITE,this.labelOn.node.color=cc.Color.BLACK):(this.checkMark.node.x=0,this.labelOff.node.color=cc.Color.BLACK,this.labelOn.node.color=cc.Color.WHITE))},__decorate([n(cc.Label)],t.prototype,"labelOff",void 0),__decorate([n(cc.Label)],t.prototype,"labelOn",void 0),__decorate([r],t)}(cc.Toggle);o.default=l,cc._RF.pop()},{"../../global/Const":"Const","../global/Emitter":"Emitter","../global/I18N":"I18N"}],TabManager:[function(e,t,o){"use strict";cc._RF.push(t,"0b665PWy7tCP6yNacxx8Wdk","TabManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.TabManager=void 0;var a=e("./Table"),i=e("./TableBase"),r=e("./TableHelper"),n=function(){function e(){}return e.asyncLoad=function(){var e=this;return new Promise(function(t){e.loadTable(t)})},e.loadTable=function(e){this.mLoadEndCall=e,console.log(">>> start load table..."),this.mLoadOkCount=0,this.loadTableByClass(a.eTable.eTabPlot,"table/Plot",new i.Table(a.FieldPlot)),this.loadTableByClass(a.eTable.eTabFragment,"table/Fragment",new i.Table(a.FieldFragment)),this.loadTableByClass(a.eTable.eTabCardBg,"table/CardBg",new i.Table(a.FieldCardBg)),this.loadTableByClass(a.eTable.eTabGameBg,"table/GameBg",new i.Table(a.FieldGameBg)),this.loadTableByClass(a.eTable.eTabTask,"table/Task",new i.Table(a.FieldTask)),this.loadTableByClass(a.eTable.eTabTaskCond,"table/TaskCond",new i.Table(a.FieldTaskCond)),this.loadTableByClass(a.eTable.eTabLevel,"table/Level",new i.Table(a.FieldLevel)),this.loadTableByClass(a.eTable.eTabTitle,"table/Title",new i.Table(a.FieldTitle)),this.loadTableByClass(a.eTable.eTabCardFace,"table/CardPositive",new i.Table(a.FieldCardFace)),this.loadTableByClass(a.eTable.eTabLibConfig,"table/LibConfig",new i.Table(a.FieldLibConfig)),this.loadTableByClass(a.eTable.eTabDifficulty,"table/Difficulty",new i.Table(a.FieldDifficulty)),this.loadTableByClass(a.eTable.eTabShop,"table/Shop",new i.Table(a.FieldShop))},e.loadTableByClass=function(e,t,o){var a=this;r.TableHelper.loadTable(e,t,o,function(){a.checkTabLoad()}),++this.mLoadCount},e.checkTabLoad=function(){++this.mLoadOkCount,this.mLoadCount<=this.mLoadOkCount&&(console.log(">>> load table ok, count="+this.mLoadCount),null!=this.mLoadEndCall&&this.mLoadEndCall())},e.mLoadCount=0,e.mLoadOkCount=0,e.mLoadEndCall=null,e}();o.TabManager=n,cc._RF.pop()},{"./Table":"Table","./TableBase":"TableBase","./TableHelper":"TableHelper"}],TableBase:[function(e,t,o){"use strict";cc._RF.push(t,"bce3bDMtshEMZzy25RiFpK6","TableBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.Table=o.FieldBase=void 0;o.FieldBase=function(){};var a=function(){function e(e){this.makeType=e,this.mFilename="",this.mFields={},this.mIndexList={},this.mCount=0}return e.prototype.New=function(){return new this.makeType},e.prototype.AddElement=function(e){null!=this.mFields[e.GetKey()]&&console.error("\u8bfb\u53d6\u8868\u683c\u53ef\u80fd\u9519\u8bef, \u76f8\u540c\u7684ID="+e.GetKey()+" path="+this.mFilename,e),this.mIndexList[this.mCount]=e,this.mFields[e.GetKey()]=e,++this.mCount},e.prototype.Clear=function(){this.mFields={},this.mCount=0,this.mFilename=""},e.prototype.GetCount=function(){return this.mCount},e.prototype.GetField=function(e){return null==this.mFields[e]?(console.error("Get Table Field Error, TableName="+this.mFilename+" Id="+e),null):this.mFields[e]},e.prototype.GetFieldByIndex=function(e){return null==this.mIndexList[e]?(console.error("Get Table Field Error, TableName="+this.mFilename+" index="+e),null):this.mIndexList[e]},e.prototype.loadFile=function(e,t,o){var a=this;this.Clear(),this.mFilename=t,cc.resources.load(t,function(t,i){a.onResLoad(e,t,i,o)})},e.prototype.onResLoad=function(e,t,o,a){return t?(console.error(t),!1):(this.ParseTxt(o.text),null!=a&&a(e),!0)},e.prototype.ParseLine=function(e,t){var o=this.New();return!!o.Parse(e,t)&&(this.AddElement(o),!0)},e.prototype.ParseTxt=function(e){for(var t=e.split(/[\n]/g),o=1,a=0;a<t.length;a++){var i=t[a];if(!(a<3)){var r=i.trim();0!=r.length&&"#"!=r[0]&&(this.ParseLine(r.split(/[\t]/),o++)||console.error("Table.ParseTxt Error, line="+a))}}},e}();o.Table=a,cc._RF.pop()},{}],TableHelper:[function(e,t,o){"use strict";cc._RF.push(t,"b22decM8mZOqbGAAVokA5gD","TableHelper"),Object.defineProperty(o,"__esModule",{value:!0}),o.TableHelper=void 0;var a=function(){function e(){}return e.loadTable=function(e,t,o,a){var i=this;o.loadFile(e,t,function(){i.mTableMap[e]=o,console.log("read table Ok :"+e+"=>"+t),null!=a&&a(e,t)})},e.GetField=function(e,t){var o=this.mTableMap[e].GetField(t);return null==o&&console.error("<<< read field error, tabid="+e.toString()+" id="+t),o},e.GetFieldByKey=function(e,t,o){var a=this.mTableMap[e].GetFieldByKey(t,o);return null==a&&console.error("<<< read field error, tabid="+e.toString()+" id="+t+" group="+o),a},e.GetCount=function(e){return this.mTableMap[e].GetCount(e)},e.GetFieldByIndex=function(e,t){var o=this.mTableMap[e].GetFieldByIndex(t);return null==o&&console.error("<<< read field error, tabid="+e.toString()+" index="+t),o},e.FindAll=function(e,t){if(e<0||!t)return[];for(var o=this.GetCount(e),a=[],i=0;i<o;++i){var r=this.GetFieldByIndex(e,i);t(r)&&a.push(r)}return a},e.Find=function(e,t){if(e<0||!t)return null;for(var o=this.GetCount(e),a=0;a<o;++a){var i=this.GetFieldByIndex(e,a);if(t(i))return i}return null},e.FindLast=function(e,t){if(e<0||!t)return null;for(var o=this.GetCount(e)-1;o>=0;--o){var a=this.GetFieldByIndex(e,o);if(t(a))return a}return null},e.FindIndex=function(e,t){if(e<0||!t)return-1;for(var o=this.GetCount(e),a=0;a<o;++a)if(t(this.GetFieldByIndex(e,a)))return a;return-1},e.mTableMap={},e}();o.TableHelper=a,cc._RF.pop()},{}],Table:[function(e,t,o){"use strict";cc._RF.push(t,"3765eq5hotNnqjzCZB3/YyP","Table"),Object.defineProperty(o,"__esModule",{value:!0}),o.FieldShop=o.FieldDifficulty=o.FieldLibConfig=o.FieldCardFace=o.FieldTitle=o.FieldLevel=o.FieldTaskCond=o.FieldTask=o.FieldGameBg=o.FieldCardBg=o.FieldFragment=o.FieldPlot=o.eTable=void 0;var a=e("../../core/Table/TableBase");(function(e){e[e.eTabPlot=0]="eTabPlot",e[e.eTabFragment=1]="eTabFragment",e[e.eTabCardBg=2]="eTabCardBg",e[e.eTabGameBg=3]="eTabGameBg",e[e.eTabTask=4]="eTabTask",e[e.eTabTaskCond=5]="eTabTaskCond",e[e.eTabLevel=6]="eTabLevel",e[e.eTabTitle=7]="eTabTitle",e[e.eTabCardFace=8]="eTabCardFace",e[e.eTabLibConfig=9]="eTabLibConfig",e[e.eTabDifficulty=10]="eTabDifficulty",e[e.eTabShop=11]="eTabShop"})(o.eTable||(o.eTable={}));var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.name=e[t++],this.unlockNumber=parseInt(e[t++]),this.taskScore=parseInt(e[t++]),this.storyRes=e[t++],!0},t}(a.FieldBase);o.FieldPlot=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.name=e[t++],this.plotId=parseInt(e[t++]),this.dialogue=e[t++],this.orientation=parseInt(e[t++]),this.fragmentRes=e[t++],!0},t}(a.FieldBase);o.FieldFragment=r;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.adLock=parseInt(e[t++]),this.res=e[t++],!0},t}(a.FieldBase);o.FieldCardBg=n;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.winNum=parseInt(e[t++]),this.res=e[t++],!0},t}(a.FieldBase);o.FieldGameBg=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.name=e[t++],this.cond=e[t++],this.opreator=e[t++],this.param=e[t++],this.diff=parseInt(e[t++]),this.award=parseInt(e[t++]),this.available=parseInt(e[t++]),!0},t}(a.FieldBase);o.FieldTask=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.type=parseInt(e[t++]),this.param=parseInt(e[t++]),this.level=parseInt(e[t++]),!0},t}(a.FieldBase);o.FieldTaskCond=l;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.exp=parseInt(e[t++]),!0},t}(a.FieldBase);o.FieldLevel=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.unlockLevel=parseInt(e[t++]),this.title_m=e[t++],this.title_w=e[t++],!0},t}(a.FieldBase);o.FieldTitle=d;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.adLock=parseInt(e[t++]),this.res=e[t++],!0},t}(a.FieldBase);o.FieldCardFace=p;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.key=e[t++],this.intValue=parseInt(e[t++]),this.strValue=e[t++],!0},t}(a.FieldBase);o.FieldLibConfig=h;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.diff},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.diff=parseInt(e[t++]),this.start=parseInt(e[t++]),this.end=parseInt(e[t++]),!0},t}(a.FieldBase);o.FieldDifficulty=f;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetKey=function(){return this.id},t.prototype.GetID=function(){return this.id},t.prototype.Parse=function(e){var t=0;return this.id=parseInt(e[t++]),this.type=parseInt(e[t++]),this.payid=parseFloat(e[t++]),this.repeatable=parseInt(e[t++]),this.show=parseInt(e[t++]),this.type1=parseInt(e[t++]),this.num1=parseInt(e[t++]),this.type2=parseInt(e[t++]),this.num2=parseInt(e[t++]),this.type3=parseInt(e[t++]),this.num3=parseInt(e[t++]),this.type4=parseInt(e[t++]),this.num4=parseInt(e[t++]),this.type5=parseInt(e[t++]),this.num5=parseInt(e[t++]),this.item=e[t++],this.androidPayId=e[t++],this.iosPayId=e[t++],!0},t}(a.FieldBase);o.FieldShop=g,cc._RF.pop()},{"../../core/Table/TableBase":"TableBase"}],TaskData:[function(e,t,o){"use strict";cc._RF.push(t,"19df6wSUmlNwZID32ShYQ0Z","TaskData"),Object.defineProperty(o,"__esModule",{value:!0}),o.TaskData=o.TaskSingleData=void 0;var a=e("../core/util/DateUtils"),i=e("../task/TaskDefine"),r=function(){};o.TaskSingleData=r;var n=function(){function e(){}return e.isSameDay=function(e,t){return!!e.taskDate&&a.default.dateFormat(t)==e.taskDate},e.hasTask=function(e,t){return!(!e.tasks||0==e.tasks.length)&&e.tasks.findIndex(function(e){return e.taskId==t})>=0},e.replace=function(e,t,o){e.tasks||(e.tasks=[]);var a=e.tasks.find(function(e){return e.taskIndex==t});a||(a=new r,e.tasks.push(a)),a.taskId=o,a.taskIndex=t,a.taskProgress=null,a.taskState=i.TaskState.Progressing,a.animated=!1},e}();o.TaskData=n,cc._RF.pop()},{"../core/util/DateUtils":"DateUtils","../task/TaskDefine":"TaskDefine"}],TaskDefine:[function(e,t,o){"use strict";cc._RF.push(t,"e581adWbjtGpbw6Rslr4+YF","TaskDefine"),Object.defineProperty(o,"__esModule",{value:!0}),o.CondType=o.ActionType=o.Operator=o.TaskState=o.TaskDiff=void 0,function(e){e[e.Diff1=1]="Diff1",e[e.Diff2=2]="Diff2",e[e.Diff3=3]="Diff3"}(o.TaskDiff||(o.TaskDiff={})),function(e){e[e.Progressing=0]="Progressing",e[e.Completed=1]="Completed",e[e.Fail=2]="Fail"}(o.TaskState||(o.TaskState={})),function(e){e[e.E=0]="E",e[e.LT=1]="LT",e[e.LTE=2]="LTE",e[e.GT=3]="GT",e[e.GTE=4]="GTE"}(o.Operator||(o.Operator={})),function(e){e[e.Win=1]="Win",e[e.UseTip=2]="UseTip",e[e.UseUndo=3]="UseUndo",e[e.Daliy=4]="Daliy",e[e.Moves=5]="Moves",e[e.Time=6]="Time",e[e.Move2T=7]="Move2T",e[e.DescCN=8]="DescCN",e[e.ReDeal=9]="ReDeal",e[e.ClearCol=10]="ClearCol",e[e.GainTrophy=11]="GainTrophy",e[e.LevelUp=12]="LevelUp",e[e.ScoreAvg=13]="ScoreAvg",e[e.TimeAvg=14]="TimeAvg",e[e.MoveAvg=15]="MoveAvg",e[e.DescOrder2CN=16]="DescOrder2CN"}(o.ActionType||(o.ActionType={})),function(e){e[e.Group=0]="Group",e[e.Win=1]="Win",e[e.WinC=2]="WinC",e[e.UseTip=3]="UseTip",e[e.UseUndo=4]="UseUndo",e[e.Daliy=5]="Daliy",e[e.Moves=6]="Moves",e[e.Times=7]="Times",e[e.Move2TN=8]="Move2TN",e[e.Move2TCN=9]="Move2TCN",e[e.Move2TRCN=10]="Move2TRCN",e[e.Move2TACN=11]="Move2TACN",e[e.Move2TCRCN=12]="Move2TCRCN",e[e.DescCN=13]="DescCN",e[e.ReDeal=14]="ReDeal",e[e.ClearCol=15]="ClearCol",e[e.GainTrophy=16]="GainTrophy",e[e.LevelUp=17]="LevelUp",e[e.ScoreGtAvg=18]="ScoreGtAvg",e[e.TimeLtAvg=19]="TimeLtAvg",e[e.MoveLtAvg=20]="MoveLtAvg",e[e.CounterOrder2TN=21]="CounterOrder2TN",e[e.DescOrder2CN=22]="DescOrder2CN"}(o.CondType||(o.CondType={})),cc._RF.pop()},{}],TaskHelperWindow:[function(e,t,o){"use strict";cc._RF.push(t,"ecaaclJiFBMj6i57fa+wVO1","TaskHelperWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("./content/TaskItem"),r=e("../../global/GameConfig"),n=e("../../core/global/I18N"),s=e("../../core/util/StrUtil"),c=e("../../core/global/Emitter"),l=e("../../global/Const"),u=e("../../global/AudioMgr"),d=cc._decorator,p=d.ccclass,h=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label1=null,t.label2=null,t.label3=null,t.titleLabel=null,t.rewardLabel=null,t.rewardValue=null,t.cplbgFlag=null,t.cplFlag=null,t.item=null,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.rewardValue.string=r.default.TaskRewardExp+"",c.Emitter.register(l.default.eLanguageChange,this.initLanguage,this),this.item.setContent(0,1001,!1),this.initLanguage(),this.cplFlag.active=!1,this.cplbgFlag.active=!1,this.timeout=null},t.prototype.getRichIcon=function(){return s.default.getRichIcon("exp_icon",40)},t.prototype.initLanguage=function(){this.titleLabel.string=n.default.get("L884"),this.rewardLabel.string=n.default.get("L868"),this.label1.string=s.default.stringFormat(n.default.get("L881"),this.getRichIcon()),this.label2.string=s.default.stringFormat(n.default.get("L882"),this.getRichIcon()),this.label3.string=s.default.stringFormat(n.default.get("L883"),this.getRichIcon()),this.item.initLanguage()},t.prototype.show=function(){e.prototype.show.call(this),this.item.setContent(0,1001,!1),this.timeout=setTimeout(this.showComplete.bind(this),1400)},t.prototype.onHide=function(){e.prototype.onHide.call(this),this.clearAction()},t.prototype.showSwitch=function(){this.cplFlag.active=!1,this.cplbgFlag.active=!1,this.item.switchSetContent(0,1001,0),this.timeout=setTimeout(this.showComplete.bind(this),1400)},t.prototype.showComplete=function(){var e=this;this.item.completeAnimation(function(){e.cplbgFlag.active=!0,e.cplbgFlag.runAction(i.default.getCompleteBgAction()),e.cplFlag.active=!0,e.cplFlag.runAction(i.default.getCompleteAction()),e.timeout=setTimeout(e.showSwitch.bind(e),1400)})},t.prototype.clearAction=function(){this.item.clearAction(),this.cplbgFlag.stopAllActions(),this.cplFlag.stopAllActions(),this.cplFlag.scale=1,this.timeout&&(clearTimeout(Number(this.timeout)),this.timeout=null)},t.prototype.toBack=function(){e.prototype.toBack.call(this),u.AudioMgr.clickOK()},__decorate([h(cc.RichText)],t.prototype,"label1",void 0),__decorate([h(cc.RichText)],t.prototype,"label2",void 0),__decorate([h(cc.RichText)],t.prototype,"label3",void 0),__decorate([h(cc.Label)],t.prototype,"titleLabel",void 0),__decorate([h(cc.Label)],t.prototype,"rewardLabel",void 0),__decorate([h(cc.Label)],t.prototype,"rewardValue",void 0),__decorate([h(cc.Node)],t.prototype,"cplbgFlag",void 0),__decorate([h(cc.Node)],t.prototype,"cplFlag",void 0),__decorate([h(i.default)],t.prototype,"item",void 0),__decorate([p],t)}(a.default);o.default=f,cc._RF.pop()},{"../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/util/StrUtil":"StrUtil","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../../global/GameConfig":"GameConfig","./content/TaskItem":"TaskItem"}],TaskItem:[function(e,t,o){"use strict";cc._RF.push(t,"6a179VLLvlEd7B7MesxP6T0","TaskItem"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../core/global/I18N"),i=e("../../../core/Table/Table"),r=e("../../../core/Table/TableHelper"),n=e("../../../core/util/StrUtil"),s=e("../../../core/global/Emitter"),c=e("../../../global/Const"),l=e("../../../Game"),u=e("../../../global/GameConfig"),d=e("../LevelWindow"),p=e("../../../core/UI/DialogWarnBox"),h=e("../../../core/UI/DialogBox"),f=e("../../../global/AudioMgr"),g=e("../../../task/Task"),m=e("../../../task/TaskDefine"),y=e("../../../data/CardDefine"),v=e("../../../core/util/DateUtils"),b=e("../../UICenter"),C=cc._decorator,_=C.ccclass,T=C.property,D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.completebg=null,t.rewardLabel=null,t.playLabel=null,t.rewardIcon=null,t.taskName=null,t.processNode=null,t.resetBtnNode=null,t.playBtnNode=null,t.cplFlagNode=null,t.processValue=null,t.processBar=null,t.rewardValue=null,t.isHelper=!1,t.showProgress=!0,t.taskCount=0,t.index=0,t.taskId=0,t.completeFlag=!1,t.progress=0,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){var e=this;this.isHelper||(s.Emitter.register(c.default.eTaskProcessing,function(t){t[0]==e.taskId&&e.showProgress&&e.onProgress(t[1])},this),this.resetBtn=this.resetBtnNode.getComponent(cc.Button),this.playBtn=this.playBtnNode.getComponent(cc.Button))},t.prototype.initLanguage=function(){this.playLabel.string=a.default.get("L104");var e=[];g.default.parseType(this.field.cond,e);var t=this.field.param.split("|");t=this.formatParam(e,t),this.taskName.string=n.default.stringFormat.apply(n.default,__spreadArrays([a.default.get(this.field.name)],t)),this.changeRewardLabel()},t.prototype.formatParam=function(e,t){for(var o=[],a=0;a<e.length;a++){for(var i=t[a].split(","),r=[],n=0,s=i;n<s.length;n++){var c=s[n];r.push(Number.parseInt(c))}if(1==r.length){var l=g.default.getParam(e[a],r[0]),u=""+l;e[a]==m.CondType.TimeLtAvg?u=v.default.timeFormat(l,!1):e[a]==m.CondType.Move2TCN?u=this.getCardVauleFormat(l):e[a]==m.CondType.Move2TRCN||e[a]==m.CondType.Move2TACN?u=this.getCardValue(l):e[a]==m.CondType.Move2TCRCN&&(u=this.getCardTypeFormat(l)),o.push(u)}else e[a]==m.CondType.CounterOrder2TN||e[a]==m.CondType.DescOrder2CN?(o.push(this.getCardTypeFormat(r[0]-1)),o.push(this.getCardTypeFormat(r[1]-1)),o.push(r[2])):o=i}return o},t.prototype.getCardValue=function(e){return 1==e?"A":11==e?"J":12==e?"Q":13==e?"K":""+e},t.prototype.getCardVauleFormat=function(e){var t=y.default.getCardType(e)-1,o=y.default.getCardValue(e);return this.getCardTypeFormat(t)+this.getCardValue(o)},t.prototype.getCardTypeFormat=function(e){var t="club";return 1==e?t="heart":2==e?t="spade":3==e&&(t="block"),n.default.getRichIcon(t)},t.prototype.changeRewardLabel=function(){this.completeFlag?this.rewardLabel.string=a.default.get("L871"):this.rewardLabel.string=a.default.get("L619")+":"},t.prototype.complete=function(e){this.completebg.active=e,this.processNode.active=!e&&this.showProgress,this.resetBtnNode.active=!e,this.cplFlagNode.active=e,this.changeRewardLabel(),e?(this.taskName.node.color=o.FinishedColor,this.rewardLabel.node.color=o.FinishedColor,this.rewardValue.node.color=o.FinishedColor,this.processValue.node.color=o.FinishedColor):(this.taskName.node.color=o.NormalColor,this.rewardLabel.node.color=o.NormalColor,this.rewardValue.node.color=o.NormalColor,this.processValue.node.color=o.NormalColor)},t.prototype.enableBtn=function(e){this.playBtn.interactable=e,this.resetBtn.interactable=e},t.getCompleteBgAction=function(){return cc.spawn(cc.fadeIn(u.default.TaskItemFadeTm),cc.sequence(cc.scaleTo(u.default.TaskItemFadeTm,1.05),cc.scaleTo(u.default.TaskItemFadeTm,1)))},t.getCompleteAction=function(){var e=cc.scaleTo(u.default.TaskItemScaleTm,1.4),t=cc.scaleTo(u.default.TaskItemScaleTm,1);return cc.sequence(e,t)},t.prototype.animationReward=function(e){d.default.animate(this.rewardIcon,this.field.award,e)},t.prototype.completeAnimation=function(e){this.completeFlag=!0,this.complete(!0),this.completebg.opacity=0,this.completebg.runAction(o.getCompleteBgAction()),this.cplFlagNode.runAction(cc.sequence(o.getCompleteAction(),cc.callFunc(function(){e()}))),this.isHelper||f.AudioMgr.playSFX("task_tier"+(this.index+1)+"_check")},t.prototype.clearAction=function(){this.node.stopAllActions(),this.cplFlagNode.stopAllActions(),this.node.scale=1,this.cplFlagNode.scale=1},t.prototype.switchSetContent=function(e,t,o){var a=this;this.node.x=0;var i=cc.spawn(cc.moveTo(u.default.TaskItemSwitchTm/2,-20,this.node.y),cc.fadeOut(u.default.TaskItemSwitchTm/2)),r=cc.spawn(cc.moveTo(u.default.TaskItemSwitchTm,0,this.node.y).easing(cc.easeSineOut()),cc.fadeIn(u.default.TaskItemSwitchTm).easing(cc.easeSineOut()));this.node.runAction(cc.sequence(cc.delayTime(o),i,cc.callFunc(function(){a.node.x=80,a.setContent(e,t,!1),a.isHelper||f.AudioMgr.playSFX("task_flip")}),r))},t.prototype.setContent=function(e,t,o){this.index=e,this.taskId=t,this.progress=0,this.field=r.TableHelper.GetField(i.eTable.eTabTask,t),this.rewardValue.string=this.field.award+"",this.isHelper?this.showProgress=!1:(this.taskCount=l.Game.taskMgr.getTaskCount(t),this.showProgress=this.taskCount>0,this.taskCount>0&&this.onProgress(l.Game.taskMgr.getTaskProgress(this.taskId))),this.completeFlag=o,this.initLanguage(),this.complete(o)},t.prototype.onProgress=function(e){console.log("progress",e,this.taskCount),this.progress=e;var t=e/this.taskCount;this.processBar.progress=t,this.processValue.string=e+"/"+this.taskCount},t.prototype.onResetClick=function(){var e=this;if(!this.isHelper){var t=function(){e.enableBtn(!1),l.Game.taskMgr.switchTask(e.index+1,!0);var t=l.Game.taskMgr.getTaskByIndex(e.index+1);e.switchSetContent(e.index,t.taskId,0),setTimeout(function(){e.enableBtn(!0)},2e3*u.default.TaskItemScaleTm)};if(this.showProgress&&this.progress>0){var o=new h.DialogBoxData;o.initWith(h.eDialogButtonType.CONFIRM|h.eDialogButtonType.CANCEL,a.default.get("L869")),o.callback=function(e){e==h.eDialogButtonType.CONFIRM&&t()},p.default.showWith(o)}else t()}},t.prototype.onPlayClick=function(){if(!this.isHelper){var e=new h.DialogBoxData;e.initWith(h.eDialogButtonType.CONFIRM|h.eDialogButtonType.CANCEL,a.default.get("L870")),e.callback=function(e){e==h.eDialogButtonType.CONFIRM&&(l.Game.gameMgr.newGame(),b.UICenter.closeTask())},p.default.showWith(e)}},t.NormalColor=new cc.Color(93,93,93),t.FinishedColor=cc.Color.WHITE,__decorate([T(cc.Node)],t.prototype,"completebg",void 0),__decorate([T(cc.Label)],t.prototype,"rewardLabel",void 0),__decorate([T(cc.Label)],t.prototype,"playLabel",void 0),__decorate([T(cc.Node)],t.prototype,"rewardIcon",void 0),__decorate([T(cc.RichText)],t.prototype,"taskName",void 0),__decorate([T(cc.Node)],t.prototype,"processNode",void 0),__decorate([T(cc.Node)],t.prototype,"resetBtnNode",void 0),__decorate([T(cc.Node)],t.prototype,"playBtnNode",void 0),__decorate([T(cc.Node)],t.prototype,"cplFlagNode",void 0),__decorate([T(cc.Label)],t.prototype,"processValue",void 0),__decorate([T(cc.ProgressBar)],t.prototype,"processBar",void 0),__decorate([T(cc.Label)],t.prototype,"rewardValue",void 0),__decorate([T(cc.Boolean)],t.prototype,"isHelper",void 0),o=__decorate([_],t)}(cc.Component);o.default=D,cc._RF.pop()},{"../../../Game":"Game","../../../core/Table/Table":"Table","../../../core/Table/TableHelper":"TableHelper","../../../core/UI/DialogBox":"DialogBox","../../../core/UI/DialogWarnBox":"DialogWarnBox","../../../core/global/Emitter":"Emitter","../../../core/global/I18N":"I18N","../../../core/util/DateUtils":"DateUtils","../../../core/util/StrUtil":"StrUtil","../../../data/CardDefine":"CardDefine","../../../global/AudioMgr":"AudioMgr","../../../global/Const":"Const","../../../global/GameConfig":"GameConfig","../../../task/Task":"Task","../../../task/TaskDefine":"TaskDefine","../../UICenter":"UICenter","../LevelWindow":"LevelWindow"}],TaskManager:[function(e,t,o){"use strict";cc._RF.push(t,"2d55f4Cu4BHRbfOIrByAyJH","TaskManager"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Task"),i=e("./TaskDefine"),r=e("../core/global/Emitter"),n=e("../global/Const"),s=e("../Game"),c=e("../core/Table/TableHelper"),l=e("../core/Table/Table"),u=e("../core/util/MathUtil"),d=e("../data/TaskData"),p=e("../core/util/DateUtils"),h=e("../data/LevelData"),f=e("../global/GameConfig"),g=e("./CondFactory"),m=function(){function e(){var e=this;this.userTask=[],this.taskSwitched=!1,this.winTask=null,this.winTaskComplete=!1,this.lastTime=0,this.startCD=!1,this.WinTaskGap=5,r.Emitter.register(n.default.eTimeUpdate,function(t){e.onAction(i.ActionType.Time,t)},this),r.Emitter.register(n.default.eStepUpdate,function(t){e.onAction(i.ActionType.Moves,t)},this),r.Emitter.register(n.default.eLevelChanged,function(){e.onAction(i.ActionType.LevelUp,s.Game.userData.levelData.level)},this),r.Emitter.register(n.default.eTaskComplete,function(t){var o=e.taskData.tasks.find(function(e){return e.taskId==t});o&&(o.taskState=i.TaskState.Completed,s.Game.userData.saveTaskData())},this)}return Object.defineProperty(e.prototype,"taskData",{get:function(){return s.Game.userData.taskData},enumerable:!1,configurable:!0}),e.prototype.initTime=function(){var e=this.lastTime,t=new Date,o=new Date(t.getFullYear(),t.getMonth(),t.getDate(),24);this.lastTime=(o.getTime()-t.getTime())/1e3,this.startCD=!0,e>0&&e<this.lastTime&&this.initTask(!1)},e.prototype.update=function(e){this.startCD&&(this.lastTime-=e,r.Emitter.fire(n.default.eTaskTimeUpdate,this.lastTime),this.lastTime<=0&&(this.startCD=!1,this.initTask()))},e.prototype.initTask=function(e){void 0===e&&(e=!0);var t=new Date;if(this.taskData.taskDate&&d.TaskData.isSameDay(this.taskData,t)){this.dispatchWinTask();for(var o=0,i=this.taskData.tasks;o<i.length;o++){var s=i[o],c=new a.default(s.taskId);c.recover(s.taskProgress),c.taskState=s.taskState,c.animated=s.animated,this.userTask.push(c)}}else this.taskData.taskDate=p.default.dateFormat(t),this.taskData.animated=!1,this.taskData.winTask=0,this.dispatchWinTask(),this.dispatchTask(),this.taskSwitched=!0,r.Emitter.fire(n.default.eTaskSwitched);e&&this.initTime()},e.prototype.dispatchTask=function(){this.userTask=[],this.switchTask(i.TaskDiff.Diff1),this.switchTask(i.TaskDiff.Diff2),this.switchTask(i.TaskDiff.Diff3),s.Game.userData.saveTaskData()},e.prototype.dispatchWinTask=function(){if(this.taskData.winTask<=0)this.winTask=g.default.create(i.CondType.Win,0,i.Operator.GTE,1);else if(this.taskData.winTask<this.WinTaskGap)this.winTask=g.default.create(i.CondType.Win,0,i.Operator.GTE,this.WinTaskGap),this.winTask.recover(this.taskData.winTask);else{var e=this.taskData.winTask-this.taskData.winTask%this.WinTaskGap+this.WinTaskGap;this.winTask=g.default.create(i.CondType.Win,0,i.Operator.GTE,e),this.winTask.recover(this.taskData.winTask)}console.log("dispatchWinTask:",this.winTask.getProgress(),"/",this.winTask.getCount())},e.prototype.switchTask=function(e,t){void 0===t&&(t=!1);for(var o=c.TableHelper.FindAll(l.eTable.eTabTask,function(t){return t.diff==e&&1==t.available}),i=u.default.randomRange(0,o.length),r=o[i];d.TaskData.hasTask(this.taskData,r.id);)r=o[i=u.default.randomRange(0,o.length)];var n=this.getTaskData(e);n&&this.removeTask(n.taskId),d.TaskData.replace(this.taskData,e,r.id),this.userTask.push(new a.default(r.id)),t&&s.Game.userData.saveTaskData()},e.prototype.getTaskByIndex=function(e){var t=this.getTaskData(e);return t?this.getTask(t.taskId):null},e.prototype.getTaskData=function(e){return this.taskData.tasks?this.taskData.tasks.find(function(t){return t.taskIndex==e}):null},e.prototype.getTask=function(e){return this.userTask.find(function(t){return t.taskId==e})},e.prototype.getTaskIndex=function(e){if(!this.taskData.tasks)return-1;var t=this.taskData.tasks.find(function(t){return t.taskId==e});return t?t.taskIndex:-1},e.prototype.removeTask=function(e){var t=this.userTask.findIndex(function(t){return t.taskId==e});t>=0&&this.userTask.splice(t,1)},e.prototype.getTaskCount=function(e){var t=this.getTask(e);return t?t.processCount:-1},e.prototype.getTaskProgress=function(e){var t=this.getTask(e);return t?t.getProgress():-1},e.prototype.animatedTask=function(e){var t=s.Game.taskMgr.getTaskData(e);t.animated=!0;var o=this.getTask(t.taskId);o.animated=!0,h.LevelData.addExp(o.reward),s.Game.userData.saveTaskAndLevelData()},e.prototype.animatedAll=function(){this.taskData.animated=!0,h.LevelData.addExp(f.default.TaskRewardExp),s.Game.userData.saveTaskAndLevelData()},e.prototype.hasTaskComplete=function(){if(0==this.userTask.length)return!1;for(var e=0,t=this.userTask;e<t.length;e++){var o=t[e];if(o.isComplete()&&!o.animated)return!0}return!1},e.prototype.checkAllComplete=function(){if(0==this.userTask.length)return!1;for(var e=0,t=this.userTask;e<t.length;e++)if(!t[e].isComplete())return!1;return!0},e.prototype.onGameStart=function(){for(var e=0,t=this.userTask;e<t.length;e++)t[e].reset()},e.prototype.onAction=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];for(var a=0,i=this.userTask;a<i.length;a++){var r=i[a];r.onAction.apply(r,__spreadArrays([e],t))&&this.onNormalTaskAction(r)}this.onWinTaskAction.apply(this,__spreadArrays([e],t))},e.prototype.onNormalTaskAction=function(e){var t=this.taskData.tasks.find(function(t){return t.taskId==e.taskId});t.taskState=e.taskState,t.taskProgress=e.snapshoot(),s.Game.userData.saveTaskData()},e.prototype.onWinTaskAction=function(e){for(var t,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];e==i.ActionType.Win&&o[0]&&((t=this.winTask).onAction.apply(t,o),console.log("progressWinTask:",this.winTask.getProgress(),"/",this.winTask.getCount()),this.taskData.winTask=this.winTask.snapshoot(),this.winTask.isComplete()&&(this.winTaskComplete=!0,this.dispatchWinTask(),console.log("onWinTaskComplete:",this.taskData.winTask)),s.Game.userData.saveTaskData())},e}();o.default=m,cc._RF.pop()},{"../Game":"Game","../core/Table/Table":"Table","../core/Table/TableHelper":"TableHelper","../core/global/Emitter":"Emitter","../core/util/DateUtils":"DateUtils","../core/util/MathUtil":"MathUtil","../data/LevelData":"LevelData","../data/TaskData":"TaskData","../global/Const":"Const","../global/GameConfig":"GameConfig","./CondFactory":"CondFactory","./Task":"Task","./TaskDefine":"TaskDefine"}],TaskWindow:[function(e,t,o){"use strict";cc._RF.push(t,"125e5Rw3xlEh6e2tk7uA+Rw","TaskWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("./content/TaskItem"),r=e("../../core/global/I18N"),n=e("../../core/util/DateUtils"),s=e("../../global/GameConfig"),c=e("../../Game"),l=e("../UICenter"),u=e("./LevelWindow"),d=e("../../data/LevelData"),p=e("../../global/AudioMgr"),h=e("../../core/global/Emitter"),f=e("../../global/Const"),g=cc._decorator,m=g.ccclass,y=g.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.comfrimLabel=null,t.rewardLabel=null,t.timeLabel=null,t.rewardValue=null,t.rewardIcon=null,t.closeBtn=null,t.confirmBtn=null,t.helperBtn=null,t.cplbgFlags=[],t.cplFlags=[],t.items=[],t.timeLeftStr=null,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.rewardValue.string=s.default.TaskRewardExp+"",this.setItem()},t.prototype.show=function(t){e.prototype.show.call(this),this.onFinished=t,this.enableButtons(!1),this.initLanguage(),h.Emitter.register(f.default.eTaskTimeUpdate,this.onTimeLeft,this),h.Emitter.register(f.default.eTaskSwitched,this.onTaskSwitched,this)},t.prototype.onShow=function(){var t=this;e.prototype.onShow.call(this),c.Game.taskMgr.hasTaskComplete()&&l.UICenter.openLevelWindow(d.LevelData.copy(c.Game.userData.levelData),!1),this.animateSwitchTask(function(){t.animateComplete(0,function(){t.animateCompleteAll(function(){t.enableButtons(!0),l.UICenter.closeLevelWindow()})})})},t.prototype.onHide=function(){e.prototype.onHide.call(this),this.onFinished&&this.onFinished(),h.Emitter.remove(f.default.eTaskTimeUpdate,this.onTimeLeft,this),h.Emitter.remove(f.default.eTaskSwitched,this.onTaskSwitched,this)},t.prototype.toBack=function(){e.prototype.toBack.call(this),p.AudioMgr.clickOK()},t.prototype.onTaskSwitched=function(){this.animateSwitchTask(function(){})},t.prototype.onTimeLeft=function(e){this.timeLabel.string=this.timeLeftStr+n.default.timeFormat(e,!1,1)},t.prototype.animateSwitchTask=function(e){var t=this;if(c.Game.taskMgr.taskSwitched){for(var o=0;o<3;o++){var a=c.Game.taskMgr.getTaskData(o+1);this.items[o].switchSetContent(o,a.taskId,o*s.default.TaskItemScaleTm*2)}setTimeout(function(){t.enableButtons(!0),c.Game.taskMgr.taskSwitched=!1,h.Emitter.fire(f.default.eOnCheckRedPoint),e()},6e3*s.default.TaskItemScaleTm)}else e()},t.prototype.animateComplete=function(e,t){var o=this;if(e>=this.items.length)t();else{var a=c.Game.taskMgr.getTaskByIndex(e+1);a&&a.isComplete()&&!a.animated?(c.Game.taskMgr.animatedTask(e+1),this.items[e].completeAnimation(function(){o.cplbgFlags[e].active=!0,o.cplbgFlags[e].runAction(i.default.getCompleteBgAction()),o.cplFlags[e].active=!0,o.cplFlags[e].runAction(cc.sequence(i.default.getCompleteAction(),cc.callFunc(function(){o.items[e].animationReward(function(){o.animateComplete(++e,t)})})))})):this.animateComplete(++e,t)}},t.prototype.animateCompleteAll=function(e){var t=this;if(c.Game.taskMgr.checkAllComplete()&&!c.Game.taskMgr.taskData.animated){c.Game.taskMgr.animatedAll();for(var o=0,a=0;a<this.cplFlags.length;a++)o=a*s.default.TaskItemScaleTm*2,this.cplFlags[a].runAction(cc.sequence(cc.delayTime(o),i.default.getCompleteAction()));setTimeout(function(){t.refreshAllCompleteUI(),u.default.animate(t.rewardIcon,s.default.TaskRewardExp,e)},1e3*o),p.AudioMgr.playSFX("task_complete_all")}else e()},t.prototype.setItem=function(){for(var e=0;e<this.items.length;e++){var t=c.Game.taskMgr.getTaskByIndex(e+1);if(t){var o=t.isComplete()&&t.animated;this.items[e].setContent(e,t.taskId,o),this.cplFlags[e].active=o,this.cplbgFlags[e].active=o}}},t.prototype.enableButtons=function(e){if(!e||!this.onFinished)for(var t=0,o=this.items;t<o.length;t++)o[t].enableBtn(e);this.closeBtn.interactable=e,this.confirmBtn.interactable=e,this.helperBtn.interactable=e},t.prototype.initLanguage=function(){this.titleLabel.string=r.default.get("L867"),this.comfrimLabel.string=r.default.get("L3"),this.timeLeftStr=r.default.get("L561")+" ",this.refreshAllCompleteUI();for(var e=0,t=this.items;e<t.length;e++)t[e].initLanguage()},t.prototype.refreshAllCompleteUI=function(){var e=c.Game.taskMgr.checkAllComplete()&&c.Game.taskMgr.taskData.animated;this.rewardLabel.string=e?r.default.get("L872"):r.default.get("L868")},t.prototype.onHelperClick=function(){c.Game.uiMgr.showWindow("prefab/TaskHelperWindow")},__decorate([y(cc.Label)],t.prototype,"titleLabel",void 0),__decorate([y(cc.Label)],t.prototype,"comfrimLabel",void 0),__decorate([y(cc.Label)],t.prototype,"rewardLabel",void 0),__decorate([y(cc.Label)],t.prototype,"timeLabel",void 0),__decorate([y(cc.Label)],t.prototype,"rewardValue",void 0),__decorate([y(cc.Node)],t.prototype,"rewardIcon",void 0),__decorate([y(cc.Button)],t.prototype,"closeBtn",void 0),__decorate([y(cc.Button)],t.prototype,"confirmBtn",void 0),__decorate([y(cc.Button)],t.prototype,"helperBtn",void 0),__decorate([y(cc.Node)],t.prototype,"cplbgFlags",void 0),__decorate([y(cc.Node)],t.prototype,"cplFlags",void 0),__decorate([y(i.default)],t.prototype,"items",void 0),__decorate([m],t)}(a.default);o.default=v,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/util/DateUtils":"DateUtils","../../data/LevelData":"LevelData","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../../global/GameConfig":"GameConfig","../UICenter":"UICenter","./LevelWindow":"LevelWindow","./content/TaskItem":"TaskItem"}],Task:[function(e,t,o){"use strict";cc._RF.push(t,"bb610khR9JBSqG3waQjFFRc","Task"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./TaskDefine"),i=e("../core/Table/TableHelper"),r=e("../core/Table/Table"),n=e("../core/util/StrUtil"),s=e("./CondGroup"),c=e("./CondFactory"),l=e("../core/global/Emitter"),u=e("../global/Const"),d=e("../Game"),p=function(){function e(e){this.taskId=e,this.groups=[],this.progressType=-1,this.processCount=-1,this.animated=!1,this.initTask()}return e.prototype.recover=function(e){if(e)for(var t=0,o=this.groups;t<o.length;t++)o[t].recover(e)},e.prototype.snapshoot=function(){for(var e=null,t=0,o=this.groups;t<o.length;t++){var a=o[t];if(e){var i=a.snapshoot();for(var r in i)e[r]=i[r]}else e=a.snapshoot()}return e},e.prototype.isComplete=function(){return this.taskState==a.TaskState.Completed},e.prototype.initTask=function(){var t=i.TableHelper.GetField(r.eTable.eTabTask,this.taskId),o=[],n=[],l=e.parseType(t.cond,o),u=t.opreator.split("|"),d=t.param.split("|"),p=-1;this.reward=t.award;for(var h=0;h<o.length;h++){for(var f=i.TableHelper.GetField(r.eTable.eTabTaskCond,o[h]),g=Number.parseInt(u[h]),m=d[h].split(","),y=[],v=0;v<m.length;v++)y.push(Number.parseInt(m[v]));1==y.length&&(y[0]=e.getParam(o[h],y[0]));var b=c.default.create.apply(c.default,__spreadArrays([o[h],f.param,g],y));b.isPre=this.getCondPre(l,o[h]);var C=this.getGroupIndex(l,o[h]);n[C]||(n[C]=[]),n[C].push(b),f.level>0&&f.level>p&&(p=f.level,this.progressType=f.id,this.processCount=b.getCount())}for(var _=0,T=n;_<T.length;_++){var D=T[_],S=new s.default(D);this.groups.push(S)}this.taskState=a.TaskState.Progressing,console.log("task:",t)},e.prototype.getCondPre=function(e,t){for(var o=0;o<e.length;o++)for(var a=0,i=e[o];a<i.length;a++){var r=i[a];if(r[0]==t)return r[1]}return!1},e.prototype.getGroupIndex=function(e,t){for(var o=0;o<e.length;o++)for(var a=0,i=e[o];a<i.length;a++)if(i[a][0]==t)return o;return-1},e.parseNumber=function(e,t){if(n.default.isNullOrEmpty(e))return-1;var o=Number.parseInt(e);return t.push(o),o},e.prototype.checkComplete=function(){for(var e=!0,t=0,o=this.groups;t<o.length;t++){var i=o[t];if(i.state==a.TaskState.Fail){e=!1,this.taskState=a.TaskState.Fail,console.log("taskgroup fail:",this.taskId);break}e=e&&i.state==a.TaskState.Completed}e&&(this.taskState=a.TaskState.Completed,l.Emitter.fire(u.default.eTaskComplete,this.taskId),console.log("taskgroup complete:",this.taskId))},e.parseType=function(e,t){for(var o=[],a=0,i=e.split("|");a<i.length;a++){for(var r=i[a],n=r.search(">")>=0,s=r.split(n?">":"<"),c=[],l=0;l<s.length;l++){var u=this.parseNumber(s[l],t);n?c.push([u,l>0]):c.push([u,l<s.length-1])}o.push(c)}return o},e.getParam=function(e,t){return e==a.CondType.TimeLtAvg?d.Game.userData.getTimeAvg():e==a.CondType.MoveLtAvg?d.Game.userData.getStepAvg():e==a.CondType.ScoreGtAvg?d.Game.userData.getSocreAvg():t},e.prototype.reset=function(){if(this.taskState!=a.TaskState.Completed){for(var e=0,t=this.groups;e<t.length;e++)t[e].reset();this.taskState=a.TaskState.Progressing,l.Emitter.fire(u.default.eTaskProcessing,[this.taskId,this.getProgress()])}},e.prototype.getProgress=function(){for(var e=0,t=this.groups;e<t.length;e++){var o=t[e];if(o.hasType(this.progressType))return o.getProgress(this.progressType)}return-1},e.prototype.onAction=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(this.taskState==a.TaskState.Completed||this.taskState==a.TaskState.Fail)return!1;for(var i=!1,r=0,n=!1,s=!0,c=0,d=this.groups;c<d.length;c++){var p=d[c];if(s){var h=p.onAction.apply(p,__spreadArrays([e],t));if(s=s&&p.isCompleted(),h.length>0){n=!0;for(var f=0,g=h;f<g.length;f++){var m=g[f];if(m.type==this.progressType){i=!0,r=m.getProgress();break}}p.isCompleted()&&p.count>1&&this.groups.length>1&&l.Emitter.fire(u.default.eTaskHalfComplete,this.taskId)}}}return i&&(l.Emitter.fire(u.default.eTaskProcessing,[this.taskId,r]),console.log("taskgroup processing:",a.ActionType[e],t)),this.checkComplete(),n},e}();o.default=p,cc._RF.pop()},{"../Game":"Game","../core/Table/Table":"Table","../core/Table/TableHelper":"TableHelper","../core/global/Emitter":"Emitter","../core/util/StrUtil":"StrUtil","../global/Const":"Const","./CondFactory":"CondFactory","./CondGroup":"CondGroup","./TaskDefine":"TaskDefine"}],Textfield:[function(e,t,o){"use strict";cc._RF.push(t,"b1e0dUNfUpPUKx87EA6jB3k","Textfield"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,r=a.property,n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._bold=!1,t._italic=!1,t._underline=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"refresh",{get:function(){return this.rander(),!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bold",{get:function(){return this._bold},set:function(e){this._bold=e,this.label._isBold=e,this.rander()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"italic",{get:function(){return this._italic},set:function(e){this._italic=e,this.label._isItalic=e,this.rander()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underline",{get:function(){return this._underline},set:function(e){this._underline=e,this.label._isUnderline=e,this.rander()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._label||(this._label=this.node.getComponent(cc.Label)),this._label},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.rander()},t.prototype.rander=function(){this.label._isBold=this._bold,this.label._isItalic=this._italic,this.label._isUnderline=this._underline,this.label._updateRenderData(!0)},t.prototype.start=function(){},__decorate([r({visible:!1})],t.prototype,"refresh",null),__decorate([r({visible:!1})],t.prototype,"_bold",void 0),__decorate([r({tooltip:"\u52a0\u7c97"})],t.prototype,"bold",null),__decorate([r({visible:!1})],t.prototype,"_italic",void 0),__decorate([r({tooltip:"\u659c\u4f53"})],t.prototype,"italic",null),__decorate([r({visible:!1})],t.prototype,"_underline",void 0),__decorate([r({tooltip:"\u4e0b\u5212\u7ebf"})],t.prototype,"underline",null),__decorate([i],t)}(cc.Component);o.default=n,cc._RF.pop()},{}],TipsComp:[function(e,t,o){"use strict";cc._RF.push(t,"39a88cxnvVE+ILSrqhL0i6u","TipsComp"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./CardView"),i=e("../global/AudioMgr"),r=e("../core/util/VecUtil"),n=e("../core/util/MathUtil"),s=e("../data/CardDefine"),c=function(){function e(e,t){this.mFrame=null,this.mCurQueue=null,this.mCurQueueIndex=0,this.mAutoTimer=0,this.mCopyNode=null,this.mTimeout=null,this.mStage=null,this.mStage=e,this.mFrame=t}return Object.defineProperty(e.prototype,"flopSlot",{get:function(){return this.mStage.flopSlot},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dealerSlot",{get:function(){return this.mStage.dealerSlot},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameSlots",{get:function(){return this.mStage.gameSlots},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetSlots",{get:function(){return this.mStage.targetSlots},enumerable:!1,configurable:!0}),e.prototype.startAuto=function(){this.mAutoTimer=0},e.prototype.autoAction=function(){i.AudioMgr.hint(),this.use()},e.prototype.use=function(){return this.startAuto(),this.mCurQueue&&this.mCurQueue.length>0?(this.mCurQueueIndex=this.mCurQueueIndex>=this.mCurQueue.length?0:this.mCurQueueIndex,this.cardTipByIndex(this.mCurQueueIndex++),!0):(this.mCurQueue=this.getCanMoveQueue(),this.mCurQueue.length>0&&(this.cardTipByIndex(this.mCurQueueIndex++),!0))},e.prototype.clear=function(){this.mCurQueueIndex=0,this.mCurQueue=null,this.clearCurTipCopy(),this.startAuto()},e.prototype.getCanMoveQueue=function(){for(var e,t,o=[],a=0,i=this.gameSlots;a<i.length;a++){var r=i[a];for(e=r.peekCard();e&&e.isOpen;)(t=this.mStage.findTargetSlot(e))&&this.checkValidMove(r,t,e)&&!this.isInvalidUndoOp(e.cardData)&&o.push([r,t,e]),e=e.last}if(e=this.flopSlot.peekCard(),(t=this.mStage.findTargetSlot(e))&&o.push([this.flopSlot,t,e]),this.dealerSlot.isEmpty()&&this.flopSlot.isEmpty()||(this.dealerSlot.isEmpty()?this.checkFlopAreaHasMove()&&o.push([this.dealerSlot,this.dealerSlot]):(this.checkDealerAreaHasMove()||this.checkFlopAreaHasMove())&&o.push([this.dealerSlot,this.flopSlot,this.dealerSlot.peekCard()])),0==o.length)for(var n=0,s=this.targetSlots;n<s.length;n++){var c=s[n];(e=c.peekCard())&&(t=this.mStage.findTargetSlot(e,!0,!1))&&this.checkValidMoveOfTargetCard(e,t)&&o.push([c,t,e])}return o},e.prototype.checkDealerAreaHasMove=function(){for(var e=this.dealerSlot.peekCard();e;){if(this.mStage.findTargetSlot(e,!0,!0,!0))return!0;e=e.last}return!1},e.prototype.checkFlopAreaHasMove=function(){var e=this.flopSlot.peekCard();for(e&&(e=e.last);e;){if(this.mStage.findTargetSlot(e,!0,!0,!0))return!0;e=e.last}return!1},e.prototype.checkValidMove=function(e,t,o){return!(this.mStage.isGameSlot(e)&&this.mStage.isGameSlot(t)&&(t.isEmpty()&&o.cardData.isK()&&!o.hasLast()||o.hasLast()&&o.last.isOpen&&!this.mStage.findTargetSlot(o.last,!1,!0,!0)))},e.prototype.checkValidMoveOfTargetCard=function(e,t){for(var o=0,a=this.gameSlots;o<a.length;o++){var i=a[o];if(i!=t)for(var r=i.peekCard();r&&r.isOpen;){if(e.checkLink(r)){if(!r.hasLast())return!0;if(!r.last.isOpen)return!0}r=r.last}}return!1},e.prototype.isInvalidUndoOp=function(e){return s.default.cardData2Key(e)==this.mStage.lastUndoCardKey},e.prototype.clearCurTipCopy=function(){this.mFrame.active&&(this.mFrame.active=!1,this.mFrame.removeFromParent(!1),this.mStage.addToOverLayer(this.mFrame)),this.mCopyNode&&(this.mCopyNode.destroy(),this.mCopyNode=null),this.mTimeout&&(clearTimeout(Number(this.mTimeout)),this.mTimeout=null)},e.prototype.copyCard=function(t){for(var o=null,i=e.CardTipSize.height,r=null;t;){var n=cc.instantiate(t.node);if(n.removeComponent(a.default),r?(n.parent=r,n.position=r.convertToNodeSpaceAR(t.worldPos)):(o=n,this.mStage.addToOverLayer(n),n.position=this.mStage.getOverLayerNodePos(t.worldPos)),!t.next){if(this.mFrame.active=!0,this.mFrame.parent=n,o.childrenCount>0){var s=o.convertToNodeSpaceAR(n.convertToWorldSpaceAR(cc.Vec3.ZERO));i-=s.y,this.mFrame.x=0,this.mFrame.y=-s.y/2}else this.mFrame.position=cc.Vec3.ZERO;this.mFrame.height=i}r=n,t=t.next}return o},e.prototype.cardTipByIndex=function(t){var o=this;if(!(t<0||t>=this.mCurQueue.length)){this.clearCurTipCopy();var a=this.mCurQueue[t],i=a[0],r=a[1],n=a[2];if(r==this.dealerSlot&&i==this.dealerSlot)this.mFrame.active=!0,this.mFrame.position=this.mStage.getOverLayerNodePos(i.getPopWorldPos()),this.mFrame.height=e.CardTipSize.height,this.mFrame.runAction(cc.fadeIn(.3)),this.mTimeout=setTimeout(function(){o.fadeOut(o.mFrame)},1e3);else{this.mCopyNode=this.copyCard(n);var s=this.mStage.getOverLayerNodePos(r.getPopWorldPos(n)),c=this.getDuration(this.mCopyNode.position,s);this.mFrame.runAction(cc.fadeIn(.3)),this.mCopyNode.runAction(cc.sequence(cc.delayTime(.3),cc.moveTo(c,s).easing(cc.easeSineOut()),cc.callFunc(function(){return o.fadeOut(o.mCopyNode)})))}}},e.prototype.getDuration=function(e,t){var o=r.default.distance(e,t)/cc.winSize.width;return n.default.clamp(o,.4,.7)},e.prototype.fadeOut=function(e){var t=this;e.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){t.mTimeout=setTimeout(function(){t.clearCurTipCopy()},300)})))},e.CardTipSize=new cc.Size(123,172),e}();o.default=c,cc._RF.pop()},{"../core/util/MathUtil":"MathUtil","../core/util/VecUtil":"VecUtil","../data/CardDefine":"CardDefine","../global/AudioMgr":"AudioMgr","./CardView":"CardView"}],TitleItem:[function(e,t,o){"use strict";cc._RF.push(t,"1643dHvxTVFWbcb/CDnmQMU","TitleItem"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../core/global/I18N"),i=e("../../../core/util/StrUtil"),r=cc._decorator,n=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.gou=null,t.level=null,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(t){e.onClick(e.field,e),t.stopPropagation()},this)},t.prototype.select=function(){this.node.color=o.SelectColor,this.gou.active=!0},t.prototype.unselect=function(){this.node.color=o.UnselectColor,this.gou.active=!1},t.prototype.setContent=function(e,t,o){this.field=e,e.unlockLevel<=t?(this.label.string=0==o?a.default.get(e.title_m):a.default.get(e.title_w),this.level.string=""):(this.label.string="????",this.level.string=i.default.stringFormat(a.default.get("L873"),e.unlockLevel))},t.SelectColor=new cc.Color(142,187,245),t.UnselectColor=cc.Color.WHITE,__decorate([s(cc.Label)],t.prototype,"label",void 0),__decorate([s(cc.Node)],t.prototype,"gou",void 0),__decorate([s(cc.Label)],t.prototype,"level",void 0),o=__decorate([n],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../../core/global/I18N":"I18N","../../../core/util/StrUtil":"StrUtil"}],TitleWindow:[function(e,t,o){"use strict";cc._RF.push(t,"bce7cdRCUtG/bArOopI+t2Y","TitleWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("../../core/Table/TableHelper"),r=e("../../core/Table/Table"),n=e("../../Game"),s=e("./content/TitleItem"),c=e("../../core/global/Emitter"),l=e("../../global/Const"),u=e("../../global/AudioMgr"),d=cc._decorator,p=d.ccclass,h=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.itemPre=null,t.toggleQ=null,t.toggleK=null,t.scrollview=null,t.pool=null,t.itemNodes=[],t.selectItem=null,t}return __extends(t,e),t.prototype.init=function(){var t=this;e.prototype.init.call(this),this.node.on(cc.Node.EventType.TOUCH_END,function(){t.toBack()}),this.pool=new cc.NodePool("titleItem")},t.prototype.show=function(t){e.prototype.show.call(this),this.changed=!1,this.onFinish=t,this.initToggle(),this.initData()},t.prototype.initToggle=function(){this.initToggleing=!0,0==n.Game.userData.levelData.sex?this.toggleK.check():this.toggleQ.check(),this.initToggleing=!1},t.prototype.initData=function(e){var t,o=this;void 0===e&&(e=!0);for(var a=0,c=this.itemNodes;a<c.length;a++){var l=c[a];this.pool.put(l)}this.itemNodes=[];for(var u=n.Game.userData.levelData,d=i.TableHelper.FindIndex(r.eTable.eTabTitle,function(e){return e.unlockLevel>u.level}),p=0;p<=d;p++){var h=i.TableHelper.GetFieldByIndex(r.eTable.eTabTitle,p);(t=this.pool.get())||(t=cc.instantiate(this.itemPre)),this.itemNodes.push(t),this.content.addChild(t);var f=t.getComponent(s.default);f.onClick||(f.onClick=this.onItemClick.bind(this)),f.setContent(h,u.level,u.sex),h.id==u.title?(this.selectItem=f,f.select()):f.unselect()}e&&setTimeout(function(){o.scrollview.node.height<o.content.height&&o.scrollview.scrollToBottom()},60)},t.prototype.onToggleQClick=function(){this.initToggleing||(n.Game.userData.levelData.sex=1,this.initData(!1),this.changed=!0,c.Emitter.fire(l.default.eTitleChanged),u.AudioMgr.playSFX("sex_choice"))},t.prototype.onToggleKClick=function(){this.initToggleing||(n.Game.userData.levelData.sex=0,this.initData(!1),this.changed=!0,c.Emitter.fire(l.default.eTitleChanged),u.AudioMgr.playSFX("sex_choice"))},t.prototype.onItemClick=function(e,t){e.unlockLevel>n.Game.userData.levelData.level||(e.id!=n.Game.userData.levelData.title?(this.selectItem&&this.selectItem.unselect(),this.selectItem=t,t.select(),n.Game.userData.levelData.title=e.id,this.changed=!0,c.Emitter.fire(l.default.eTitleChanged),u.AudioMgr.playSFX("button_click")):this.toBack())},t.prototype.toBack=function(){e.prototype.toBack.call(this),this.changed&&n.Game.userData.saveLevelData(),this.onFinish&&this.onFinish()},__decorate([h(cc.Node)],t.prototype,"content",void 0),__decorate([h(cc.Prefab)],t.prototype,"itemPre",void 0),__decorate([h(cc.Toggle)],t.prototype,"toggleQ",void 0),__decorate([h(cc.Toggle)],t.prototype,"toggleK",void 0),__decorate([h(cc.ScrollView)],t.prototype,"scrollview",void 0),__decorate([p],t)}(a.default);o.default=f,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","./content/TitleItem":"TitleItem"}],ToastFull:[function(e,t,o){"use strict";cc._RF.push(t,"882f6o/roZOD7JhRIucNYoQ","ToastFull"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Game"),i=e("./WWindow"),r=e("../../core/util/ResUtil"),n=cc._decorator,s=n.ccclass,c=n.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}var o;return __extends(t,e),o=t,t.instance=function(e){var t=this;null==this._Instance?r.ResUtil.loadRes("ToastFull",r.eResType.UIPrefab,function(i){var r=cc.instantiate(i);r.parent=a.Game.uiMgr.topUI,t._Instance=r.getComponent(o),e(t._Instance)}):e(this._Instance)},t.showWith=function(e,t){void 0===t&&(t=0),this.instance(function(o){o.node.setSiblingIndex(9999),o.show(e,t)})},t.hideWith=function(){this._Instance&&this._Instance.toBack()},t.prototype.show=function(t){e.prototype.show.call(this),this.label.string=t,this.delayHide()},t.prototype.delayHide=function(){var e=this;this.timeout&&clearTimeout(Number(this.timeout)),this.timeout=setTimeout(function(){e.timeout=null,e.toBack()},2e3)},t._Instance=null,__decorate([c(cc.RichText)],t.prototype,"label",void 0),o=__decorate([s],t)}(i.default);o.default=l,cc._RF.pop()},{"../../Game":"Game","../../core/util/ResUtil":"ResUtil","./WWindow":"WWindow"}],Toast:[function(e,t,o){"use strict";cc._RF.push(t,"843b7T3hWZKLoeZu31pdXyT","Toast"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Game"),i=e("./WWindow"),r=e("../../core/util/ResUtil"),n=cc._decorator,s=n.ccclass,c=n.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgSprite=null,t.label=null,t.bgSpriteFrames=[],t.labelColor=null,t}var o;return __extends(t,e),o=t,t.getViewNode=function(){return this._Instance?this._Instance.bgSprite.node:null},t.instance=function(e){var t=this;null==this._Instance?r.ResUtil.loadRes("Toast",r.eResType.UIPrefab,function(i){var r=cc.instantiate(i);r.parent=a.Game.uiMgr.topUI,t._Instance=r.getComponent(o),e(t._Instance)}):e(this._Instance)},t.showWith=function(e,t){void 0===t&&(t=0),this.instance(function(o){o.node.setSiblingIndex(9999),o.show(e,t)})},t.hideWith=function(){this._Instance&&this._Instance.toBack()},t.prototype.show=function(t,o){e.prototype.show.call(this),this.label.string=t,o<0||o>=this.bgSpriteFrames.length?(this.bgSprite.spriteFrame=null,this.label.node.color=this.labelColor):this.bgSprite.node.height=this.label.node.height*this.label.node.scaleX+14},t.prototype.delayHide=function(){var e=this;this.timeout&&clearTimeout(Number(this.timeout)),this.timeout=setTimeout(function(){e.timeout=null,e.toBack()},300)},t._Instance=null,__decorate([c(cc.Sprite)],t.prototype,"bgSprite",void 0),__decorate([c(cc.RichText)],t.prototype,"label",void 0),__decorate([c(cc.SpriteFrame)],t.prototype,"bgSpriteFrames",void 0),__decorate([c(cc.Color)],t.prototype,"labelColor",void 0),o=__decorate([s],t)}(i.default);o.default=l,cc._RF.pop()},{"../../Game":"Game","../../core/util/ResUtil":"ResUtil","./WWindow":"WWindow"}],Toggler:[function(e,t,o){"use strict";cc._RF.push(t,"5bee7CoSCdKfL8BaQZtTtFM","Toggler"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Condition"),i=e("../TaskDefine"),r=function(e){function t(t,o){var a=e.call(this,t)||this;return a.op=o,a.tog=!1,a}return __extends(t,e),t.prototype.recover=function(t){e.prototype.recover.call(this,t),this.tog=t},t.prototype.snapshoot=function(){return this.tog},t.prototype.isFail=function(){switch(this.op){case i.Operator.LT:return this.tog;case i.Operator.GT:return!this.tog;default:return!1}},t.prototype.isComplete=function(){return this.tog},t.prototype.reset=function(){this.tog=!1},t.prototype.getProgress=function(){return 0},t.prototype.onAction=function(e){this.tog=e,console.log("type:",i.CondType[this.type],"value:",this.tog)},t}(a.Condition);o.default=r,cc._RF.pop()},{"../Condition":"Condition","../TaskDefine":"TaskDefine"}],TrophyMonthItem:[function(e,t,o){"use strict";cc._RF.push(t,"40138proFBGmIfehEP6lL1w","TrophyMonthItem"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../core/global/I18N"),i=e("../../../data/DaliyHelper"),r=cc._decorator,n=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.info=null,t.TrophyIcon=null,t.TrophyRes=[],t.monthBg=null,t.MonthRes=[],t.border=null,t._monthData=null,t._seletced=!1,t._parentNode=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"monthData",{get:function(){return this._monthData},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.itemClick,this)},t.prototype.setData=function(e,t){t&&(this._parentNode=t),this._monthData=e,this.border.active=!1,this._seletced=!1,this.title.string=a.default.get("L"+(e.monthIndex+309)),this.info.node.active=!0;var o=i.default.getTrophy(e.curYear,e.monthIndex);e.curMonth==e.monthIndex?(this.info.string=a.default.get("L343"),this.itemClick()):e.curMonth-1==e.monthIndex?this.info.node.active=!1:this.info.string=o>0?a.default.get("L"+(393+o)):a.default.get("L380"),this.TrophyIcon.spriteFrame=this.TrophyRes[o],this.monthBg.spriteFrame=this.MonthRes[e.monthIndex]},t.prototype.itemClick=function(){(this._parentNode||this.node.parent).emit("itemClick",this._monthData,this)},Object.defineProperty(t.prototype,"seletced",{set:function(e){this._seletced!=e&&(this._seletced=e,this.border.active=e)},enumerable:!1,configurable:!0}),t.prototype.refresh=function(){this.setData(this._monthData)},__decorate([s(cc.Label)],t.prototype,"title",void 0),__decorate([s(cc.Label)],t.prototype,"info",void 0),__decorate([s(cc.Sprite)],t.prototype,"TrophyIcon",void 0),__decorate([s(cc.SpriteFrame)],t.prototype,"TrophyRes",void 0),__decorate([s(cc.Sprite)],t.prototype,"monthBg",void 0),__decorate([s(cc.SpriteFrame)],t.prototype,"MonthRes",void 0),__decorate([s(cc.Node)],t.prototype,"border",void 0),__decorate([n],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../../../core/global/I18N":"I18N","../../../data/DaliyHelper":"DaliyHelper"}],TrophyMonthWindow:[function(e,t,o){"use strict";cc._RF.push(t,"14981PQAjJAQZo22Sviy3Mu","TrophyMonthWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/global/I18N"),i=e("../../core/UI/WWindow"),r=e("../../global/AudioMgr"),n=e("../../core/global/Emitter"),s=e("./content/TrophyMonthItem"),c=e("../../core/util/StrUtil"),l=e("../../Game"),u=e("../UICenter"),d=e("../../data/DaliyHelper"),p=cc._decorator,h=p.ccclass,f=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.TrophyIcon=null,t.TrophyRes=[],t.monthLabel=null,t.info=null,t.TrophyContiner=null,t.monthPre=null,t.confirmLabel=null,t.daliyLabel=null,t.currentDate=new Date,t.items=[],t.selectedItem=null,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),n.Emitter.register("updateDaliyInfo",this.updateDaliyInfo,this),n.Emitter.register("languageChange",this.initLanguage,this),this.node.on("itemClick",this.itemClickHandler,this),this.initLanguage(),this.initUI()},t.prototype.initLanguage=function(){this.title.string=a.default.get("L342"),this.confirmLabel.string=a.default.get("L3"),this.daliyLabel.string=a.default.get("L397"),this.updateDaliyInfo(),this.selectedItem&&this.initBottom(this.selectedItem.monthData)},t.prototype.updateDaliyInfo=function(){for(var e=0,t=this.items;e<t.length;e++)t[e].refresh()},t.prototype.show=function(){e.prototype.show.call(this);var t=new Date;this.currentDate.getDate()!=t.getDate()&&(this.currentDate=t,this.items=[],this.TrophyContiner.removeAllChildren(),this.initUI())},t.prototype.initUI=function(){for(var e=this.currentDate.getMonth(),t=this.currentDate.getFullYear(),o=e;o>=0;o--){var a={monthIndex:o,curMonth:e,curYear:t};this.addItem(a)}},t.prototype.initBottom=function(e){this.monthLabel.string=a.default.get("L"+(e.monthIndex+309));var t=d.default.getTrophy(e.curYear,e.monthIndex),o=d.default.getDayCount(e.curYear,e.monthIndex),i=l.Game.userData.FBData.trophy[e.monthIndex];this.TrophyIcon.spriteFrame=this.TrophyRes[t];var r=c.default.stringFormat(a.default.get("L344"),i,o);if((e.monthIndex==e.curMonth||e.monthIndex==e.curMonth-1)&&t<3){var n=d.default.getNextTrophyCount(t,i,o),s=d.default.getNextTrophy(t);r+="\n"+c.default.stringFormat(a.default.get("L"+(347+s)),n)}else r+=t>0?"\n"+a.default.get("L"+(393+t)):"\n"+a.default.get("L380");this.info.string=r},t.prototype.addItem=function(e){var t=cc.instantiate(this.monthPre);this.TrophyContiner.addChild(t);var o=t.getComponent(s.default);o.setData(e,this.node),this.items.push(o)},t.prototype.itemClickHandler=function(e,t){this.selectedItem!=t&&(this.selectedItem&&(this.selectedItem.seletced=!1),this.selectedItem=t,this.selectedItem.seletced=!0,this.initBottom(e))},t.prototype.toBack=function(){e.prototype.toBack.call(this),r.AudioMgr.clickOK()},t.prototype.onTipClick=function(){r.AudioMgr.clickOK(),u.UICenter.openHelperWindow(0)},__decorate([f(cc.Label)],t.prototype,"title",void 0),__decorate([f(cc.Sprite)],t.prototype,"TrophyIcon",void 0),__decorate([f(cc.SpriteFrame)],t.prototype,"TrophyRes",void 0),__decorate([f(cc.Label)],t.prototype,"monthLabel",void 0),__decorate([f(cc.Label)],t.prototype,"info",void 0),__decorate([f(cc.Node)],t.prototype,"TrophyContiner",void 0),__decorate([f(cc.Prefab)],t.prototype,"monthPre",void 0),__decorate([f(cc.Label)],t.prototype,"confirmLabel",void 0),__decorate([f(cc.Label)],t.prototype,"daliyLabel",void 0),__decorate([h],t)}(i.default);o.default=g,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/util/StrUtil":"StrUtil","../../data/DaliyHelper":"DaliyHelper","../../global/AudioMgr":"AudioMgr","../UICenter":"UICenter","./content/TrophyMonthItem":"TrophyMonthItem"}],UICenter:[function(e,t,o){"use strict";cc._RF.push(t,"1f2c8lwb/VFnojf5dWECLdg","UICenter"),Object.defineProperty(o,"__esModule",{value:!0}),o.UICenter=o.UIDefine=void 0;var a=e("../Game"),i=function(){function e(){}return e.prototype.openSettingWin=function(){a.Game.uiMgr.showWindow("prefab/SettingWindow")},e.prototype.openTask=function(){a.Game.uiMgr.showWindow("prefab/TaskWindow",null)},e.prototype.closeTask=function(){a.Game.uiMgr.hideWindow("prefab/TaskWindow")},e.prototype.openTaskParam=function(e){a.Game.uiMgr.showWindow("prefab/TaskWindow",e)},e.prototype.openLevelWindow=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!0),a.Game.uiMgr.showWindow("prefab/LevelWindow",e,t)},e.prototype.closeLevelWindow=function(){a.Game.uiMgr.hideWindow("prefab/LevelWindow")},e.prototype.openLevelUpWindow=function(e,t){a.Game.uiMgr.showWindow("prefab/LevelUpWindow",e,t)},e.prototype.openWinTaskWindow=function(e){a.Game.uiMgr.showWindow("prefab/WinTaskWindow",e)},e.prototype.openYouWinWindow=function(e){a.Game.uiMgr.showWindow("prefab/YouWinWindow",e)},e.prototype.openReportWin=function(){a.Game.uiMgr.showWindow("prefab/ReportWindow")},e.prototype.openCardBGWin=function(){a.Game.uiMgr.showWindow("prefab/CardBGWindow")},e.prototype.openCardFaceWin=function(){a.Game.uiMgr.showWindow("prefab/CardFaceWindow")},e.prototype.openGameBGWin=function(){a.Game.uiMgr.showWindow("prefab/GameBGWindow")},e.prototype.openGameLanguageWin=function(){a.Game.uiMgr.showWindow("prefab/LanguageWindow")},e.prototype.openGameWin=function(){a.Game.uiMgr.showWindow("prefab/GameWindow")},e.prototype.openWinnerWin=function(){a.Game.uiMgr.showWindow("prefab/WinnerWindow")},e.prototype.openStoryWindow=function(){a.Game.uiMgr.showWindow("prefab/StoryWindow")},e.prototype.openHelperWindow=function(e){a.Game.uiMgr.showWindow("prefab/HelperWindow",e)},e.prototype.openHelper2Window=function(e){a.Game.uiMgr.showWindow("prefab/Helper2Window",0,e)},e.prototype.openPuzzleWindow=function(e,t){a.Game.uiMgr.showWindow("prefab/PuzzleWindow",e,t)},e.prototype.openGuideWindow=function(e,t){a.Game.uiMgr.showWindow("prefab/GuideWindow",e,t)},e.prototype.openGoldWindow=function(e){a.Game.uiMgr.showWindow("prefab/GoldWindow",e)},e.prototype.closeGoldWindow=function(){a.Game.uiMgr.hideWindow("prefab/GoldWindow")},e.prototype.activeAutoSuccWindow=function(){return a.Game.uiMgr.getWindowActive("prefab/AutoCompleteWindow")},e.prototype.openAutoSuccWindow=function(e){a.Game.uiMgr.showWindow("prefab/AutoCompleteWindow",e)},e.prototype.closeAutoSuccWindow=function(){a.Game.uiMgr.hideWindow("prefab/AutoCompleteWindow")},e.prototype.openFailWindow=function(){a.Game.uiMgr.showWindow("prefab/FailWindow")},e.prototype.openMagicWindow=function(e){e<=0||a.Game.uiMgr.showWindow("prefab/MagicWindow",e)},e.prototype.openMagicAdWindow=function(){a.Game.uiMgr.showWindow("prefab/MagicAdWindow")},e.prototype.openDaliyWin=function(e){void 0===e&&(e=-1),a.Game.uiMgr.showWindow("prefab/DailyWindow",e)},e.prototype.openTrophyMonth=function(){a.Game.uiMgr.showWindow("prefab/TrophyWondow")},e.prototype.openSuccEffect=function(e){a.Game.uiMgr.showWindow("prefab/SuccEffectWindow",e)},e.prototype.hideSuccEffect=function(){a.Game.uiMgr.hideWindow("prefab/SuccEffectWindow")},e.prototype.openCelebrateEffect=function(e){a.Game.uiMgr.showWindow("prefab/CelebrateEffectWindow",e)},e.prototype.openMessageBox=function(e,t){a.Game.uiMgr.showWindow("prefab/MessageBox",e,t)},e.prototype.openDailyHelpWindow=function(){a.Game.uiMgr.showWindow("prefab/DailyHelpWindow")},e.prototype.openNewBGWindow=function(e){a.Game.uiMgr.showWindow("prefab/NewBGWindow",e)},e.prototype.openRemoveAdFailWindow=function(){a.Game.uiMgr.showWindow("prefab/RemoveAdFailWindow")},e.prototype.openRemoveAdWindow=function(){a.Game.uiMgr.showWindow("prefab/RemoveAdWindow")},e.prototype.openShuffleWindow=function(){a.Game.uiMgr.showWindow("prefab/ShuffleWindow")},e.instance=new e,e}();o.UIDefine=i,o.UICenter=i.instance,cc._RF.pop()},{"../Game":"Game"}],UIManager:[function(e,t,o){"use strict";cc._RF.push(t,"ec7127YPWVIDZqYcpU+zgTi","UIManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIManager=o.SiblingIndexType=void 0;var a,i=e("../../global/AudioMgr"),r=e("../global/I18N"),n=e("../global/PEDictionary"),s=e("./WWindow");(function(e){e[e.Normal=1]="Normal",e[e.High=2]="High"})(a=o.SiblingIndexType||(o.SiblingIndexType={}));var c=function(){function e(){this._normalUI=null,this._topUI=null,this.mIgnoreDefaultAudio="ignoreDefaultAudio",this.mAllWindows=new n.PEDictionary(!0),this.mPreLoadRes=new n.PEDictionary(!0)}return Object.defineProperty(e.prototype,"preLoadRes",{get:function(){return this.mPreLoadRes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normlaUI",{get:function(){return null==this._normalUI&&(this._normalUI=cc.find(e.DefalutUINormal)),this._normalUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topUI",{get:function(){return null==this._topUI&&(this._topUI=cc.find(e.DefaultUITop)),this._topUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeCount",{get:function(){if(0==this.mAllWindows.values.length)return 0;for(var e=0,t=0,o=this.mAllWindows.values;t<o.length;t++)o[t].activeInHierarchy&&e++;return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coverBannerCount",{get:function(){if(0==this.mAllWindows.values.length)return 0;for(var e=0,t=0,o=this.mAllWindows.values;t<o.length;t++){var a=o[t];a.activeInHierarchy&&a.coverBanner&&e++}return e},enumerable:!1,configurable:!0}),e.prototype.showWindow=function(e){for(var t=this,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];if(e){var i=e instanceof cc.Prefab?e.name:e,r=e instanceof cc.Prefab?e:null;this.mAllWindows.containsKey(i)||e instanceof cc.Prefab?this.showWindowImmite.apply(this,__spreadArrays([i,r],o)):this.preLoadRes.containsKey(i)?this.showWindowImmite.apply(this,__spreadArrays([i,this.preLoadRes[i]],o)):cc.loader.loadRes(i,cc.Prefab,function(e,a){null==e?t.showWindowImmite.apply(t,__spreadArrays([i,a],o)):console.log("prefab load error! "+e)})}},e.prototype.showWindowImmite=function(e,t){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];if(this.mAllWindows.containsKey(e))(i=this.getWindow(e)).node.setSiblingIndex(9999),i.show.apply(i,o);else{var i,r=cc.instantiate(t);if(null==r)return void console.log("prefab is not found! path="+e);if(null==(i=r.getComponent(s.default)))return void console.log("WWindow is not found! path="+e);this.setWindowParent(i),r.setPosition(cc.Vec2.ZERO),this.initUIClickAudio(r),this.mAllWindows.add(e,i),i.path=e,i.show.apply(i,o)}},e.prototype.setWindowParent=function(e){e.siblingIndexType==a.High?e.node.parent=this.topUI:e.node.parent=this.normlaUI},e.prototype.hideWindow=function(e){var t=this.getWindow(e);null!=t&&t.activeInHierarchy&&t.hide()},e.prototype.hideWindows=function(e){for(var t=0,o=this.mAllWindows.values;t<o.length;t++){var a=o[t];e&&e==a.path||a.hide()}},e.prototype.cleanCurSceneWindow=function(){for(var e=0,t=this.mAllWindows.values;e<t.length;e++)t[e].node.destroy();this.mAllWindows.clear()},e.prototype.getWindow=function(e){return this.mAllWindows.tryGetValue(e)},e.prototype.getWindowActive=function(e){var t=this.getWindow(e);return null!=t&&t.activeInHierarchy},e.prototype.setIgnoreDefaultAudio=function(e){e&&(e[this.mIgnoreDefaultAudio]=!0)},e.prototype.initUIClickAudio=function(e){if(e){var t=e.getComponentsInChildren(cc.Button);if(t)for(var o=0,a=t;o<a.length;o++){var i=a[o];i[this.mIgnoreDefaultAudio]||i.node.on(cc.Node.EventType.TOUCH_END,this.commonClick,this)}if(t=e.getComponentsInChildren(cc.Toggle))for(var r=0,n=t;r<n.length;r++){var s=n[r];s[this.mIgnoreDefaultAudio]||s.node.on(cc.Node.EventType.TOUCH_END,this.commonClick,this)}}},e.prototype.fixFontResultion=function(e){if(e){var t=e.getComponentsInChildren(cc.Label),o=r.default.getFont();if(t)for(var a=0,i=t;a<i.length;a++)(l=i[a]).enableBold=!1,l.fontSize=2*l.fontSize,l.node.scale=.5*l.node.scaleX,l.node.width=2*l.node.width,l.node.height=2*l.node.height,l.lineHeight=2*l.lineHeight,l.font=o;var n=e.getComponentsInChildren(cc.RichText);if(n)for(var s=0,c=n;s<c.length;s++){var l;(l=c[s]).node.scale=.5*l.node.scaleX,l.fontSize=2*l.fontSize,l.maxWidth=2*l.maxWidth,l.node.height=2*l.node.height,l.lineHeight=2*l.lineHeight,l.font=o}}},e.prototype.switchFont=function(e){if(e){var t=e.getComponentsInChildren(cc.Label),o=r.default.getFont();if(t)for(var a=0,i=t;a<i.length;a++)i[a].font=o;var n=e.getComponentsInChildren(cc.RichText);if(n)for(var s=0,c=n;s<c.length;s++)c[s].font=o}},e.prototype.commonClick=function(){i.AudioMgr.buttonClick()},e.DefalutUINormal="Canvas/UIRoot/UINormal",e.DefaultUITop="Canvas/UIRoot/UITop",e}();o.UIManager=c,cc._RF.pop()},{"../../global/AudioMgr":"AudioMgr","../global/I18N":"I18N","../global/PEDictionary":"PEDictionary","./WWindow":"WWindow"}],UIRootFit:[function(e,t,o){"use strict";cc._RF.push(t,"e98c3bpkPpIjK4IPTIe1ZvS","UIRootFit"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,r=a.property,n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fitTop=!0,t.fitButton=!1,t.scaleRoot=!1,t.scaleFactor=1,t}return __extends(t,e),t.prototype.onLoad=function(){if(cc.sys.os===cc.sys.OS_IOS){var e=cc.sys.getSafeAreaRect(),t=this.getComponent(cc.Widget),o=.4*(cc.winSize.height-e.height);this.fitTop&&(t.top=o),this.fitButton&&(t.bottom=o)}if(cc.sys.os===cc.sys.OS_ANDROID){e=cc.sys.getSafeAreaRect();var a=cc.winSize;e.height!=a.height&&(t=this.getComponent(cc.Widget),this.fitTop&&(t.top=61))}if(this.scaleRoot){var i=cc.view.getDesignResolutionSize(),r=cc.view.getCanvasSize(),n=i.height/i.width,s=r.height/r.width;s<n&&(this.scaleFactor=s/n,this.node.scale=this.scaleFactor)}},__decorate([r],t.prototype,"fitTop",void 0),__decorate([r],t.prototype,"fitButton",void 0),__decorate([r],t.prototype,"scaleRoot",void 0),__decorate([i],t)}(cc.Component);o.default=n,cc._RF.pop()},{}],UndoComp:[function(e,t,o){"use strict";cc._RF.push(t,"2b4f4nOQjBFo5nRtYBEW7gc","UndoComp"),Object.defineProperty(o,"__esModule",{value:!0}),o.UndoData=void 0;var a=e("../core/global/Emitter"),i=e("../global/Const"),r=function(e,t,o){for(var a,i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];this.dest=null,this.target=null,this.card=null,this.moveType=null,this.destPopOpen=!1,this.moveType=e,this.dest=t,this.target=o,this.card=i,this.destPopOpen=null===(a=t.peekCard())||void 0===a?void 0:a.isOpen};o.UndoData=r;var n=function(){function e(){this.mUndoDatas=null,this.mUndoDatas=[]}return e.prototype.push=function(e,t,o){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];this.mUndoDatas.push(new(r.bind.apply(r,__spreadArrays([void 0,e,t,o],n)))),a.Emitter.fire(i.default.eUndoCountChanged,this.mUndoDatas.length)},e.prototype.use=function(){var e;if(0==this.mUndoDatas.length)return!1;var t=this.mUndoDatas.pop();return(e=t.dest).onUseUndo.apply(e,__spreadArrays([t.moveType,t.target,t.destPopOpen],t.card)),a.Emitter.fire(i.default.eUndoCountChanged,this.mUndoDatas.length),!0},e.prototype.reset=function(){this.mUndoDatas=[]},e}();o.default=n,cc._RF.pop()},{"../core/global/Emitter":"Emitter","../global/Const":"Const"}],UserData:[function(e,t,o){"use strict";cc._RF.push(t,"627edIKcddBMJ2exxDIs+Be","UserData"),Object.defineProperty(o,"__esModule",{value:!0}),o.ShopData=o.UserSts=o.MagicData=o.GoldData=o.StoryData=o.StoryChapterData=void 0;var a=e("../global/GameConfig"),i=e("../core/util/DateUtils"),r=e("../global/AudioMgr"),n=e("../sdk/LogEvent"),s=e("../core/global/Emitter"),c=e("../global/Const"),l=e("./TaskData"),u=e("./LevelData"),d=e("./CardLibData"),p=e("../sdk/StsLogEvent");o.StoryChapterData=function(){this.unlock=!1,this.plotsId=0,this.puzzles=[]};var h=function(){this.score=0,this.plots=[]};o.StoryData=h;var f=function(){this.gold=0,this.buyBg=[],this.buyCard=[],this.buyCardFace=[]};o.GoldData=f;var g=function(){this.magicOpen=!0,this.magicCount=0,this.shuffleOpen=!0,this.shuffleCount=0};o.MagicData=g;var m=function(){this.logTime=0,this.time=0,this.inCount=0,this.rdCount=0,this.streakWin=0};o.UserSts=m;var y=function(){this.removeAds=0,this.buyIds=[]};o.ShopData=y;var v=function(){function e(){this.defaultFBData={l:"en_US",k:[!0,!0],online:"",login:[0,0,0,0,0],actionDrop:!0,actionClick:!0,flopShowThree:!0,flopThree:!1,rightLayout:!1,autoComplete:!1,autoTip:!0,gameBG:"default",cardBG:"default",gameData:null,report:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],report3:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],lastMonth:[],currentMonth:[],trophyYear:0,trophy:[0,0,0,0,0,0,0,0,0,0,0,0],storyData:new h,guide:[],goldData:new f,magicData:new g,levelData:new u.LevelData,taskData:new l.TaskData,cardLibData:new d.CardLibData,notice:!0,cardFace:"default",trophyTotal:0,userSts:new m,preCardId:0,subFrom:0,shopData:new y},this._language="en_US",this.userType="unknown",this.userLoginInfo=["","",0,0],this.otherDayLogin=!1,this.loginPrizeMagic=0,this.firstLogin=!1,this.cacheSaveObj={},this._score=0,this._time=0,this._step=0,this._actionDrop=!0,this._actionClick=!0,this._flopShowThree=!0,this._flopThree=!1,this._rightLayout=!0,this._autoComplete=!1,this._autoTip=!0,this._cardBG="default",this._gameBG="default",this._cardFace="default"}return e.prototype.initData=function(e,t){this.mainCallBack=e,this.mainObj=t;var o=[];for(var i in this.defaultFBData)o.push(i);a.default.SDK.getData(o,this.initGameData,this)},e.prototype.initGameData=function(e){var t=new Date,o=t.getTime();if(this.otherDayLogin=!1,this.loginPrizeMagic=0,this.firstLogin=!1,null==e[c.default.kTrophy]){(e=JSON.parse(JSON.stringify(this.defaultFBData))).login=[new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),o,o,1,1<<29],this.userLoginInfo=[i.default.dateFormat(t,!0),i.default.timeFormat(e.login[1]-e.login[0],!0,1),1,1<<29];var s=new g;s.magicCount=2,s.shuffleCount=2,s.magicOpen=!0,e.magicData=s,a.default.SDK.setData(e),this.FBData=e,this._language=e.l,this.userType="new",this.otherDayLogin=!0,this.loginPrizeMagic=3,this.firstLogin=!0,n.default.login()}else{if(this.userType="old",e.k||(e.k=[!0,!0],a.default.SDK.setData({k:e.k})),r.AudioMgr.musicLock=e.k[0],r.AudioMgr.effectLock=e.k[1],e.login){var h=e.login,v=new Date(h[2]);if(i.default.dateFormat(t)!=i.default.dateFormat(v)){var b=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();b=29-(b=(b-h[0])/864e5),h[2]=o,h[3]++,b>=0&&b<29&&(h[4]=h[4]|1<<b),a.default.SDK.setData({login:h}),this.userLoginInfo=[i.default.dateFormat(new Date(e.login[1]),!0),i.default.timeFormat(e.login[1]-e.login[0],!0,1),e.login[3],e.login[4]],this.otherDayLogin=!0,this.loginPrizeMagic=1,n.default.login()}o-v.getTime()>=864e5*d.LibConfig.resetGradeDef&&e[c.default.kCardLibData]&&d.CardLibData.reset(e[c.default.kCardLibData])}else e.login=[new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),o,o,1,1<<29],a.default.SDK.setData({login:e.login}),this.userLoginInfo=[i.default.dateFormat(new Date(e.login[1]),!0),i.default.timeFormat(e.login[1]-e.login[0],!0,1),e.login[3],e.login[4]],this.otherDayLogin=!0,this.loginPrizeMagic=1,n.default.login();this.userLoginInfo=[i.default.dateFormat(new Date(e.login[1]),!0),i.default.timeFormat(e.login[1]-e.login[0],!0,1),e.login[3],e.login[4]],this.FBData=e,this._language=e.l}this.FBData[c.default.kTrophyYear]!=t.getFullYear()&&(this.updateData(c.default.kTrophyYear,t.getFullYear()),this.FBData[c.default.kTrophy]=[0,0,0,0,0,0,0,0,0,0,0,0],this.FBData[c.default.kLastMonth]=[],this.FBData[c.default.kCurrentMonth]=[]),this._actionDrop=e.actionDrop,this._actionClick=e.actionClick,this._flopShowThree=e.flopShowThree,this._flopThree=e.flopThree,this._rightLayout=e.rightLayout,this._autoComplete=e.autoComplete,this._autoTip=e.autoTip,this._gameBG=e.gameBG,this._cardBG=e.cardBG,this._cardFace=e.cardFace,a.default.DEBUG&&console.log(this.FBData),this.mainCallBack.apply(this.mainObj),this.mainCallBack=null,this.mainObj=null,e[c.default.kGoldData]||(e[c.default.kGoldData]=new f),e[c.default.kMagicData]||(e[c.default.kMagicData]=new g),this.magicData.shuffleOpen||(this.magicData.shuffleCount=2,this.magicData.shuffleOpen=!0),e[c.default.kLevelData]||(e[c.default.kLevelData]=new u.LevelData),e[c.default.kTaskData]||(e[c.default.kTaskData]=new l.TaskData),e[c.default.kCardLibData]||(e[c.default.kCardLibData]=new d.CardLibData),e[c.default.kUserSts]||(e[c.default.kUserSts]=new m);var C=this.cardLibData;C.startP5Count||(C.startP5Count=0),e[c.default.kPreCardId]||(e[c.default.kPreCardId]=0),e[c.default.kSubFrom]||(e[c.default.kSubFrom]=0),e[c.default.kShopData]||(e[c.default.kShopData]=new y),p.default.onInitUser()},e.prototype.GameDataLoaded=function(){},e.prototype.onOtherDayLogin=function(e){this.magicCount+=this.loginPrizeMagic,e&&e()},e.prototype.saveReport=function(e,t,o){var a;void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===o&&(o=!1);var r=o?"report3":"report";if(a=this.FBData[r],e){a[0]++,t||a[2]++,0==a[3]?(a[3]=this.time,a[4]=this.time):(a[3]=Math.min(a[3],this.time),a[4]=Math.max(a[4],this.time)),0==a[5]?(a[5]=this.step,a[6]=this.step):(a[5]=Math.min(a[5],this.step),a[6]=Math.max(a[6],this.step)),a[7]=Math.max(a[7],this.score),a[8]++,a[9]=Math.max(a[8],a[9]),a[10]+=this.time,a[11]+=this.step,a[12]+=this.score;var n=i.default.getSameDayZeroTimeStamp();n==a[14]?a[13]=Math.max(a[13],this.score):a[13]=this.score,a[14]=n}else a[1]++,a[8]=0;this.updateData(r,a);var s=this.userSts;e?s.streakWin++:s.streakWin=0,this.saveUserSts()},e.prototype.clearReportData=function(){var e="report";this.updateData(e,this.defaultFBData[e].slice()),this.updateData(e,this.defaultFBData.report3.slice()),this.userSts.streakWin=0,this.saveUserSts()},e.prototype.getReport=function(){return this.FBData[this.flopThree?"report3":"report"]},e.prototype.getSuccCount=function(){return this.FBData.report3[0]+this.FBData.report[0]},e.prototype.getTimeAvg=function(){var e=this.getReport();return e[10]&&0!=e[10]?Math.floor(e[10]/e[0]):Math.floor((e[4]-e[3])/2)},e.prototype.getStepAvg=function(){var e=this.getReport();return e[11]&&0!=e[11]?Math.floor(e[11]/e[0]):Math.floor((e[6]-e[5])/2)},e.prototype.getSocreAvg=function(){var e=this.getReport();return e[12]&&0!=e[12]?Math.floor(e[12]/e[0]):e[7]},e.prototype.getTodayBestScore=function(){return this.getReport()[13]},e.prototype.getBestScore=function(){return this.getReport()[7]},e.prototype.getTotal=function(){var e=this.FBData.report,t=this.FBData.report3;return e[0]+e[1]+t[0]+t[1]},e.prototype.updateDaliyInfo=function(e,t,o){var a=new Date,i=this.FBData[e?c.default.kCurrentMonth:c.default.kLastMonth],r=e&&t==a.getDate()?2:1;i[t-1]=r;for(var n=0,l=0;l<i.length;l++)i[l]>0&&n++;this.FBData[c.default.kTrophy][e?a.getMonth():a.getMonth()-1]=n,o||(this.FBData[c.default.kTrophyTotal]=this.FBData[c.default.kTrophyTotal]+1),this.updateObjData({currentMonth:this.FBData[c.default.kCurrentMonth],lastMonth:this.FBData[c.default.kLastMonth],trophy:this.FBData[c.default.kTrophy],trophyTotal:this.FBData[c.default.kTrophyTotal]}),s.Emitter.fire(c.default.eUpdateDaliyInfo,e)},Object.defineProperty(e.prototype,"trophyTotal",{get:function(){return this.FBData[c.default.kTrophyTotal]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},set:function(e){this._score=e,s.Emitter.fire(c.default.eScoreUpdate,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this._time},set:function(e){e<0&&(e=0),this._time=e,s.Emitter.fire(c.default.eTimeUpdate,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(e){this._step=e,s.Emitter.fire(c.default.eStepUpdate,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actionDrop",{get:function(){return this._actionDrop},set:function(e){this._actionDrop=e,this.updateData("actionDrop",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actionClick",{get:function(){return this._actionClick},set:function(e){this._actionClick=e,this.updateData("actionClick",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flopShowThree",{get:function(){return this._flopShowThree},set:function(e){this._flopShowThree!=e&&(this._flopShowThree=e,s.Emitter.fire(c.default.eChangeThreeShow,e),this.updateData("flopShowThree",e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flopThree",{get:function(){return this._flopThree},set:function(e){this._flopThree!=e&&(this._flopThree=e,this.updateData("flopThree",e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightLayout",{get:function(){return this._rightLayout},set:function(e){this._rightLayout!=e&&(this._rightLayout=e,s.Emitter.fire(c.default.eChangeLayout,e),this.updateData("rightLayout",e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoComplete",{get:function(){return this._autoComplete},set:function(e){this._autoComplete!=e&&(this._autoComplete=e,s.Emitter.fire(c.default.eChangeAutoComplete,e),this.updateData("autoComplete",e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoTip",{get:function(){return this._autoTip},set:function(e){this._autoTip!=e&&(this._autoTip=e,this.updateData("autoTip",e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cardBG",{get:function(){return this._cardBG},set:function(e){this._cardBG!=e&&(this._cardBG=e,this.updateData("cardBG",e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameBG",{get:function(){return this._gameBG},set:function(e){this._gameBG!=e&&(this._gameBG=e,this.updateData("gameBG",e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cardFace",{get:function(){return this._cardFace},set:function(e){this._cardFace!=e&&(this._cardFace=e,this.updateData("cardFace",e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this._language},set:function(e){this._language!=e&&(this._language=e,this.updateData("l",e))},enumerable:!1,configurable:!0}),e.prototype.updateData=function(e,t){this.FBData[e]=t,this.cacheSaveObj[e]=t},e.prototype.updateObjData=function(e){for(var t in e)this.FBData[t]=e[t],this.cacheSaveObj[t]=e[t]},e.prototype.saveData=function(){a.default.SDK.setData(this.cacheSaveObj);var e="";for(var t in this.cacheSaveObj)e+=t+",";console.log("saveData",e,this.cacheSaveObj),this.cacheSaveObj={}},e.prototype.clearUserData=function(){a.default.SDK.setData(this.defaultFBData)},Object.defineProperty(e.prototype,"storyData",{get:function(){return this.FBData[c.default.kStoryData]},set:function(e){this.updateData(c.default.kStoryData,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"guideData",{get:function(){return this.FBData[c.default.kGuide]},set:function(e){this.updateData(c.default.kGuide,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"goldData",{get:function(){return this.FBData[c.default.kGoldData]},set:function(e){this.updateData(c.default.kGoldData,e),s.Emitter.fire(c.default.eGoldDataChanged,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"magicData",{get:function(){return this.FBData[c.default.kMagicData]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"magicCount",{get:function(){return this.magicData.magicCount},set:function(e){this.magicData.magicCount=e,this.updateData(c.default.kMagicData,this.magicData),s.Emitter.fire(c.default.eMagicCountChanged,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"magicOpen",{get:function(){return this.magicData.magicOpen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shuffleCount",{get:function(){return this.magicData.shuffleCount},set:function(e){this.magicData.shuffleCount=e,this.updateData(c.default.kMagicData,this.magicData),s.Emitter.fire(c.default.eShuffleCountChanged,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levelData",{get:function(){return this.FBData[c.default.kLevelData]},enumerable:!1,configurable:!0}),e.prototype.saveLevelData=function(){this.updateData(c.default.kLevelData,this.levelData)},Object.defineProperty(e.prototype,"taskData",{get:function(){return this.FBData[c.default.kTaskData]},enumerable:!1,configurable:!0}),e.prototype.saveTaskData=function(){this.updateData(c.default.kTaskData,this.taskData)},e.prototype.saveTaskAndLevelData=function(){var e={};e[c.default.kLevelData]=this.levelData,e[c.default.kTaskData]=this.taskData,this.updateObjData(e)},Object.defineProperty(e.prototype,"cardLibData",{get:function(){return this.FBData[c.default.kCardLibData]},enumerable:!1,configurable:!0}),e.prototype.saveCardLibData=function(){this.updateData(c.default.kCardLibData,this.cardLibData)},Object.defineProperty(e.prototype,"notice",{get:function(){return this.FBData[c.default.kNotice]},set:function(e){this.updateData(c.default.kNotice,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userSts",{get:function(){return this.FBData[c.default.kUserSts]},enumerable:!1,configurable:!0}),e.prototype.saveUserSts=function(){this.updateData(c.default.kUserSts,this.userSts)},e.prototype.plusSuccCount=function(){var e,t=this.flopThree?"report3":"report";(e=this.FBData[t])[0]+=1,this.updateData(t,e)},Object.defineProperty(e.prototype,"preCardId",{get:function(){return this.FBData[c.default.kPreCardId]},set:function(e){this.updateData(c.default.kPreCardId,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subFrom",{get:function(){return this.FBData[c.default.kSubFrom]},set:function(e){this.updateData(c.default.kSubFrom,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shopData",{get:function(){return this.FBData[c.default.kShopData]},set:function(e){this.updateData(c.default.kShopData,e)},enumerable:!1,configurable:!0}),e}();o.default=v,cc._RF.pop()},{"../core/global/Emitter":"Emitter","../core/util/DateUtils":"DateUtils","../global/AudioMgr":"AudioMgr","../global/Const":"Const","../global/GameConfig":"GameConfig","../sdk/LogEvent":"LogEvent","../sdk/StsLogEvent":"StsLogEvent","./CardLibData":"CardLibData","./LevelData":"LevelData","./TaskData":"TaskData"}],VecUtil:[function(e,t,o){"use strict";cc._RF.push(t,"841cfJYynBGwa2WnmHERrhz","VecUtil"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function e(){}return e.center=function(e,t){return e&&t?new cc.Vec2((e.x+t.x)/2,(e.y+t.y)/2):(console.error("center p1 or p2 undefined! p1="+e+", p2="+t),cc.Vec2.ZERO)},e.distance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.getMaxDistanceToCorner=function(e){for(var t=new cc.Size(cc.winSize.width/2,cc.winSize.height/2),o=0,a=0;a<4;a++){var i=a<2?1:-1,r=1==a||2==a?1:-1,n=new cc.Vec2(t.width*i,t.height*r),s=e.sub(n).mag();s>o&&(o=s)}return o},e}();o.default=a,cc._RF.pop()},{}],WNode:[function(e,t,o){"use strict";cc._RF.push(t,"b4c6c33AFRNUI0BJ3I02X4h","WNode"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,r=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._start=!1,t._position=cc.Vec3.ZERO,t}return __extends(t,e),Object.defineProperty(t.prototype,"activeInHierarchy",{get:function(){return this.node.active&&this.node.activeInHierarchy},enumerable:!1,configurable:!0}),t.prototype.init=function(){this._start=!0,this._position=this.node.position},Object.defineProperty(t.prototype,"isStart",{get:function(){return this._start},enumerable:!1,configurable:!0}),t.prototype.show=function(){this.setActive(!0)},t.prototype.hide=function(){this.setActive(!1)},t.prototype.setActive=function(e){this.isStart||this.init(),this.node.active!=e&&(this.node.active=e)},t.prototype.setActiveForPosition=function(e){this.isStart||this.init(),e?this.node.setPosition(this._position):this.node.setPosition(Number.MAX_VALUE,Number.MAX_VALUE)},__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],WWindow:[function(e,t,o){"use strict";cc._RF.push(t,"16e9byYMmpHWoFlV6/xzFOb","WWindow"),Object.defineProperty(o,"__esModule",{value:!0}),o.SiblingIndexType=void 0;var a,i=e("./WNode"),r=e("../global/Emitter"),n=e("../../Game"),s=e("../../global/Const"),c=e("../../global/AudioMgr"),l=cc._decorator,u=l.ccclass,d=l.property;(function(e){e[e.Normal=1]="Normal",e[e.High=2]="High"})(a=o.SiblingIndexType||(o.SiblingIndexType={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animation=null,t.showClip=null,t.hideClip=null,t.stopEventing=!0,t.siblingIndexType=a.Normal,t.clickToback=!1,t.coverBanner=!1,t.pauseGame=!0,t.path=null,t.showing=!1,t.hideing=!1,t._ToForceWindow=null,t._NoAnimation=!1,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){var e=this;n.Game.uiMgr.fixFontResultion(this.node),r.Emitter.register(s.default.eLanguageChange,function(){return n.Game.uiMgr.switchFont(e.node)},this)},t.prototype.init=function(){var t=this;e.prototype.init.call(this),this.clickToback&&this.node.on(cc.Node.EventType.TOUCH_END,function(){c.AudioMgr.buttonClick(),t.toBack()},this)},t.prototype.getPlaying=function(){return this.showing},t.prototype.show=function(){for(var t=this,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(!this.showing){if(this.hideing=!1,e.prototype.show.call(this),this.stopEventing&&this.stopEventOn(),a&&a.length>1&&a[1]?this._NoAnimation=a[1]:this._NoAnimation=!1,null==this.animation&&(this.animation=this.node.getComponent(cc.Animation)),this._NoAnimation||null==this.animation||null==this.showClip)this.onShow();else{this.showing=!0,this.animation.play(this.showClip.name);var r=this.showClip.duration;setTimeout(function(){t.schedule(t.onShow,0,0),t.showing=!1},1e3*+r)}a&&a[0]instanceof o&&(this._ToForceWindow=a[0],this._ToForceWindow.toBack()),this.dispatchShowEvent()}},t.prototype.onShow=function(){},t.prototype.dispatchShowEvent=function(){r.Emitter.fire("onShowUI",this)},t.prototype.dispatchHideEvent=function(){r.Emitter.fire("onHideUI",this)},t.prototype.toBack=function(){this.hide(),this._ToForceWindow&&(this._ToForceWindow.toForce(),this._ToForceWindow=null)},t.prototype.toForce=function(){this.show()},t.prototype.hide=function(){var e=this;if(this.activeInHierarchy&&!this.hideing)if(this.showing=!1,this.hideing=!0,null==this.animation&&(this.animation=this.node.getComponent(cc.Animation)),null!=this.animation&&null!=this.hideClip){this.animation.play(this.hideClip.name);var t=this.hideClip.duration;setTimeout(function(){e.onHide()},1e3*t)}else this.onHide()},t.prototype.onHide=function(){e.prototype.hide.call(this),this.hideing=!1,this.stopEventing&&this.stopEventOff(),this.dispatchHideEvent()},t.prototype.stopEventOn=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.stopPropagation,this),this.node.on(cc.Node.EventType.MOUSE_UP,this.stopPropagation,this)},t.prototype.stopEventOff=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.stopPropagation,this),this.node.off(cc.Node.EventType.MOUSE_UP,this.stopPropagation,this)},t.prototype.stopPropagation=function(e){e.stopPropagation()},__decorate([d(cc.Animation)],t.prototype,"animation",void 0),__decorate([d(cc.AnimationClip)],t.prototype,"showClip",void 0),__decorate([d(cc.AnimationClip)],t.prototype,"hideClip",void 0),__decorate([d],t.prototype,"stopEventing",void 0),__decorate([d({type:cc.Enum(a)})],t.prototype,"siblingIndexType",void 0),__decorate([d],t.prototype,"clickToback",void 0),__decorate([d],t.prototype,"coverBanner",void 0),__decorate([d],t.prototype,"pauseGame",void 0),o=__decorate([u],t)}(i.default);o.default=p,cc._RF.pop()},{"../../Game":"Game","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../global/Emitter":"Emitter","./WNode":"WNode"}],WinTaskWindow:[function(e,t,o){"use strict";cc._RF.push(t,"df72dM8bgNJ3KwV8LkYlkeg","WinTaskWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("../../global/GameConfig"),r=e("../UICenter"),n=e("../../data/LevelData"),s=e("../../Game"),c=e("./LevelWindow"),l=e("../../core/global/I18N"),u=e("../../core/util/StrUtil"),d=e("../../global/AudioMgr"),p=cc._decorator,h=p.ccclass,f=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.expLabel=null,t.iconNode=null,t.addExp=0,t}return __extends(t,e),t.prototype.show=function(t){if(e.prototype.show.call(this),this.onFinished=t,r.UICenter.openLevelWindow(n.LevelData.copy(s.Game.userData.levelData),!1),s.Game.taskMgr.winTaskComplete){var o=s.Game.taskMgr.taskData.winTask;s.Game.taskMgr.winTaskComplete=!1,this.addExp=i.default.WinTaskRewardExp,this.titleLabel.string=1==o?l.default.get("L878"):u.default.stringFormat(l.default.get("L879"),o),d.AudioMgr.playSFX("first_win_of_day")}else this.addExp=i.default.SuccRewardExp,this.titleLabel.string=u.default.empty;this.expLabel.string="+"+this.addExp,n.LevelData.addExp(this.addExp)},t.prototype.onShow=function(){var t=this;e.prototype.onShow.call(this),c.default.animate(this.iconNode,this.addExp,function(){t.toBack()})},t.prototype.onHide=function(){e.prototype.onHide.call(this),this.onFinished&&this.onFinished()},t.prototype.toBack=function(){e.prototype.toBack.call(this),r.UICenter.closeLevelWindow()},__decorate([f(cc.Label)],t.prototype,"titleLabel",void 0),__decorate([f(cc.Label)],t.prototype,"expLabel",void 0),__decorate([f(cc.Node)],t.prototype,"iconNode",void 0),__decorate([h],t)}(a.default);o.default=g,cc._RF.pop()},{"../../Game":"Game","../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../core/util/StrUtil":"StrUtil","../../data/LevelData":"LevelData","../../global/AudioMgr":"AudioMgr","../../global/GameConfig":"GameConfig","../UICenter":"UICenter","./LevelWindow":"LevelWindow"}],WinnerWindow:[function(e,t,o){"use strict";cc._RF.push(t,"d33e8fbyFZG1IrI8wBBHj1t","WinnerWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../global/AudioMgr"),i=e("../../core/global/Emitter"),r=e("../../core/util/DateUtils"),n=e("../../Game"),s=e("../../core/UI/WWindow"),c=e("../../core/global/I18N"),l=e("../../global/Const"),u=e("../../game/GameMgr"),d=e("../../core/Table/TableHelper"),p=e("../../core/Table/Table"),h=e("../../core/util/StrUtil"),f=e("../UICenter"),g=e("../../global/DataManager"),m=e("../../global/GameConfig"),y=e("../../data/DataTools"),v=e("../../data/BgUnlockHelper"),b=cc._decorator,C=b.ccclass,_=b.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.texts=[],t.report=[],t.bgProgressNode=null,t.pages=null,t.richWinTimes=null,t.richUnlockTip=null,t.labUnlock=null,t.bgUnlock=null,t.bgLock=null,t.iconFrames=[],t.iconPos=null,t.lockFrames=[],t.lockIcon=null,t.bgImages=[],t.magicReward=null,t.continueBtnLabel=null,t.nextBtnLabel=null,t.bestStars=[],t.bestBgs=[],t.bestColors=[],t.animating=!1,t.mCurrBgIdx=0,t.mProgressTarget=0,t.mCurrProgress=0,t.mNewUnlock=!1,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),i.Emitter.register(l.default.eLanguageChange,this.initLanguage,this),this.initLanguage()},t.prototype.initLanguage=function(){this.texts[0].string=c.default.get("L109"),this.texts[1].string=c.default.get("L108"),this.texts[2].string=c.default.get("L107"),this.texts[3].string=c.default.get("L4004"),this.texts[4].string=c.default.get("L4005"),this.labUnlock.string=c.default.get("L4008"),this.continueBtnLabel.string=c.default.get("L523")},t.prototype.show=function(){e.prototype.show.call(this),this.animating=!1,this.mNewUnlock=!1,n.Game.gameMgr.gameType!=u.GameType.Daliy?this.nextBtnLabel.string=c.default.get("L528"):this.nextBtnLabel.string=c.default.get("L3"),this.report[0].string=n.Game.userData.step+"",this.report[1].string=r.default.timeFormat(n.Game.userData.time,!1),this.report[2].string=n.Game.userData.score+"",this.bestStars[0].active=y.default.stepNewRecord(),this.bestStars[1].active=y.default.timeNewRecord(),this.bestStars[2].active=y.default.scoreNewRecord(),this.bestBgs[0].active=y.default.stepNewRecord(),this.bestBgs[1].active=y.default.timeNewRecord(),this.bestBgs[2].active=y.default.scoreNewRecord(),y.default.todayBestNewRecord()?this.report[3].node.color=this.bestColors[1]:this.report[3].node.color=this.bestColors[0],y.default.bestScoreNewRecord()?this.report[4].node.color=this.bestColors[1]:this.report[4].node.color=this.bestColors[0],this.report[3].string=n.Game.userData.getTodayBestScore()+"",this.report[4].string=n.Game.userData.getBestScore()+"",this.pages.setPosition(new cc.Vec2(this.pages.width/4,this.pages.y));var t=n.Game.userData.getSuccCount();this.richWinTimes.string=h.default.stringFormat(c.default.get("L4006"),t),this.updateUnlockData();var o=v.default.isUnlockBg();if(this.mNewUnlock=o,this.richUnlockTip.node.active=!o&&this.mCurrProgress<this.mProgressTarget,this.labUnlock.node.active=o,!o&&this.mCurrProgress<this.mProgressTarget){var a=v.default.getNeedSuccCount();this.richUnlockTip.string=h.default.stringFormat(c.default.get("L4007"),a)}this.mCurrProgress<=this.mProgressTarget?this.bgLock.spriteFrame=this.lockFrames[0]:this.bgLock.spriteFrame=this.lockFrames[1],this.lockIcon.active=this.mCurrProgress<=this.mProgressTarget,this.showBgProgress()},t.prototype.onShow=function(){var t=this;e.prototype.onShow.call(this);for(var o=function(e){setTimeout(function(){var o=t.bestStars[e];if(o.active){var a=o.getComponent(cc.Animation);a&&(a.play().wrapMode=cc.WrapMode.Loop)}},300+200*e)},a=0;a<this.bestStars.length;a++)o(a)},t.prototype.victoryDingSound=function(){},t.prototype.onContinueClick=function(){var e=this;this.animating=!0;var t=new cc.Vec3(-this.pages.width/4,this.pages.y,0);cc.tween(this.pages).to(.2,{position:t}).delay(.4).call(function(){!e.mNewUnlock&&e.mCurrProgress<e.mProgressTarget&&e.lightCurrPoint()}).start();var o=this.getArrowCurrPos();cc.tween(this.iconPos).delay(.3).to(.2,{position:o}).call(function(){e.mNewUnlock&&(e.bgLock.spriteFrame=e.lockFrames[1],e.lockIcon.active=!1)}).delay(.3).call(function(){e.mNewUnlock&&f.UICenter.openNewBGWindow(e.mCurrBgIdx),e.animating=!1}).start(),this.checkMagicReward()},t.prototype.getArrowCurrPos=function(){var e=new cc.Vec3;if(this.mCurrProgress>=this.mProgressTarget)e.x=this.bgLock.node.position.x,e.y=this.iconPos.position.y;else{var t=this.mProgressTarget/m.default.DefaultUnlockBgTarget,o=this.mCurrProgress;if(t>1&&(o=Math.floor(o/t)),0!=o){var a=this.bgProgressNode.children[o-1].convertToWorldSpaceAR(cc.Vec3.ZERO),i=this.iconPos.parent.convertToNodeSpaceAR(a);e.x=i.x}else e.x=this.bgUnlock.node.position.x;e.y=this.iconPos.position.y}return e},t.prototype.showBgProgress=function(){this.refreshBgImages(),this.refreshPreProgress()},t.prototype.lightCurrPoint=function(){var e=this.mProgressTarget/m.default.DefaultUnlockBgTarget,t=this.mCurrProgress;e>1&&(t=Math.floor(t/e)),this.mCurrProgress%e==0&&(this.bgProgressNode.children[t-1].getComponent(cc.Sprite).spriteFrame=this.iconFrames[1])},t.prototype.refreshPreProgress=function(){var e=this.mProgressTarget/m.default.DefaultUnlockBgTarget,t=this.mProgressTarget,o=this.mCurrProgress;e>1&&(t=Math.floor(t/e),o=Math.floor(o/e));var a;a=this.mProgressTarget<=this.mProgressTarget?this.mCurrProgress%e==0?o-1:o:t;for(var i=this.bgProgressNode.children.length,r=0;r<i;r++){var n=this.bgProgressNode.children[r];if(n.active=r<t-1,n.active)n.getComponent(cc.Sprite).spriteFrame=r<a?this.iconFrames[1]:this.iconFrames[0]}if(0==a){var s=new cc.Vec2(this.bgUnlock.node.position.x,this.iconPos.position.y);this.iconPos.setPosition(s)}else if(a<t){var c=this.bgProgressNode.children[a-1].convertToWorldSpaceAR(cc.Vec3.ZERO),l=this.iconPos.parent.convertToNodeSpaceAR(c);s=new cc.Vec2(l.x,this.iconPos.y),this.iconPos.setPosition(s)}else s=new cc.Vec2(this.bgLock.node.position.x,this.iconPos.position.y),this.iconPos.setPosition(s)},t.prototype.PlayNew=function(){this.animating||(this.animating=!0,this.close(),i.Emitter.fire(l.default.eOnGameToMenu),n.Game.userData.subFrom=u.SubGameFrom.FromWinner,n.Game.gameMgr.gameType!=u.GameType.Daliy?this.onNewGame():(n.Game.gameMgr.stage.reset(),n.Game.gameMgr.stageUI.reset(),f.UICenter.openDaliyWin(n.Game.gameMgr.DaliyInfo[2]),i.Emitter.fire(l.default.eNewGameTips)))},t.prototype.onNewGame=function(){n.Game.gameMgr.startGame(u.GameType.Normal)},t.prototype.close=function(){a.AudioMgr.clickOK(),this.stopBestStarsAnimation(),this.toBack()},t.prototype.updateUnlockData=function(){this.mCurrBgIdx=v.default.getCurrBgIdx(),this.mProgressTarget=v.default.getCurrTarget(),this.mCurrProgress=v.default.getCurrProgress()},t.prototype.refreshBgImages=function(){var e=this.mCurrBgIdx-1;if(!(e<0)){var t=d.TableHelper.GetFieldByIndex(p.eTable.eTabGameBg,e),o=g.default.getGameBg(t.res);this.bgImages[0].spriteFrame=o;var a=d.TableHelper.GetFieldByIndex(p.eTable.eTabGameBg,this.mCurrBgIdx),i=g.default.getGameBg(a.res);this.bgImages[1].spriteFrame=i}},t.prototype.checkMagicReward=function(){var e=n.Game.userData.getSuccCount()%m.default.MagicWandTarget==0;this.magicReward.active=e,e&&(n.Game.userData.magicCount+=1)},t.prototype.stopBestStarsAnimation=function(){for(var e=0;e<this.bestStars.length;e++)if(this.bestStars[e].active){var t=this.bestStars[e].getComponent(cc.Animation);t&&t.stop(),this.bestStars[e].scaleX=1,this.bestStars[e].scaleY=1,this.bestStars[e].active=!1}},__decorate([_({type:cc.Label,tooltip:"\u9759\u6001\u6587\u672c"})],t.prototype,"texts",void 0),__decorate([_({type:cc.Label,tooltip:"\u52a8\u6001\u6570\u636e\u6587\u672c"})],t.prototype,"report",void 0),__decorate([_(cc.Node)],t.prototype,"bgProgressNode",void 0),__decorate([_(cc.Node)],t.prototype,"pages",void 0),__decorate([_(cc.RichText)],t.prototype,"richWinTimes",void 0),__decorate([_(cc.RichText)],t.prototype,"richUnlockTip",void 0),__decorate([_(cc.Label)],t.prototype,"labUnlock",void 0),__decorate([_(cc.Sprite)],t.prototype,"bgUnlock",void 0),__decorate([_(cc.Sprite)],t.prototype,"bgLock",void 0),__decorate([_(cc.SpriteFrame)],t.prototype,"iconFrames",void 0),__decorate([_(cc.Node)],t.prototype,"iconPos",void 0),__decorate([_(cc.SpriteFrame)],t.prototype,"lockFrames",void 0),__decorate([_(cc.Node)],t.prototype,"lockIcon",void 0),__decorate([_(cc.Sprite)],t.prototype,"bgImages",void 0),__decorate([_(cc.Node)],t.prototype,"magicReward",void 0),__decorate([_(cc.Label)],t.prototype,"continueBtnLabel",void 0),__decorate([_(cc.Label)],t.prototype,"nextBtnLabel",void 0),__decorate([_(cc.Node)],t.prototype,"bestStars",void 0),__decorate([_(cc.Node)],t.prototype,"bestBgs",void 0),__decorate([_(cc.Color)],t.prototype,"bestColors",void 0),__decorate([C],t)}(s.default);o.default=T,cc._RF.pop()},{"../../Game":"Game","../../core/Table/Table":"Table","../../core/Table/TableHelper":"TableHelper","../../core/UI/WWindow":"WWindow","../../core/global/Emitter":"Emitter","../../core/global/I18N":"I18N","../../core/util/DateUtils":"DateUtils","../../core/util/StrUtil":"StrUtil","../../data/BgUnlockHelper":"BgUnlockHelper","../../data/DataTools":"DataTools","../../game/GameMgr":"GameMgr","../../global/AudioMgr":"AudioMgr","../../global/Const":"Const","../../global/DataManager":"DataManager","../../global/GameConfig":"GameConfig","../UICenter":"UICenter"}],YouWinWindow:[function(e,t,o){"use strict";cc._RF.push(t,"16accYjI5pLSL/DH+Vc67EQ","YouWinWindow"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../core/UI/WWindow"),i=e("../../global/AudioMgr"),r=e("../../core/global/I18N"),n=cc._decorator,s=n.ccclass,c=n.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.winLabel=null,t}return __extends(t,e),t.prototype.show=function(t){var o=this;e.prototype.show.call(this),this.finished=t,this.winLabel.string=r.default.get("L351"),this.timer=setTimeout(function(){o.timer=void 0,o.toBack()},3e3),i.AudioMgr.youWin(),this.soundId=i.AudioMgr.curEffectId},t.prototype.onHide=function(){e.prototype.onHide.call(this),this.finished&&this.finished()},t.prototype.toBack=function(){this.soundId&&(cc.audioEngine.stopEffect(this.soundId),this.soundId=void 0),this.timer&&(clearTimeout(Number(this.timer)),this.timer=void 0),e.prototype.toBack.call(this)},__decorate([c(cc.Label)],t.prototype,"winLabel",void 0),__decorate([s],t)}(a.default);o.default=l,cc._RF.pop()},{"../../core/UI/WWindow":"WWindow","../../core/global/I18N":"I18N","../../global/AudioMgr":"AudioMgr"}]},{},["App","Game","TabManager","Table","TableBase","TableHelper","DialogBox","DialogWarnBox","Toast","ToastFull","UIManager","UIRootFit","WNode","WWindow","RotateForever","SwitchButton","Textfield","Emitter","I18N","PEDictionary","ByteArray","Endian","ErrorManager","PNGDataDecoder","DecodeStream","FlateStream","ColorUtil","DateUtils","MathUtil","ResUtil","StrUtil","VecUtil","BgUnlockHelper","CardData","CardDefine","CardLibData","DaliyHelper","DataTools","LevelData","ShopHelper","StoryHelper","TaskData","UserData","CardLibrary","CardSlotView","CardView","GameMgr","GameRes","GameSucc","MagicComp","ScoreCounter","ShuffleComp","Stage","StageView","TipsComp","UndoComp","CardSlotCenterView","CardSlotDealerView","CardSlotFlopView","CardSlotGameView","CardSlotMoveView","CardSlotTargetView","AudioMgr","Const","DataManager","GameConfig","Loading","AndroidPaySDK","DefaultPaySDK","ISPAYSDK","AndroidSDK","DefaultSDK","FacebookSDK","ISDK","LogEvent","SDKConst","SdkPipeline","StsLogEvent","CondFactory","CondGroup","Condition","Task","TaskDefine","TaskManager","Counter","CounterOrder2TN","CounterTCount","CounterWin","CounterWinC","DescOrder2CN","Judicator","JudicatorACN","RecordMax","Recorder","RecorderClearCol","Toggler","CardLibTest","AnimationUtil","DropCardEff","LoaderWindow","UICenter","AutoCompleteWindow","CardBGWindow","CardFaceWindow","CelebrateEffectWindow","DailyHelpWindow","DaliyMiniWindow","DaliyWindow","FailWindow","GameBGWindow","GameWindow","GoldWindow","GuideWindow","HelperWindow","LanguageWindow","LevelUpWindow","LevelWindow","LoadingWindow","MagicAdWindow","MagicWindow","MessageBox","NewBGWindow","NewRecordWindow","PuzzleWindow","RemoveAdFailWindow","RemoveAdWindow","ReportWindow","SettingWindow","ShuffleWindow","StageWindow","StoryWindow","SuccEffectWindow","TaskHelperWindow","TaskWindow","TitleWindow","TrophyMonthWindow","WinTaskWindow","WinnerWindow","YouWinWindow","CardBGItem","CardFaceItem","DayItem","LanguageItem","StoryDialog","StoryItem","StoryProgress","TaskItem","TitleItem","TrophyMonthItem","AnimationClub","ClassicJump","ICelebrateEffect","ShapeBase","Shape4Circles","ShapeCircle","ShapeConcentricCircles","ShapeDiamond","ShapePentagram","ShapeRhombus","ShapeSandglass","ShapeSquare","ShapeTriangular","ShapeTriangular2"]);